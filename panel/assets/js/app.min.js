var Formwork=(()=>{var zd=Object.create;var Jr=Object.defineProperty,_d=Object.defineProperties,jd=Object.getOwnPropertyDescriptor,Gd=Object.getOwnPropertyDescriptors,Ud=Object.getOwnPropertyNames,qi=Object.getOwnPropertySymbols,$d=Object.getPrototypeOf,Lo=Object.prototype.hasOwnProperty,ku=Object.prototype.propertyIsEnumerable;var Su=(o,a,s)=>a in o?Jr(o,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[a]=s,Ze=(o,a)=>{for(var s in a||(a={}))Lo.call(a,s)&&Su(o,s,a[s]);if(qi)for(var s of qi(a))ku.call(a,s)&&Su(o,s,a[s]);return o},Do=(o,a)=>_d(o,Gd(a));var Cu=(o,a)=>{var s={};for(var u in o)Lo.call(o,u)&&a.indexOf(u)<0&&(s[u]=o[u]);if(o!=null&&qi)for(var u of qi(o))a.indexOf(u)<0&&ku.call(o,u)&&(s[u]=o[u]);return s};var cr=(o,a)=>()=>(a||o((a={exports:{}}).exports,a),a.exports),Yd=(o,a)=>{for(var s in a)Jr(o,s,{get:a[s],enumerable:!0})},Eu=(o,a,s,u)=>{if(a&&typeof a=="object"||typeof a=="function")for(let c of Ud(a))!Lo.call(o,c)&&c!==s&&Jr(o,c,{get:()=>a[c],enumerable:!(u=jd(a,c))||u.enumerable});return o};var Xi=(o,a,s)=>(s=o!=null?zd($d(o)):{},Eu(a||!o||!o.__esModule?Jr(s,"default",{value:o,enumerable:!0}):s,o)),qd=o=>Eu(Jr({},"__esModule",{value:!0}),o);var zn=cr((sl,ul)=>{(function(o,a){typeof sl=="object"&&typeof ul!="undefined"?ul.exports=a():typeof define=="function"&&define.amd?define(a):(o=o||self,o.CodeMirror=a())})(sl,function(){"use strict";var o=navigator.userAgent,a=navigator.platform,s=/gecko\/\d/i.test(o),u=/MSIE \d/.test(o),c=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(o),g=/Edge\/(\d+)/.exec(o),p=u||c||g,m=p&&(u?document.documentMode||6:+(g||c)[1]),x=!g&&/WebKit\//.test(o),k=x&&/Qt\/\d+\.\d+/.test(o),D=!g&&/Chrome\/(\d+)/.exec(o),N=D&&+D[1],O=/Opera\//.test(o),T=/Apple Computer/.test(navigator.vendor),b=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(o),A=/PhantomJS/.test(o),F=T&&(/Mobile\/\w+/.test(o)||navigator.maxTouchPoints>2),P=/Android/.test(o),_=F||P||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(o),G=F||/Mac/.test(a),ie=/\bCrOS\b/.test(o),ve=/win/i.test(a),V=O&&o.match(/Version\/(\d*\.\d*)/);V&&(V=Number(V[1])),V&&V>=15&&(O=!1,x=!0);var te=G&&(k||O&&(V==null||V<12.11)),ae=s||p&&m>=9;function K(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var we=function(e,t){var r=e.className,n=K(t).exec(r);if(n){var i=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(i?n[1]+i:"")}};function j(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function U(e,t){return j(e).appendChild(t)}function E(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),typeof t=="string")i.appendChild(document.createTextNode(t));else if(t)for(var l=0;l<t.length;++l)i.appendChild(t[l]);return i}function R(e,t,r,n){var i=E(e,t,r,n);return i.setAttribute("role","presentation"),i}var B;document.createRange?B=function(e,t,r,n){var i=document.createRange();return i.setEnd(n||e,r),i.setStart(e,t),i}:B=function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(i){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};function J(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function ye(e){var t;try{t=e.activeElement}catch(r){t=e.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function Te(e,t){var r=e.className;K(t).test(r)||(e.className+=(r?" ":"")+t)}function It(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!K(r[n]).test(t)&&(t+=" "+r[n]);return t}var C=function(e){e.select()};F?C=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:p&&(C=function(e){try{e.select()}catch(t){}});function y(e){return e.display.wrapper.ownerDocument}function ee(e){return y(e).defaultView}function Le(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function he(e,t,r){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(r!==!1||!t.hasOwnProperty(n))&&(t[n]=e[n]);return t}function Ne(e,t,r,n,i){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var l=n||0,f=i||0;;){var d=e.indexOf("	",l);if(d<0||d>=t)return f+(t-l);f+=d-l,f+=r-f%r,l=d+1}}var gt=function(){this.id=null,this.f=null,this.time=0,this.handler=Le(this.onTimeout,this)};gt.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},gt.prototype.set=function(e,t){this.f=t;var r=+new Date+e;(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=r)};function Me(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}var Ft=50,Ct={toString:function(){return"CodeMirror.Pass"}},Se={scroll:!1},Ue={origin:"*mouse"},Ht={origin:"+move"};function xr(e,t,r){for(var n=0,i=0;;){var l=e.indexOf("	",n);l==-1&&(l=e.length);var f=l-n;if(l==e.length||i+f>=t)return n+Math.min(f,t-i);if(i+=l-n,i+=r-i%r,n=l+1,i>=t)return n}}var Xt=[""];function Pt(e){for(;Xt.length<=e;)Xt.push(me(Xt)+" ");return Xt[e]}function me(e){return e[e.length-1]}function Kt(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function jn(e,t,r){for(var n=0,i=r(t);n<e.length&&r(e[n])<=i;)n++;e.splice(n,0,t)}function Qt(){}function Zt(e,t){var r;return Object.create?r=Object.create(e):(Qt.prototype=e,r=new Qt),t&&he(t,r),r}var ga=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function va(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||ga.test(e))}function hi(e,t){return t?t.source.indexOf("\\w")>-1&&va(e)?!0:t.test(e):va(e)}function vl(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var Mf=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ma(e){return e.charCodeAt(0)>=768&&Mf.test(e)}function ml(e,t,r){for(;(r<0?t>0:t<e.length)&&ma(e.charAt(t));)t+=r;return t}function br(e,t,r){for(var n=t>r?-1:1;;){if(t==r)return t;var i=(t+r)/2,l=n<0?Math.ceil(i):Math.floor(i);if(l==t)return e(l)?t:r;e(l)?r=l:t=l+n}}function Af(e,t,r,n){if(!e)return n(t,r,"ltr",0);for(var i=!1,l=0;l<e.length;++l){var f=e[l];(f.from<r&&f.to>t||t==r&&f.to==t)&&(n(Math.max(f.from,t),Math.min(f.to,r),f.level==1?"rtl":"ltr",l),i=!0)}i||n(t,r,"ltr")}var wr=null;function Sr(e,t,r){var n;wr=null;for(var i=0;i<e.length;++i){var l=e[i];if(l.from<t&&l.to>t)return i;l.to==t&&(l.from!=l.to&&r=="before"?n=i:wr=i),l.from==t&&(l.from!=l.to&&r!="before"?n=i:wr=i)}return n!=null?n:wr}var Nf=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function r(v){return v<=247?e.charAt(v):1424<=v&&v<=1524?"R":1536<=v&&v<=1785?t.charAt(v-1536):1774<=v&&v<=2220?"r":8192<=v&&v<=8203?"w":v==8204?"b":"L"}var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,l=/[LRr]/,f=/[Lb1n]/,d=/[1n]/;function h(v,w,S){this.level=v,this.from=w,this.to=S}return function(v,w){var S=w=="ltr"?"L":"R";if(v.length==0||w=="ltr"&&!n.test(v))return!1;for(var M=v.length,L=[],I=0;I<M;++I)L.push(r(v.charCodeAt(I)));for(var H=0,z=S;H<M;++H){var Y=L[H];Y=="m"?L[H]=z:z=Y}for(var Q=0,q=S;Q<M;++Q){var Z=L[Q];Z=="1"&&q=="r"?L[Q]="n":l.test(Z)&&(q=Z,Z=="r"&&(L[Q]="R"))}for(var oe=1,re=L[0];oe<M-1;++oe){var pe=L[oe];pe=="+"&&re=="1"&&L[oe+1]=="1"?L[oe]="1":pe==","&&re==L[oe+1]&&(re=="1"||re=="n")&&(L[oe]=re),re=pe}for(var De=0;De<M;++De){var Ke=L[De];if(Ke==",")L[De]="N";else if(Ke=="%"){var Oe=void 0;for(Oe=De+1;Oe<M&&L[Oe]=="%";++Oe);for(var mt=De&&L[De-1]=="!"||Oe<M&&L[Oe]=="1"?"1":"N",ft=De;ft<Oe;++ft)L[ft]=mt;De=Oe-1}}for(var ze=0,ct=S;ze<M;++ze){var Ve=L[ze];ct=="L"&&Ve=="1"?L[ze]="L":l.test(Ve)&&(ct=Ve)}for(var je=0;je<M;++je)if(i.test(L[je])){var _e=void 0;for(_e=je+1;_e<M&&i.test(L[_e]);++_e);for(var Fe=(je?L[je-1]:S)=="L",dt=(_e<M?L[_e]:S)=="L",ur=Fe==dt?Fe?"L":"R":S,yn=je;yn<_e;++yn)L[yn]=ur;je=_e-1}for(var tt=[],_t,Qe=0;Qe<M;)if(f.test(L[Qe])){var Co=Qe;for(++Qe;Qe<M&&f.test(L[Qe]);++Qe);tt.push(new h(0,Co,Qe))}else{var an=Qe,In=tt.length,Fn=w=="rtl"?1:0;for(++Qe;Qe<M&&L[Qe]!="L";++Qe);for(var it=an;it<Qe;)if(d.test(L[it])){an<it&&(tt.splice(In,0,new h(1,an,it)),In+=Fn);var fr=it;for(++it;it<Qe&&d.test(L[it]);++it);tt.splice(In,0,new h(2,fr,it)),In+=Fn,an=it}else++it;an<Qe&&tt.splice(In,0,new h(1,an,Qe))}return w=="ltr"&&(tt[0].level==1&&(_t=v.match(/^\s+/))&&(tt[0].from=_t[0].length,tt.unshift(new h(0,0,_t[0].length))),me(tt).level==1&&(_t=v.match(/\s+$/))&&(me(tt).to-=_t[0].length,tt.push(new h(0,M-_t[0].length,M)))),w=="rtl"?tt.reverse():tt}}();function Jt(e,t){var r=e.order;return r==null&&(r=e.order=Nf(e.text,t)),r}var yl=[],le=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||yl).concat(r)}};function ya(e,t){return e._handlers&&e._handlers[t]||yl}function xt(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers,i=n&&n[t];if(i){var l=Me(i,r);l>-1&&(n[t]=i.slice(0,l).concat(i.slice(l+1)))}}}function We(e,t){var r=ya(e,t);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function $e(e,t,r){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),We(e,r||t.type,e,t),xa(t)||t.codemirrorIgnore}function xl(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)Me(r,t[n])==-1&&r.push(t[n])}function Et(e,t){return ya(e,t).length>0}function Gn(e){e.prototype.on=function(t,r){le(this,t,r)},e.prototype.off=function(t,r){xt(this,t,r)}}function lt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function bl(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function xa(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function kr(e){lt(e),bl(e)}function ba(e){return e.target||e.srcElement}function wl(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),G&&e.ctrlKey&&t==1&&(t=3),t}var Of=function(){if(p&&m<9)return!1;var e=E("div");return"draggable"in e||"dragDrop"in e}(),wa;function If(e){if(wa==null){var t=E("span","\u200B");U(e,E("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(wa=t.offsetWidth<=1&&t.offsetHeight>2&&!(p&&m<8))}var r=wa?E("span","\u200B"):E("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}var Sa;function Ff(e){if(Sa!=null)return Sa;var t=U(e,document.createTextNode("A\u062EA")),r=B(t,0,1).getBoundingClientRect(),n=B(t,1,2).getBoundingClientRect();return j(e),!r||r.left==r.right?!1:Sa=n.right-r.right<3}var ka=`

b`.split(/\n/).length!=3?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf(`
`,t);i==-1&&(i=e.length);var l=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),f=l.indexOf("\r");f!=-1?(r.push(l.slice(0,f)),t+=f+1):(r.push(l),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Hf=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(r){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},Pf=function(){var e=E("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Ca=null;function Bf(e){if(Ca!=null)return Ca;var t=U(e,E("span","x")),r=t.getBoundingClientRect(),n=B(t,0,1).getBoundingClientRect();return Ca=Math.abs(r.left-n.left)>1}var Ea={},Un={};function Wf(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ea[e]=t}function Rf(e,t){Un[e]=t}function pi(e){if(typeof e=="string"&&Un.hasOwnProperty(e))e=Un[e];else if(e&&typeof e.name=="string"&&Un.hasOwnProperty(e.name)){var t=Un[e.name];typeof t=="string"&&(t={name:t}),e=Zt(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return pi("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return pi("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function La(e,t){t=pi(t);var r=Ea[t.name];if(!r)return La(e,"text/plain");var n=r(e,t);if($n.hasOwnProperty(t.name)){var i=$n[t.name];for(var l in i)i.hasOwnProperty(l)&&(n.hasOwnProperty(l)&&(n["_"+l]=n[l]),n[l]=i[l])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var f in t.modeProps)n[f]=t.modeProps[f];return n}var $n={};function zf(e,t){var r=$n.hasOwnProperty(e)?$n[e]:$n[e]={};he(t,r)}function Sn(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function Da(e,t){for(var r;e.innerMode&&(r=e.innerMode(t),!(!r||r.mode==e));)t=r.state,e=r.mode;return r||{mode:e,state:t}}function Sl(e,t,r){return e.startState?e.startState(t,r):!0}var Re=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};Re.prototype.eol=function(){return this.pos>=this.string.length},Re.prototype.sol=function(){return this.pos==this.lineStart},Re.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Re.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Re.prototype.eat=function(e){var t=this.string.charAt(this.pos),r;if(typeof e=="string"?r=t==e:r=t&&(e.test?e.test(t):e(t)),r)return++this.pos,t},Re.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Re.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Re.prototype.skipToEnd=function(){this.pos=this.string.length},Re.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Re.prototype.backUp=function(e){this.pos-=e},Re.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ne(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ne(this.string,this.lineStart,this.tabSize):0)},Re.prototype.indentation=function(){return Ne(this.string,null,this.tabSize)-(this.lineStart?Ne(this.string,this.lineStart,this.tabSize):0)},Re.prototype.match=function(e,t,r){if(typeof e=="string"){var n=function(f){return r?f.toLowerCase():f},i=this.string.substr(this.pos,e.length);if(n(i)==n(e))return t!==!1&&(this.pos+=e.length),!0}else{var l=this.string.slice(this.pos).match(e);return l&&l.index>0?null:(l&&t!==!1&&(this.pos+=l[0].length),l)}},Re.prototype.current=function(){return this.string.slice(this.start,this.pos)},Re.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Re.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Re.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function ne(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],l=i.chunkSize();if(t<l){r=i;break}t-=l}return r.lines[t]}function kn(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(l){var f=l.text;i==r.line&&(f=f.slice(0,r.ch)),i==t.line&&(f=f.slice(t.ch)),n.push(f),++i}),n}function Ta(e,t,r){var n=[];return e.iter(t,r,function(i){n.push(i.text)}),n}function Bt(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function Ce(e){if(e.parent==null)return null;for(var t=e.parent,r=Me(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function Cn(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],l=i.height;if(t<l){e=i;continue e}t-=l,r+=i.chunkSize()}return r}while(!e.lines);for(var f=0;f<e.lines.length;++f){var d=e.lines[f],h=d.height;if(t<h)break;t-=h}return r+f}function Cr(e,t){return t>=e.first&&t<e.first+e.size}function Ma(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function W(e,t,r){if(r===void 0&&(r=null),!(this instanceof W))return new W(e,t,r);this.line=e,this.ch=t,this.sticky=r}function ce(e,t){return e.line-t.line||e.ch-t.ch}function Aa(e,t){return e.sticky==t.sticky&&ce(e,t)==0}function Na(e){return W(e.line,e.ch)}function gi(e,t){return ce(e,t)<0?t:e}function vi(e,t){return ce(e,t)<0?e:t}function kl(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function de(e,t){if(t.line<e.first)return W(e.first,0);var r=e.first+e.size-1;return t.line>r?W(r,ne(e,r).text.length):_f(t,ne(e,t.line).text.length)}function _f(e,t){var r=e.ch;return r==null||r>t?W(e.line,t):r<0?W(e.line,0):e}function Cl(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=de(e,t[n]);return r}var mi=function(e,t){this.state=e,this.lookAhead=t},Wt=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};Wt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Wt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Wt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Wt.fromSaved=function(e,t,r){return t instanceof mi?new Wt(e,Sn(e.mode,t.state),r,t.lookAhead):new Wt(e,Sn(e.mode,t),r)},Wt.prototype.save=function(e){var t=e!==!1?Sn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new mi(t,this.maxLookAhead):t};function El(e,t,r,n){var i=[e.state.modeGen],l={};Nl(e,t.text,e.doc.mode,r,function(v,w){return i.push(v,w)},l,n);for(var f=r.state,d=function(v){r.baseTokens=i;var w=e.state.overlays[v],S=1,M=0;r.state=!0,Nl(e,t.text,w.mode,r,function(L,I){for(var H=S;M<L;){var z=i[S];z>L&&i.splice(S,1,L,i[S+1],z),S+=2,M=Math.min(L,z)}if(I)if(w.opaque)i.splice(H,S-H,L,"overlay "+I),S=H+2;else for(;H<S;H+=2){var Y=i[H+1];i[H+1]=(Y?Y+" ":"")+"overlay "+I}},l),r.state=f,r.baseTokens=null,r.baseTokenPos=1},h=0;h<e.state.overlays.length;++h)d(h);return{styles:i,classes:l.bgClass||l.textClass?l:null}}function Ll(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=Er(e,Ce(t)),i=t.text.length>e.options.maxHighlightLength&&Sn(e.doc.mode,n.state),l=El(e,t,n);i&&(n.state=i),t.stateAfter=n.save(!i),t.styles=l.styles,l.classes?t.styleClasses=l.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Er(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return new Wt(n,!0,t);var l=jf(e,t,r),f=l>n.first&&ne(n,l-1).stateAfter,d=f?Wt.fromSaved(n,f,l):new Wt(n,Sl(n.mode),l);return n.iter(l,t,function(h){Oa(e,h.text,d);var v=d.line;h.stateAfter=v==t-1||v%5==0||v>=i.viewFrom&&v<i.viewTo?d.save():null,d.nextLine()}),r&&(n.modeFrontier=d.line),d}function Oa(e,t,r,n){var i=e.doc.mode,l=new Re(t,e.options.tabSize,r);for(l.start=l.pos=n||0,t==""&&Dl(i,r.state);!l.eol();)Ia(i,l,r.state),l.start=l.pos}function Dl(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=Da(e,t);if(r.mode.blankLine)return r.mode.blankLine(r.state)}}function Ia(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=Da(e,r).mode);var l=e.token(t,r);if(t.pos>t.start)return l}throw new Error("Mode "+e.name+" failed to advance stream.")}var Tl=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r};function Ml(e,t,r,n){var i=e.doc,l=i.mode,f;t=de(i,t);var d=ne(i,t.line),h=Er(e,t.line,r),v=new Re(d.text,e.options.tabSize,h),w;for(n&&(w=[]);(n||v.pos<t.ch)&&!v.eol();)v.start=v.pos,f=Ia(l,v,h.state),n&&w.push(new Tl(v,f,Sn(i.mode,h.state)));return n?w:new Tl(v,f,h.state)}function Al(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";t[n]==null?t[n]=r[2]:new RegExp("(?:^|\\s)"+r[2]+"(?:$|\\s)").test(t[n])||(t[n]+=" "+r[2])}return e}function Nl(e,t,r,n,i,l,f){var d=r.flattenSpans;d==null&&(d=e.options.flattenSpans);var h=0,v=null,w=new Re(t,e.options.tabSize,n),S,M=e.options.addModeClass&&[null];for(t==""&&Al(Dl(r,n.state),l);!w.eol();){if(w.pos>e.options.maxHighlightLength?(d=!1,f&&Oa(e,t,n,w.pos),w.pos=t.length,S=null):S=Al(Ia(r,w,n.state,M),l),M){var L=M[0].name;L&&(S="m-"+(S?L+" "+S:L))}if(!d||v!=S){for(;h<w.start;)h=Math.min(w.start,h+5e3),i(h,v);v=S}w.start=w.pos}for(;h<w.pos;){var I=Math.min(w.pos,h+5e3);i(I,v),h=I}}function jf(e,t,r){for(var n,i,l=e.doc,f=r?-1:t-(e.doc.mode.innerMode?1e3:100),d=t;d>f;--d){if(d<=l.first)return l.first;var h=ne(l,d-1),v=h.stateAfter;if(v&&(!r||d+(v instanceof mi?v.lookAhead:0)<=l.modeFrontier))return d;var w=Ne(h.text,null,e.options.tabSize);(i==null||n>w)&&(i=d-1,n=w)}return i}function Gf(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;n>r;n--){var i=ne(e,n).stateAfter;if(i&&(!(i instanceof mi)||n+i.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}}var Ol=!1,Vt=!1;function Uf(){Ol=!0}function $f(){Vt=!0}function yi(e,t,r){this.marker=e,this.from=t,this.to=r}function Lr(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function Yf(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function qf(e,t,r){var n=r&&window.WeakSet&&(r.markedSpans||(r.markedSpans=new WeakSet));n&&e.markedSpans&&n.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],n&&n.add(e.markedSpans)),t.marker.attachLine(e)}function Xf(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var l=e[i],f=l.marker,d=l.from==null||(f.inclusiveLeft?l.from<=t:l.from<t);if(d||l.from==t&&f.type=="bookmark"&&(!r||!l.marker.insertLeft)){var h=l.to==null||(f.inclusiveRight?l.to>=t:l.to>t);(n||(n=[])).push(new yi(f,l.from,h?null:l.to))}}return n}function Kf(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var l=e[i],f=l.marker,d=l.to==null||(f.inclusiveRight?l.to>=t:l.to>t);if(d||l.from==t&&f.type=="bookmark"&&(!r||l.marker.insertLeft)){var h=l.from==null||(f.inclusiveLeft?l.from<=t:l.from<t);(n||(n=[])).push(new yi(f,h?null:l.from-t,l.to==null?null:l.to-t))}}return n}function Fa(e,t){if(t.full)return null;var r=Cr(e,t.from.line)&&ne(e,t.from.line).markedSpans,n=Cr(e,t.to.line)&&ne(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,l=t.to.ch,f=ce(t.from,t.to)==0,d=Xf(r,i,f),h=Kf(n,l,f),v=t.text.length==1,w=me(t.text).length+(v?i:0);if(d)for(var S=0;S<d.length;++S){var M=d[S];if(M.to==null){var L=Lr(h,M.marker);L?v&&(M.to=L.to==null?null:L.to+w):M.to=i}}if(h)for(var I=0;I<h.length;++I){var H=h[I];if(H.to!=null&&(H.to+=w),H.from==null){var z=Lr(d,H.marker);z||(H.from=w,v&&(d||(d=[])).push(H))}else H.from+=w,v&&(d||(d=[])).push(H)}d&&(d=Il(d)),h&&h!=d&&(h=Il(h));var Y=[d];if(!v){var Q=t.text.length-2,q;if(Q>0&&d)for(var Z=0;Z<d.length;++Z)d[Z].to==null&&(q||(q=[])).push(new yi(d[Z].marker,null,null));for(var oe=0;oe<Q;++oe)Y.push(q);Y.push(h)}return Y}function Il(e){for(var t=0;t<e.length;++t){var r=e[t];r.from!=null&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Qf(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(L){if(L.markedSpans)for(var I=0;I<L.markedSpans.length;++I){var H=L.markedSpans[I].marker;H.readOnly&&(!n||Me(n,H)==-1)&&(n||(n=[])).push(H)}}),!n)return null;for(var i=[{from:t,to:r}],l=0;l<n.length;++l)for(var f=n[l],d=f.find(0),h=0;h<i.length;++h){var v=i[h];if(!(ce(v.to,d.from)<0||ce(v.from,d.to)>0)){var w=[h,1],S=ce(v.from,d.from),M=ce(v.to,d.to);(S<0||!f.inclusiveLeft&&!S)&&w.push({from:v.from,to:d.from}),(M>0||!f.inclusiveRight&&!M)&&w.push({from:d.to,to:v.to}),i.splice.apply(i,w),h+=w.length-3}}return i}function Fl(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Hl(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function xi(e){return e.inclusiveLeft?-1:0}function bi(e){return e.inclusiveRight?1:0}function Ha(e,t){var r=e.lines.length-t.lines.length;if(r!=0)return r;var n=e.find(),i=t.find(),l=ce(n.from,i.from)||xi(e)-xi(t);if(l)return-l;var f=ce(n.to,i.to)||bi(e)-bi(t);return f||t.id-e.id}function Pl(e,t){var r=Vt&&e.markedSpans,n;if(r)for(var i=void 0,l=0;l<r.length;++l)i=r[l],i.marker.collapsed&&(t?i.from:i.to)==null&&(!n||Ha(n,i.marker)<0)&&(n=i.marker);return n}function Bl(e){return Pl(e,!0)}function wi(e){return Pl(e,!1)}function Zf(e,t){var r=Vt&&e.markedSpans,n;if(r)for(var i=0;i<r.length;++i){var l=r[i];l.marker.collapsed&&(l.from==null||l.from<t)&&(l.to==null||l.to>t)&&(!n||Ha(n,l.marker)<0)&&(n=l.marker)}return n}function Wl(e,t,r,n,i){var l=ne(e,t),f=Vt&&l.markedSpans;if(f)for(var d=0;d<f.length;++d){var h=f[d];if(h.marker.collapsed){var v=h.marker.find(0),w=ce(v.from,r)||xi(h.marker)-xi(i),S=ce(v.to,n)||bi(h.marker)-bi(i);if(!(w>=0&&S<=0||w<=0&&S>=0)&&(w<=0&&(h.marker.inclusiveRight&&i.inclusiveLeft?ce(v.to,r)>=0:ce(v.to,r)>0)||w>=0&&(h.marker.inclusiveRight&&i.inclusiveLeft?ce(v.from,n)<=0:ce(v.from,n)<0)))return!0}}}function Dt(e){for(var t;t=Bl(e);)e=t.find(-1,!0).line;return e}function Jf(e){for(var t;t=wi(e);)e=t.find(1,!0).line;return e}function Vf(e){for(var t,r;t=wi(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function Pa(e,t){var r=ne(e,t),n=Dt(r);return r==n?t:Ce(n)}function Rl(e,t){if(t>e.lastLine())return t;var r=ne(e,t),n;if(!fn(e,r))return t;for(;n=wi(r);)r=n.find(1,!0).line;return Ce(r)+1}function fn(e,t){var r=Vt&&t.markedSpans;if(r){for(var n=void 0,i=0;i<r.length;++i)if(n=r[i],!!n.marker.collapsed){if(n.from==null)return!0;if(!n.marker.widgetNode&&n.from==0&&n.marker.inclusiveLeft&&Ba(e,t,n))return!0}}}function Ba(e,t,r){if(r.to==null){var n=r.marker.find(1,!0);return Ba(e,n.line,Lr(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i=void 0,l=0;l<t.markedSpans.length;++l)if(i=t.markedSpans[l],i.marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(i.to==null||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&Ba(e,t,i))return!0}function en(e){e=Dt(e);for(var t=0,r=e.parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var l=r.parent;l;r=l,l=r.parent)for(var f=0;f<l.children.length;++f){var d=l.children[f];if(d==r)break;t+=d.height}return t}function Si(e){if(e.height==0)return 0;for(var t=e.text.length,r,n=e;r=Bl(n);){var i=r.find(0,!0);n=i.from.line,t+=i.from.ch-i.to.ch}for(n=e;r=wi(n);){var l=r.find(0,!0);t-=n.text.length-l.from.ch,n=l.to.line,t+=n.text.length-l.to.ch}return t}function Wa(e){var t=e.display,r=e.doc;t.maxLine=ne(r,r.first),t.maxLineLength=Si(t.maxLine),t.maxLineChanged=!0,r.iter(function(n){var i=Si(n);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=n)})}var Yn=function(e,t,r){this.text=e,Hl(this,t),this.height=r?r(this):1};Yn.prototype.lineNo=function(){return Ce(this)},Gn(Yn);function ec(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Fl(e),Hl(e,r);var i=n?n(e):1;i!=e.height&&Bt(e,i)}function tc(e){e.parent=null,Fl(e)}var nc={},rc={};function zl(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?rc:nc;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function _l(e,t){var r=R("span",null,null,x?"padding-right: .1px":null),n={pre:R("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var l=i?t.rest[i-1]:t.line,f=void 0;n.pos=0,n.addToken=ac,Ff(e.display.measure)&&(f=Jt(l,e.doc.direction))&&(n.addToken=lc(n.addToken,f)),n.map=[];var d=t!=e.display.externalMeasured&&Ce(l);sc(l,n,Ll(e,l,d)),l.styleClasses&&(l.styleClasses.bgClass&&(n.bgClass=It(l.styleClasses.bgClass,n.bgClass||"")),l.styleClasses.textClass&&(n.textClass=It(l.styleClasses.textClass,n.textClass||""))),n.map.length==0&&n.map.push(0,0,n.content.appendChild(If(e.display.measure))),i==0?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(x){var h=n.content.lastChild;(/\bcm-tab\b/.test(h.className)||h.querySelector&&h.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return We(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=It(n.pre.className,n.textClass||"")),n}function ic(e){var t=E("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function ac(e,t,r,n,i,l,f){if(t){var d=e.splitSpaces?oc(t,e.trailingSpace):t,h=e.cm.state.specialChars,v=!1,w;if(!h.test(t))e.col+=t.length,w=document.createTextNode(d),e.map.push(e.pos,e.pos+t.length,w),p&&m<9&&(v=!0),e.pos+=t.length;else{w=document.createDocumentFragment();for(var S=0;;){h.lastIndex=S;var M=h.exec(t),L=M?M.index-S:t.length-S;if(L){var I=document.createTextNode(d.slice(S,S+L));p&&m<9?w.appendChild(E("span",[I])):w.appendChild(I),e.map.push(e.pos,e.pos+L,I),e.col+=L,e.pos+=L}if(!M)break;S+=L+1;var H=void 0;if(M[0]=="	"){var z=e.cm.options.tabSize,Y=z-e.col%z;H=w.appendChild(E("span",Pt(Y),"cm-tab")),H.setAttribute("role","presentation"),H.setAttribute("cm-text","	"),e.col+=Y}else M[0]=="\r"||M[0]==`
`?(H=w.appendChild(E("span",M[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),H.setAttribute("cm-text",M[0]),e.col+=1):(H=e.cm.options.specialCharPlaceholder(M[0]),H.setAttribute("cm-text",M[0]),p&&m<9?w.appendChild(E("span",[H])):w.appendChild(H),e.col+=1);e.map.push(e.pos,e.pos+1,H),e.pos++}}if(e.trailingSpace=d.charCodeAt(t.length-1)==32,r||n||i||v||l||f){var Q=r||"";n&&(Q+=n),i&&(Q+=i);var q=E("span",[w],Q,l);if(f)for(var Z in f)f.hasOwnProperty(Z)&&Z!="style"&&Z!="class"&&q.setAttribute(Z,f[Z]);return e.content.appendChild(q)}e.content.appendChild(w)}}function oc(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n="",i=0;i<e.length;i++){var l=e.charAt(i);l==" "&&r&&(i==e.length-1||e.charCodeAt(i+1)==32)&&(l="\xA0"),n+=l,r=l==" "}return n}function lc(e,t){return function(r,n,i,l,f,d,h){i=i?i+" cm-force-border":"cm-force-border";for(var v=r.pos,w=v+n.length;;){for(var S=void 0,M=0;M<t.length&&(S=t[M],!(S.to>v&&S.from<=v));M++);if(S.to>=w)return e(r,n,i,l,f,d,h);e(r,n.slice(0,S.to-v),i,l,null,d,h),l=null,n=n.slice(S.to-v),v=S.to}}}function jl(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",r.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function sc(e,t,r){var n=e.markedSpans,i=e.text,l=0;if(!n){for(var f=1;f<r.length;f+=2)t.addToken(t,i.slice(l,l=r[f]),zl(r[f+1],t.cm.options));return}for(var d=i.length,h=0,v=1,w="",S,M,L=0,I,H,z,Y,Q;;){if(L==h){I=H=z=M="",Q=null,Y=null,L=1/0;for(var q=[],Z=void 0,oe=0;oe<n.length;++oe){var re=n[oe],pe=re.marker;if(pe.type=="bookmark"&&re.from==h&&pe.widgetNode)q.push(pe);else if(re.from<=h&&(re.to==null||re.to>h||pe.collapsed&&re.to==h&&re.from==h)){if(re.to!=null&&re.to!=h&&L>re.to&&(L=re.to,H=""),pe.className&&(I+=" "+pe.className),pe.css&&(M=(M?M+";":"")+pe.css),pe.startStyle&&re.from==h&&(z+=" "+pe.startStyle),pe.endStyle&&re.to==L&&(Z||(Z=[])).push(pe.endStyle,re.to),pe.title&&((Q||(Q={})).title=pe.title),pe.attributes)for(var De in pe.attributes)(Q||(Q={}))[De]=pe.attributes[De];pe.collapsed&&(!Y||Ha(Y.marker,pe)<0)&&(Y=re)}else re.from>h&&L>re.from&&(L=re.from)}if(Z)for(var Ke=0;Ke<Z.length;Ke+=2)Z[Ke+1]==L&&(H+=" "+Z[Ke]);if(!Y||Y.from==h)for(var Oe=0;Oe<q.length;++Oe)jl(t,0,q[Oe]);if(Y&&(Y.from||0)==h){if(jl(t,(Y.to==null?d+1:Y.to)-h,Y.marker,Y.from==null),Y.to==null)return;Y.to==h&&(Y=!1)}}if(h>=d)break;for(var mt=Math.min(d,L);;){if(w){var ft=h+w.length;if(!Y){var ze=ft>mt?w.slice(0,mt-h):w;t.addToken(t,ze,S?S+I:I,z,h+ze.length==L?H:"",M,Q)}if(ft>=mt){w=w.slice(mt-h),h=mt;break}h=ft,z=""}w=i.slice(l,l=r[v++]),S=zl(r[v++],t.cm.options)}}}function Gl(e,t,r){this.line=t,this.rest=Vf(t),this.size=this.rest?Ce(me(this.rest))-r+1:1,this.node=this.text=null,this.hidden=fn(e,t)}function ki(e,t,r){for(var n=[],i,l=t;l<r;l=i){var f=new Gl(e.doc,ne(e.doc,l),l);i=l+f.size,n.push(f)}return n}var qn=null;function uc(e){qn?qn.ops.push(e):e.ownsGroup=qn={ops:[e],delayedCallbacks:[]}}function fc(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}function cc(e,t){var r=e.ownsGroup;if(r)try{fc(r)}finally{qn=null,t(r)}}var Dr=null;function Ye(e,t){var r=ya(e,t);if(r.length){var n=Array.prototype.slice.call(arguments,2),i;qn?i=qn.delayedCallbacks:Dr?i=Dr:(i=Dr=[],setTimeout(dc,0));for(var l=function(d){i.push(function(){return r[d].apply(null,n)})},f=0;f<r.length;++f)l(f)}}function dc(){var e=Dr;Dr=null;for(var t=0;t<e.length;++t)e[t]()}function Ul(e,t,r,n){for(var i=0;i<t.changes.length;i++){var l=t.changes[i];l=="text"?pc(e,t):l=="gutter"?Yl(e,t,r,n):l=="class"?Ra(e,t):l=="widget"&&gc(e,t,n)}t.changes=null}function Tr(e){return e.node==e.text&&(e.node=E("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),p&&m<8&&(e.node.style.zIndex=2)),e.node}function hc(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var n=Tr(t);t.background=n.insertBefore(E("div",null,r),n.firstChild),e.display.input.setUneditable(t.background)}}function $l(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):_l(e,t)}function pc(e,t){var r=t.text.className,n=$l(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,Ra(e,t)):r&&(t.text.className=r)}function Ra(e,t){hc(e,t),t.line.wrapClass?Tr(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function Yl(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=Tr(t);t.gutterBackground=E("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var l=t.line.gutterMarkers;if(e.options.lineNumbers||l){var f=Tr(t),d=t.gutter=E("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(d.setAttribute("aria-hidden","true"),e.display.input.setUneditable(d),f.insertBefore(d,t.text),t.line.gutterClass&&(d.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!l||!l["CodeMirror-linenumbers"])&&(t.lineNumber=d.appendChild(E("div",Ma(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),l)for(var h=0;h<e.display.gutterSpecs.length;++h){var v=e.display.gutterSpecs[h].className,w=l.hasOwnProperty(v)&&l[v];w&&d.appendChild(E("div",[w],"CodeMirror-gutter-elt","left: "+n.gutterLeft[v]+"px; width: "+n.gutterWidth[v]+"px"))}}}function gc(e,t,r){t.alignable&&(t.alignable=null);for(var n=K("CodeMirror-linewidget"),i=t.node.firstChild,l=void 0;i;i=l)l=i.nextSibling,n.test(i.className)&&t.node.removeChild(i);ql(e,t,r)}function vc(e,t,r,n){var i=$l(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),Ra(e,t),Yl(e,t,r,n),ql(e,t,n),t.node}function ql(e,t,r){if(Xl(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)Xl(e,t.rest[n],t,r,!1)}function Xl(e,t,r,n,i){if(t.widgets)for(var l=Tr(r),f=0,d=t.widgets;f<d.length;++f){var h=d[f],v=E("div",[h.node],"CodeMirror-linewidget"+(h.className?" "+h.className:""));h.handleMouseEvents||v.setAttribute("cm-ignore-events","true"),mc(h,v,r,n),e.display.input.setUneditable(v),i&&h.above?l.insertBefore(v,r.gutter||r.text):l.appendChild(v),Ye(h,"redraw")}}function mc(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function Mr(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!J(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),U(t.display.measure,E("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function tn(e,t){for(var r=ba(t);r!=e.wrapper;r=r.parentNode)if(!r||r.nodeType==1&&r.getAttribute("cm-ignore-events")=="true"||r.parentNode==e.sizer&&r!=e.mover)return!0}function Ci(e){return e.lineSpace.offsetTop}function za(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Kl(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=U(e.measure,E("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return!isNaN(n.left)&&!isNaN(n.right)&&(e.cachedPaddingH=n),n}function Rt(e){return Ft-e.display.nativeBarWidth}function En(e){return e.display.scroller.clientWidth-Rt(e)-e.display.barWidth}function _a(e){return e.display.scroller.clientHeight-Rt(e)-e.display.barHeight}function yc(e,t,r){var n=e.options.lineWrapping,i=n&&En(e);if(!t.measure.heights||n&&t.measure.width!=i){var l=t.measure.heights=[];if(n){t.measure.width=i;for(var f=t.text.firstChild.getClientRects(),d=0;d<f.length-1;d++){var h=f[d],v=f[d+1];Math.abs(h.bottom-v.bottom)>2&&l.push((h.bottom+v.top)/2-r.top)}}l.push(r.bottom-r.top)}}function Ql(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var i=0;i<e.rest.length;i++)if(Ce(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function xc(e,t){t=Dt(t);var r=Ce(t),n=e.display.externalMeasured=new Gl(e.doc,t,r);n.lineN=r;var i=n.built=_l(e,n);return n.text=i.pre,U(e.display.lineMeasure,i.pre),n}function Zl(e,t,r,n){return zt(e,Xn(e,t),r,n)}function ja(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Tn(e,t)];var r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size)return r}function Xn(e,t){var r=Ce(t),n=ja(e,r);n&&!n.text?n=null:n&&n.changes&&(Ul(e,n,r,qa(e)),e.curOp.forceUpdate=!0),n||(n=xc(e,t));var i=Ql(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function zt(e,t,r,n,i){t.before&&(r=-1);var l=r+(n||""),f;return t.cache.hasOwnProperty(l)?f=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(yc(e,t.view,t.rect),t.hasHeights=!0),f=wc(e,t,r,n),f.bogus||(t.cache[l]=f)),{left:f.left,right:f.right,top:i?f.rtop:f.top,bottom:i?f.rbottom:f.bottom}}var Jl={left:0,right:0,top:0,bottom:0};function Vl(e,t,r){for(var n,i,l,f,d,h,v=0;v<e.length;v+=3)if(d=e[v],h=e[v+1],t<d?(i=0,l=1,f="left"):t<h?(i=t-d,l=i+1):(v==e.length-3||t==h&&e[v+3]>t)&&(l=h-d,i=l-1,t>=h&&(f="right")),i!=null){if(n=e[v+2],d==h&&r==(n.insertLeft?"left":"right")&&(f=r),r=="left"&&i==0)for(;v&&e[v-2]==e[v-3]&&e[v-1].insertLeft;)n=e[(v-=3)+2],f="left";if(r=="right"&&i==h-d)for(;v<e.length-3&&e[v+3]==e[v+4]&&!e[v+5].insertLeft;)n=e[(v+=3)+2],f="right";break}return{node:n,start:i,end:l,collapse:f,coverStart:d,coverEnd:h}}function bc(e,t){var r=Jl;if(t=="left")for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var i=e.length-1;i>=0&&(r=e[i]).left==r.right;i--);return r}function wc(e,t,r,n){var i=Vl(t.map,r,n),l=i.node,f=i.start,d=i.end,h=i.collapse,v;if(l.nodeType==3){for(var w=0;w<4;w++){for(;f&&ma(t.line.text.charAt(i.coverStart+f));)--f;for(;i.coverStart+d<i.coverEnd&&ma(t.line.text.charAt(i.coverStart+d));)++d;if(p&&m<9&&f==0&&d==i.coverEnd-i.coverStart?v=l.parentNode.getBoundingClientRect():v=bc(B(l,f,d).getClientRects(),n),v.left||v.right||f==0)break;d=f,f=f-1,h="right"}p&&m<11&&(v=Sc(e.display.measure,v))}else{f>0&&(h=n="right");var S;e.options.lineWrapping&&(S=l.getClientRects()).length>1?v=S[n=="right"?S.length-1:0]:v=l.getBoundingClientRect()}if(p&&m<9&&!f&&(!v||!v.left&&!v.right)){var M=l.parentNode.getClientRects()[0];M?v={left:M.left,right:M.left+Qn(e.display),top:M.top,bottom:M.bottom}:v=Jl}for(var L=v.top-t.rect.top,I=v.bottom-t.rect.top,H=(L+I)/2,z=t.view.measure.heights,Y=0;Y<z.length-1&&!(H<z[Y]);Y++);var Q=Y?z[Y-1]:0,q=z[Y],Z={left:(h=="right"?v.right:v.left)-t.rect.left,right:(h=="left"?v.left:v.right)-t.rect.left,top:Q,bottom:q};return!v.left&&!v.right&&(Z.bogus=!0),e.options.singleCursorHeightPerLine||(Z.rtop=L,Z.rbottom=I),Z}function Sc(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Bf(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function es(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ts(e){e.display.externalMeasure=null,j(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)es(e.display.view[t])}function Ar(e){ts(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ns(e){return D&&P?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function rs(e){return D&&P?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function Ga(e){var t=Dt(e),r=t.widgets,n=0;if(r)for(var i=0;i<r.length;++i)r[i].above&&(n+=Mr(r[i]));return n}function Ei(e,t,r,n,i){if(!i){var l=Ga(t);r.top+=l,r.bottom+=l}if(n=="line")return r;n||(n="local");var f=en(t);if(n=="local"?f+=Ci(e.display):f-=e.display.viewOffset,n=="page"||n=="window"){var d=e.display.lineSpace.getBoundingClientRect();f+=d.top+(n=="window"?0:rs(y(e)));var h=d.left+(n=="window"?0:ns(y(e)));r.left+=h,r.right+=h}return r.top+=f,r.bottom+=f,r}function is(e,t,r){if(r=="div")return t;var n=t.left,i=t.top;if(r=="page")n-=ns(y(e)),i-=rs(y(e));else if(r=="local"||!r){var l=e.display.sizer.getBoundingClientRect();n+=l.left,i+=l.top}var f=e.display.lineSpace.getBoundingClientRect();return{left:n-f.left,top:i-f.top}}function Li(e,t,r,n,i){return n||(n=ne(e.doc,t.line)),Ei(e,n,Zl(e,n,t.ch,i),r)}function Tt(e,t,r,n,i,l){n=n||ne(e.doc,t.line),i||(i=Xn(e,n));function f(I,H){var z=zt(e,i,I,H?"right":"left",l);return H?z.left=z.right:z.right=z.left,Ei(e,n,z,r)}var d=Jt(n,e.doc.direction),h=t.ch,v=t.sticky;if(h>=n.text.length?(h=n.text.length,v="before"):h<=0&&(h=0,v="after"),!d)return f(v=="before"?h-1:h,v=="before");function w(I,H,z){var Y=d[H],Q=Y.level==1;return f(z?I-1:I,Q!=z)}var S=Sr(d,h,v),M=wr,L=w(h,S,v=="before");return M!=null&&(L.other=w(h,M,v!="before")),L}function as(e,t){var r=0;t=de(e.doc,t),e.options.lineWrapping||(r=Qn(e.display)*t.ch);var n=ne(e.doc,t.line),i=en(n)+Ci(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function Ua(e,t,r,n,i){var l=W(e,t,r);return l.xRel=i,n&&(l.outside=n),l}function $a(e,t,r){var n=e.doc;if(r+=e.display.viewOffset,r<0)return Ua(n.first,0,null,-1,-1);var i=Cn(n,r),l=n.first+n.size-1;if(i>l)return Ua(n.first+n.size-1,ne(n,l).text.length,null,1,1);t<0&&(t=0);for(var f=ne(n,i);;){var d=kc(e,f,i,t,r),h=Zf(f,d.ch+(d.xRel>0||d.outside>0?1:0));if(!h)return d;var v=h.find(1);if(v.line==i)return v;f=ne(n,i=v.line)}}function os(e,t,r,n){n-=Ga(t);var i=t.text.length,l=br(function(f){return zt(e,r,f-1).bottom<=n},i,0);return i=br(function(f){return zt(e,r,f).top>n},l,i),{begin:l,end:i}}function ls(e,t,r,n){r||(r=Xn(e,t));var i=Ei(e,t,zt(e,r,n),"line").top;return os(e,t,r,i)}function Ya(e,t,r,n){return e.bottom<=r?!1:e.top>r?!0:(n?e.left:e.right)>t}function kc(e,t,r,n,i){i-=en(t);var l=Xn(e,t),f=Ga(t),d=0,h=t.text.length,v=!0,w=Jt(t,e.doc.direction);if(w){var S=(e.options.lineWrapping?Ec:Cc)(e,t,r,l,w,n,i);v=S.level!=1,d=v?S.from:S.to-1,h=v?S.to:S.from-1}var M=null,L=null,I=br(function(oe){var re=zt(e,l,oe);return re.top+=f,re.bottom+=f,Ya(re,n,i,!1)?(re.top<=i&&re.left<=n&&(M=oe,L=re),!0):!1},d,h),H,z,Y=!1;if(L){var Q=n-L.left<L.right-n,q=Q==v;I=M+(q?0:1),z=q?"after":"before",H=Q?L.left:L.right}else{!v&&(I==h||I==d)&&I++,z=I==0?"after":I==t.text.length?"before":zt(e,l,I-(v?1:0)).bottom+f<=i==v?"after":"before";var Z=Tt(e,W(r,I,z),"line",t,l);H=Z.left,Y=i<Z.top?-1:i>=Z.bottom?1:0}return I=ml(t.text,I,1),Ua(r,I,z,Y,n-H)}function Cc(e,t,r,n,i,l,f){var d=br(function(S){var M=i[S],L=M.level!=1;return Ya(Tt(e,W(r,L?M.to:M.from,L?"before":"after"),"line",t,n),l,f,!0)},0,i.length-1),h=i[d];if(d>0){var v=h.level!=1,w=Tt(e,W(r,v?h.from:h.to,v?"after":"before"),"line",t,n);Ya(w,l,f,!0)&&w.top>f&&(h=i[d-1])}return h}function Ec(e,t,r,n,i,l,f){var d=os(e,t,n,f),h=d.begin,v=d.end;/\s/.test(t.text.charAt(v-1))&&v--;for(var w=null,S=null,M=0;M<i.length;M++){var L=i[M];if(!(L.from>=v||L.to<=h)){var I=L.level!=1,H=zt(e,n,I?Math.min(v,L.to)-1:Math.max(h,L.from)).right,z=H<l?l-H+1e9:H-l;(!w||S>z)&&(w=L,S=z)}}return w||(w=i[i.length-1]),w.from<h&&(w={from:h,to:w.to,level:w.level}),w.to>v&&(w={from:w.from,to:v,level:w.level}),w}var Ln;function Kn(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Ln==null){Ln=E("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Ln.appendChild(document.createTextNode("x")),Ln.appendChild(E("br"));Ln.appendChild(document.createTextNode("x"))}U(e.measure,Ln);var r=Ln.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),j(e.measure),r||1}function Qn(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=E("span","xxxxxxxxxx"),r=E("pre",[t],"CodeMirror-line-like");U(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function qa(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,l=t.gutters.firstChild,f=0;l;l=l.nextSibling,++f){var d=e.display.gutterSpecs[f].className;r[d]=l.offsetLeft+l.clientLeft+i,n[d]=l.clientWidth}return{fixedPos:Xa(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function Xa(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ss(e){var t=Kn(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/Qn(e.display)-3);return function(i){if(fn(e.doc,i))return 0;var l=0;if(i.widgets)for(var f=0;f<i.widgets.length;f++)i.widgets[f].height&&(l+=i.widgets[f].height);return r?l+(Math.ceil(i.text.length/n)||1)*t:l+t}}function Ka(e){var t=e.doc,r=ss(e);t.iter(function(n){var i=r(n);i!=n.height&&Bt(n,i)})}function Dn(e,t,r,n){var i=e.display;if(!r&&ba(t).getAttribute("cm-not-content")=="true")return null;var l,f,d=i.lineSpace.getBoundingClientRect();try{l=t.clientX-d.left,f=t.clientY-d.top}catch(S){return null}var h=$a(e,l,f),v;if(n&&h.xRel>0&&(v=ne(e.doc,h.line).text).length==h.ch){var w=Ne(v,v.length,e.options.tabSize)-v.length;h=W(h.line,Math.max(0,Math.round((l-Kl(e.display).left)/Qn(e.display))-w))}return h}function Tn(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var r=e.display.view,n=0;n<r.length;n++)if(t-=r[n].size,t<0)return n}function st(e,t,r,n){t==null&&(t=e.doc.first),r==null&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Vt&&Pa(e.doc,t)<i.viewTo&&dn(e);else if(r<=i.viewFrom)Vt&&Rl(e.doc,r+n)>i.viewFrom?dn(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)dn(e);else if(t<=i.viewFrom){var l=Di(e,r,r+n,1);l?(i.view=i.view.slice(l.index),i.viewFrom=l.lineN,i.viewTo+=n):dn(e)}else if(r>=i.viewTo){var f=Di(e,t,t,-1);f?(i.view=i.view.slice(0,f.index),i.viewTo=f.lineN):dn(e)}else{var d=Di(e,t,t,-1),h=Di(e,r,r+n,1);d&&h?(i.view=i.view.slice(0,d.index).concat(ki(e,d.lineN,h.lineN)).concat(i.view.slice(h.index)),i.viewTo+=n):dn(e)}var v=i.externalMeasured;v&&(r<v.lineN?v.lineN+=n:t<v.lineN+v.size&&(i.externalMeasured=null))}function cn(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var l=n.view[Tn(e,t)];if(l.node!=null){var f=l.changes||(l.changes=[]);Me(f,r)==-1&&f.push(r)}}}function dn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Di(e,t,r,n){var i=Tn(e,t),l,f=e.display.view;if(!Vt||r==e.doc.first+e.doc.size)return{index:i,lineN:r};for(var d=e.display.viewFrom,h=0;h<i;h++)d+=f[h].size;if(d!=t){if(n>0){if(i==f.length-1)return null;l=d+f[i].size-t,i++}else l=d-t;t+=l,r+=l}for(;Pa(e.doc,r)!=r;){if(i==(n<0?0:f.length-1))return null;r+=n*f[i-(n<0?1:0)].size,i+=n}return{index:i,lineN:r}}function Lc(e,t,r){var n=e.display,i=n.view;i.length==0||t>=n.viewTo||r<=n.viewFrom?(n.view=ki(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=ki(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(Tn(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(ki(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,Tn(e,r)))),n.viewTo=r}function us(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];!i.hidden&&(!i.node||i.changes)&&++r}return r}function Nr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function fs(e,t){t===void 0&&(t=!0);var r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),l=n.selection=document.createDocumentFragment(),f=e.options.$customCursor;f&&(t=!0);for(var d=0;d<r.sel.ranges.length;d++)if(!(!t&&d==r.sel.primIndex)){var h=r.sel.ranges[d];if(!(h.from().line>=e.display.viewTo||h.to().line<e.display.viewFrom)){var v=h.empty();if(f){var w=f(e,h);w&&Qa(e,w,i)}else(v||e.options.showCursorWhenSelecting)&&Qa(e,h.head,i);v||Dc(e,h,l)}}return n}function Qa(e,t,r){var n=Tt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(E("div","\xA0","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var l=Li(e,t,"div",null,null),f=l.right-l.left;i.style.width=(f>0?f:e.defaultCharWidth())+"px"}if(n.other){var d=r.appendChild(E("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));d.style.display="",d.style.left=n.other.left+"px",d.style.top=n.other.top+"px",d.style.height=(n.other.bottom-n.other.top)*.85+"px"}}function Ti(e,t){return e.top-t.top||e.left-t.left}function Dc(e,t,r){var n=e.display,i=e.doc,l=document.createDocumentFragment(),f=Kl(e.display),d=f.left,h=Math.max(n.sizerWidth,En(e)-n.sizer.offsetLeft)-f.right,v=i.direction=="ltr";function w(q,Z,oe,re){Z<0&&(Z=0),Z=Math.round(Z),re=Math.round(re),l.appendChild(E("div",null,"CodeMirror-selected","position: absolute; left: "+q+`px;
                             top: `+Z+"px; width: "+(oe==null?h-q:oe)+`px;
                             height: `+(re-Z)+"px"))}function S(q,Z,oe){var re=ne(i,q),pe=re.text.length,De,Ke;function Oe(ze,ct){return Li(e,W(q,ze),"div",re,ct)}function mt(ze,ct,Ve){var je=ls(e,re,null,ze),_e=ct=="ltr"==(Ve=="after")?"left":"right",Fe=Ve=="after"?je.begin:je.end-(/\s/.test(re.text.charAt(je.end-1))?2:1);return Oe(Fe,_e)[_e]}var ft=Jt(re,i.direction);return Af(ft,Z||0,oe==null?pe:oe,function(ze,ct,Ve,je){var _e=Ve=="ltr",Fe=Oe(ze,_e?"left":"right"),dt=Oe(ct-1,_e?"right":"left"),ur=Z==null&&ze==0,yn=oe==null&&ct==pe,tt=je==0,_t=!ft||je==ft.length-1;if(dt.top-Fe.top<=3){var Qe=(v?ur:yn)&&tt,Co=(v?yn:ur)&&_t,an=Qe?d:(_e?Fe:dt).left,In=Co?h:(_e?dt:Fe).right;w(an,Fe.top,In-an,Fe.bottom)}else{var Fn,it,fr,Eo;_e?(Fn=v&&ur&&tt?d:Fe.left,it=v?h:mt(ze,Ve,"before"),fr=v?d:mt(ct,Ve,"after"),Eo=v&&yn&&_t?h:dt.right):(Fn=v?mt(ze,Ve,"before"):d,it=!v&&ur&&tt?h:Fe.right,fr=!v&&yn&&_t?d:dt.left,Eo=v?mt(ct,Ve,"after"):h),w(Fn,Fe.top,it-Fn,Fe.bottom),Fe.bottom<dt.top&&w(d,Fe.bottom,null,dt.top),w(fr,dt.top,Eo-fr,dt.bottom)}(!De||Ti(Fe,De)<0)&&(De=Fe),Ti(dt,De)<0&&(De=dt),(!Ke||Ti(Fe,Ke)<0)&&(Ke=Fe),Ti(dt,Ke)<0&&(Ke=dt)}),{start:De,end:Ke}}var M=t.from(),L=t.to();if(M.line==L.line)S(M.line,M.ch,L.ch);else{var I=ne(i,M.line),H=ne(i,L.line),z=Dt(I)==Dt(H),Y=S(M.line,M.ch,z?I.text.length+1:null).end,Q=S(L.line,z?0:null,L.ch).start;z&&(Y.top<Q.top-2?(w(Y.right,Y.top,null,Y.bottom),w(d,Q.top,Q.left,Q.bottom)):w(Y.right,Y.top,Q.left-Y.right,Y.bottom)),Y.bottom<Q.top&&w(d,Y.bottom,null,Q.top)}r.appendChild(l)}function Za(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Zn(e),t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function cs(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Va(e))}function Ja(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Zn(e))},100)}function Va(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(We(e,"focus",e,t),e.state.focused=!0,Te(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),x&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Za(e))}function Zn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(We(e,"blur",e,t),e.state.focused=!1,we(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Mi(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,l=0,f=0;f<t.view.length;f++){var d=t.view[f],h=e.options.lineWrapping,v=void 0,w=0;if(!d.hidden){if(i+=d.line.height,p&&m<8){var S=d.node.offsetTop+d.node.offsetHeight;v=S-r,r=S}else{var M=d.node.getBoundingClientRect();v=M.bottom-M.top,!h&&d.text.firstChild&&(w=d.text.firstChild.getBoundingClientRect().right-M.left-1)}var L=d.line.height-v;if((L>.005||L<-.005)&&(i<n&&(l-=L),Bt(d.line,v),ds(d.line),d.rest))for(var I=0;I<d.rest.length;I++)ds(d.rest[I]);if(w>e.display.sizerWidth){var H=Math.ceil(w/Qn(e.display));H>e.display.maxLineLength&&(e.display.maxLineLength=H,e.display.maxLine=d.line,e.display.maxLineChanged=!0)}}}Math.abs(l)>2&&(t.scroller.scrollTop+=l)}function ds(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function Ai(e,t,r){var n=r&&r.top!=null?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-Ci(e));var i=r&&r.bottom!=null?r.bottom:n+e.wrapper.clientHeight,l=Cn(t,n),f=Cn(t,i);if(r&&r.ensure){var d=r.ensure.from.line,h=r.ensure.to.line;d<l?(l=d,f=Cn(t,en(ne(t,d))+e.wrapper.clientHeight)):Math.min(h,t.lastLine())>=f&&(l=Cn(t,en(ne(t,h))-e.wrapper.clientHeight),f=h)}return{from:l,to:Math.max(f,l+1)}}function Tc(e,t){if(!$e(e,"scrollCursorIntoView")){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null,l=r.wrapper.ownerDocument;if(t.top+n.top<0?i=!0:t.bottom+n.top>(l.defaultView.innerHeight||l.documentElement.clientHeight)&&(i=!1),i!=null&&!A){var f=E("div","\u200B",null,`position: absolute;
                         top: `+(t.top-r.viewOffset-Ci(e.display))+`px;
                         height: `+(t.bottom-t.top+Rt(e)+r.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(f),f.scrollIntoView(i),e.display.lineSpace.removeChild(f)}}}function Mc(e,t,r,n){n==null&&(n=0);var i;!e.options.lineWrapping&&t==r&&(r=t.sticky=="before"?W(t.line,t.ch+1,"before"):t,t=t.ch?W(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var l=0;l<5;l++){var f=!1,d=Tt(e,t),h=!r||r==t?d:Tt(e,r);i={left:Math.min(d.left,h.left),top:Math.min(d.top,h.top)-n,right:Math.max(d.left,h.left),bottom:Math.max(d.bottom,h.bottom)+n};var v=eo(e,i),w=e.doc.scrollTop,S=e.doc.scrollLeft;if(v.scrollTop!=null&&(Ir(e,v.scrollTop),Math.abs(e.doc.scrollTop-w)>1&&(f=!0)),v.scrollLeft!=null&&(Mn(e,v.scrollLeft),Math.abs(e.doc.scrollLeft-S)>1&&(f=!0)),!f)break}return i}function Ac(e,t){var r=eo(e,t);r.scrollTop!=null&&Ir(e,r.scrollTop),r.scrollLeft!=null&&Mn(e,r.scrollLeft)}function eo(e,t){var r=e.display,n=Kn(e.display);t.top<0&&(t.top=0);var i=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:r.scroller.scrollTop,l=_a(e),f={};t.bottom-t.top>l&&(t.bottom=t.top+l);var d=e.doc.height+za(r),h=t.top<n,v=t.bottom>d-n;if(t.top<i)f.scrollTop=h?0:t.top;else if(t.bottom>i+l){var w=Math.min(t.top,(v?d:t.bottom)-l);w!=i&&(f.scrollTop=w)}var S=e.options.fixedGutter?0:r.gutters.offsetWidth,M=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:r.scroller.scrollLeft-S,L=En(e)-r.gutters.offsetWidth,I=t.right-t.left>L;return I&&(t.right=t.left+L),t.left<10?f.scrollLeft=0:t.left<M?f.scrollLeft=Math.max(0,t.left+S-(I?0:10)):t.right>L+M-3&&(f.scrollLeft=t.right+(I?0:10)-L),f}function to(e,t){t!=null&&(Ni(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Jn(e){Ni(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Or(e,t,r){(t!=null||r!=null)&&Ni(e),t!=null&&(e.curOp.scrollLeft=t),r!=null&&(e.curOp.scrollTop=r)}function Nc(e,t){Ni(e),e.curOp.scrollToPos=t}function Ni(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=as(e,t.from),n=as(e,t.to);hs(e,r,n,t.margin)}}function hs(e,t,r,n){var i=eo(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});Or(e,i.scrollLeft,i.scrollTop)}function Ir(e,t){Math.abs(e.doc.scrollTop-t)<2||(s||ro(e,{top:t}),ps(e,t,!0),s&&ro(e),Pr(e,100))}function ps(e,t,r){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Mn(e,t,r,n){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n)&&(e.doc.scrollLeft=t,xs(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Fr(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+za(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+Rt(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}var An=function(e,t,r){this.cm=r;var n=this.vert=E("div",[E("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=E("div",[E("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=i.tabIndex=-1,e(n),e(i),le(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),le(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&m<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};An.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var l=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+l)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(n==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},An.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},An.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},An.prototype.zeroWidthHack=function(){var e=G&&!b?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new gt,this.disableVert=new gt},An.prototype.enableZeroWidthBar=function(e,t,r){e.style.visibility="";function n(){var i=e.getBoundingClientRect(),l=r=="vert"?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);l!=e?e.style.visibility="hidden":t.set(1e3,n)}t.set(1e3,n)},An.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Hr=function(){};Hr.prototype.update=function(){return{bottom:0,right:0}},Hr.prototype.setScrollLeft=function(){},Hr.prototype.setScrollTop=function(){},Hr.prototype.clear=function(){};function Vn(e,t){t||(t=Fr(e));var r=e.display.barWidth,n=e.display.barHeight;gs(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&Mi(e),gs(e,Fr(e)),r=e.display.barWidth,n=e.display.barHeight}function gs(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}var vs={native:An,null:Hr};function ms(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&we(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new vs[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),le(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,r){r=="horizontal"?Mn(e,t):Ir(e,t)},e),e.display.scrollbars.addClass&&Te(e.display.wrapper,e.display.scrollbars.addClass)}var Oc=0;function Nn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Oc,markArrays:null},uc(e.curOp)}function On(e){var t=e.curOp;t&&cc(t,function(r){for(var n=0;n<r.ops.length;n++)r.ops[n].cm.curOp=null;Ic(r)})}function Ic(e){for(var t=e.ops,r=0;r<t.length;r++)Fc(t[r]);for(var n=0;n<t.length;n++)Hc(t[n]);for(var i=0;i<t.length;i++)Pc(t[i]);for(var l=0;l<t.length;l++)Bc(t[l]);for(var f=0;f<t.length;f++)Wc(t[f])}function Fc(e){var t=e.cm,r=t.display;zc(t),e.updateMaxLine&&Wa(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Oi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Hc(e){e.updatedDisplay=e.mustUpdate&&no(e.cm,e.update)}function Pc(e){var t=e.cm,r=t.display;e.updatedDisplay&&Mi(t),e.barMeasure=Fr(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Zl(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Rt(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-En(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function Bc(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Mn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==ye(y(t));e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Vn(t,e.barMeasure),e.updatedDisplay&&ao(t,e.barMeasure),e.selectionChanged&&Za(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&cs(e.cm)}function Wc(e){var t=e.cm,r=t.display,n=t.doc;if(e.updatedDisplay&&ys(t,e.update),r.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(r.wheelStartX=r.wheelStartY=null),e.scrollTop!=null&&ps(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&Mn(t,e.scrollLeft,!0,!0),e.scrollToPos){var i=Mc(t,de(n,e.scrollToPos.from),de(n,e.scrollToPos.to),e.scrollToPos.margin);Tc(t,i)}var l=e.maybeHiddenMarkers,f=e.maybeUnhiddenMarkers;if(l)for(var d=0;d<l.length;++d)l[d].lines.length||We(l[d],"hide");if(f)for(var h=0;h<f.length;++h)f[h].lines.length&&We(f[h],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&We(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function vt(e,t){if(e.curOp)return t();Nn(e);try{return t()}finally{On(e)}}function qe(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Nn(e);try{return t.apply(e,arguments)}finally{On(e)}}}function rt(e){return function(){if(this.curOp)return e.apply(this,arguments);Nn(this);try{return e.apply(this,arguments)}finally{On(this)}}}function Xe(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Nn(t);try{return e.apply(this,arguments)}finally{On(t)}}}function Pr(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,Le(Rc,e))}function Rc(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=Er(e,t.highlightFrontier),i=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),function(l){if(n.line>=e.display.viewFrom){var f=l.styles,d=l.text.length>e.options.maxHighlightLength?Sn(t.mode,n.state):null,h=El(e,l,n,!0);d&&(n.state=d),l.styles=h.styles;var v=l.styleClasses,w=h.classes;w?l.styleClasses=w:v&&(l.styleClasses=null);for(var S=!f||f.length!=l.styles.length||v!=w&&(!v||!w||v.bgClass!=w.bgClass||v.textClass!=w.textClass),M=0;!S&&M<f.length;++M)S=f[M]!=l.styles[M];S&&i.push(n.line),l.stateAfter=n.save(),n.nextLine()}else l.text.length<=e.options.maxHighlightLength&&Oa(e,l.text,n),l.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return Pr(e,e.options.workDelay),!0}),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),i.length&&vt(e,function(){for(var l=0;l<i.length;l++)cn(e,i[l],"text")})}}var Oi=function(e,t,r){var n=e.display;this.viewport=t,this.visible=Ai(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=En(e),this.force=r,this.dims=qa(e),this.events=[]};Oi.prototype.signal=function(e,t){Et(e,t)&&this.events.push(arguments)},Oi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)We.apply(null,this.events[e])};function zc(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Rt(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Rt(e)+"px",t.scrollbarsClipped=!0)}function _c(e){if(e.hasFocus())return null;var t=ye(y(e));if(!t||!J(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=ee(e).getSelection();n.anchorNode&&n.extend&&J(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}function jc(e){if(!(!e||!e.activeElt||e.activeElt==ye(e.activeElt.ownerDocument))&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&J(document.body,e.anchorNode)&&J(document.body,e.focusNode))){var t=e.activeElt.ownerDocument,r=t.defaultView.getSelection(),n=t.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),r.removeAllRanges(),r.addRange(n),r.extend(e.focusNode,e.focusOffset)}}function no(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return dn(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&us(e)==0)return!1;bs(e)&&(dn(e),t.dims=qa(e));var i=n.first+n.size,l=Math.max(t.visible.from-e.options.viewportMargin,n.first),f=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<l&&l-r.viewFrom<20&&(l=Math.max(n.first,r.viewFrom)),r.viewTo>f&&r.viewTo-f<20&&(f=Math.min(i,r.viewTo)),Vt&&(l=Pa(e.doc,l),f=Rl(e.doc,f));var d=l!=r.viewFrom||f!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;Lc(e,l,f),r.viewOffset=en(ne(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var h=us(e);if(!d&&h==0&&!t.force&&r.renderedView==r.view&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo))return!1;var v=_c(e);return h>4&&(r.lineDiv.style.display="none"),Gc(e,r.updateLineNumbers,t.dims),h>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,jc(v),j(r.cursorDiv),j(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,d&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,Pr(e,400)),r.updateLineNumbers=null,!0}function ys(e,t){for(var r=t.viewport,n=!0;;n=!1){if(!n||!e.options.lineWrapping||t.oldDisplayWidth==En(e)){if(r&&r.top!=null&&(r={top:Math.min(e.doc.height+za(e.display)-_a(e),r.top)}),t.visible=Ai(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else n&&(t.visible=Ai(e.display,e.doc,r));if(!no(e,t))break;Mi(e);var i=Fr(e);Nr(e),Vn(e,i),ao(e,i),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ro(e,t){var r=new Oi(e,t);if(no(e,r)){Mi(e),ys(e,r);var n=Fr(e);Nr(e),Vn(e,n),ao(e,n),r.finish()}}function Gc(e,t,r){var n=e.display,i=e.options.lineNumbers,l=n.lineDiv,f=l.firstChild;function d(I){var H=I.nextSibling;return x&&G&&e.display.currentWheelTarget==I?I.style.display="none":I.parentNode.removeChild(I),H}for(var h=n.view,v=n.viewFrom,w=0;w<h.length;w++){var S=h[w];if(!S.hidden)if(!S.node||S.node.parentNode!=l){var M=vc(e,S,v,r);l.insertBefore(M,f)}else{for(;f!=S.node;)f=d(f);var L=i&&t!=null&&t<=v&&S.lineNumber;S.changes&&(Me(S.changes,"gutter")>-1&&(L=!1),Ul(e,S,v,r)),L&&(j(S.lineNumber),S.lineNumber.appendChild(document.createTextNode(Ma(e.options,v)))),f=S.node.nextSibling}v+=S.size}for(;f;)f=d(f)}function io(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",Ye(e,"gutterChanged",e)}function ao(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Rt(e)+"px"}function xs(e){var t=e.display,r=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var n=Xa(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,l=n+"px",f=0;f<r.length;f++)if(!r[f].hidden){e.options.fixedGutter&&(r[f].gutter&&(r[f].gutter.style.left=l),r[f].gutterBackground&&(r[f].gutterBackground.style.left=l));var d=r[f].alignable;if(d)for(var h=0;h<d.length;h++)d[h].style.left=l}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function bs(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=Ma(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(E("div",[E("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),l=i.firstChild.offsetWidth,f=i.offsetWidth-l;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(l,n.lineGutter.offsetWidth-f)+1,n.lineNumWidth=n.lineNumInnerWidth+f,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",io(e.display),!0}return!1}function oo(e,t){for(var r=[],n=!1,i=0;i<e.length;i++){var l=e[i],f=null;if(typeof l!="string"&&(f=l.style,l=l.className),l=="CodeMirror-linenumbers")if(t)n=!0;else continue;r.push({className:l,style:f})}return t&&!n&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function ws(e){var t=e.gutters,r=e.gutterSpecs;j(t),e.lineGutter=null;for(var n=0;n<r.length;++n){var i=r[n],l=i.className,f=i.style,d=t.appendChild(E("div",null,"CodeMirror-gutter "+l));f&&(d.style.cssText=f),l=="CodeMirror-linenumbers"&&(e.lineGutter=d,d.style.width=(e.lineNumWidth||1)+"px")}t.style.display=r.length?"":"none",io(e)}function Br(e){ws(e.display),st(e),xs(e)}function Uc(e,t,r,n){var i=this;this.input=r,i.scrollbarFiller=E("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=E("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=R("div",null,"CodeMirror-code"),i.selectionDiv=E("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=E("div",null,"CodeMirror-cursors"),i.measure=E("div",null,"CodeMirror-measure"),i.lineMeasure=E("div",null,"CodeMirror-measure"),i.lineSpace=R("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var l=R("div",[i.lineSpace],"CodeMirror-lines");i.mover=E("div",[l],null,"position: relative"),i.sizer=E("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=E("div",null,null,"position: absolute; height: "+Ft+"px; width: 1px;"),i.gutters=E("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=E("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=E("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),D&&N>=105&&(i.wrapper.style.clipPath="inset(0px)"),i.wrapper.setAttribute("translate","no"),p&&m<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!x&&!(s&&_)&&(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=oo(n.gutters,n.lineNumbers),ws(i),r.init(i)}var Ii=0,nn=null;p?nn=-.53:s?nn=15:D?nn=-.7:T&&(nn=-1/3);function Ss(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),r==null&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:r==null&&(r=e.wheelDelta),{x:t,y:r}}function $c(e){var t=Ss(e);return t.x*=nn,t.y*=nn,t}function ks(e,t){D&&N==102&&(e.display.chromeScrollHack==null?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""},100));var r=Ss(t),n=r.x,i=r.y,l=nn;t.deltaMode===0&&(n=t.deltaX,i=t.deltaY,l=1);var f=e.display,d=f.scroller,h=d.scrollWidth>d.clientWidth,v=d.scrollHeight>d.clientHeight;if(n&&h||i&&v){if(i&&G&&x){e:for(var w=t.target,S=f.view;w!=d;w=w.parentNode)for(var M=0;M<S.length;M++)if(S[M].node==w){e.display.currentWheelTarget=w;break e}}if(n&&!s&&!O&&l!=null){i&&v&&Ir(e,Math.max(0,d.scrollTop+i*l)),Mn(e,Math.max(0,d.scrollLeft+n*l)),(!i||i&&v)&&lt(t),f.wheelStartX=null;return}if(i&&l!=null){var L=i*l,I=e.doc.scrollTop,H=I+f.wrapper.clientHeight;L<0?I=Math.max(0,I+L-50):H=Math.min(e.doc.height,H+L+50),ro(e,{top:I,bottom:H})}Ii<20&&t.deltaMode!==0&&(f.wheelStartX==null?(f.wheelStartX=d.scrollLeft,f.wheelStartY=d.scrollTop,f.wheelDX=n,f.wheelDY=i,setTimeout(function(){if(f.wheelStartX!=null){var z=d.scrollLeft-f.wheelStartX,Y=d.scrollTop-f.wheelStartY,Q=Y&&f.wheelDY&&Y/f.wheelDY||z&&f.wheelDX&&z/f.wheelDX;f.wheelStartX=f.wheelStartY=null,Q&&(nn=(nn*Ii+Q)/(Ii+1),++Ii)}},200)):(f.wheelDX+=n,f.wheelDY+=i))}}var bt=function(e,t){this.ranges=e,this.primIndex=t};bt.prototype.primary=function(){return this.ranges[this.primIndex]},bt.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(!Aa(r.anchor,n.anchor)||!Aa(r.head,n.head))return!1}return!0},bt.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new be(Na(this.ranges[t].anchor),Na(this.ranges[t].head));return new bt(e,this.primIndex)},bt.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},bt.prototype.contains=function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(ce(t,n.from())>=0&&ce(e,n.to())<=0)return r}return-1};var be=function(e,t){this.anchor=e,this.head=t};be.prototype.from=function(){return vi(this.anchor,this.head)},be.prototype.to=function(){return gi(this.anchor,this.head)},be.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Mt(e,t,r){var n=e&&e.options.selectionsMayTouch,i=t[r];t.sort(function(M,L){return ce(M.from(),L.from())}),r=Me(t,i);for(var l=1;l<t.length;l++){var f=t[l],d=t[l-1],h=ce(d.to(),f.from());if(n&&!f.empty()?h>0:h>=0){var v=vi(d.from(),f.from()),w=gi(d.to(),f.to()),S=d.empty()?f.from()==f.head:d.from()==d.head;l<=r&&--r,t.splice(--l,2,new be(S?w:v,S?v:w))}}return new bt(t,r)}function hn(e,t){return new bt([new be(e,t||e)],0)}function pn(e){return e.text?W(e.from.line+e.text.length-1,me(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function Cs(e,t){if(ce(e,t.from)<0)return e;if(ce(e,t.to)<=0)return pn(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=pn(t).ch-t.to.ch),W(r,n)}function lo(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new be(Cs(i.anchor,t),Cs(i.head,t)))}return Mt(e.cm,r,e.sel.primIndex)}function Es(e,t,r){return e.line==t.line?W(r.line,e.ch-t.ch+r.ch):W(r.line+(e.line-t.line),e.ch)}function Yc(e,t,r){for(var n=[],i=W(e.first,0),l=i,f=0;f<t.length;f++){var d=t[f],h=Es(d.from,i,l),v=Es(pn(d),i,l);if(i=d.to,l=v,r=="around"){var w=e.sel.ranges[f],S=ce(w.head,w.anchor)<0;n[f]=new be(S?v:h,S?h:v)}else n[f]=new be(h,h)}return new bt(n,e.sel.primIndex)}function so(e){e.doc.mode=La(e.options,e.doc.modeOption),Wr(e)}function Wr(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Pr(e,100),e.state.modeGen++,e.curOp&&st(e)}function Ls(e,t){return t.from.ch==0&&t.to.ch==0&&me(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function uo(e,t,r,n){function i(Q){return r?r[Q]:null}function l(Q,q,Z){ec(Q,q,Z,n),Ye(Q,"change",Q,t)}function f(Q,q){for(var Z=[],oe=Q;oe<q;++oe)Z.push(new Yn(v[oe],i(oe),n));return Z}var d=t.from,h=t.to,v=t.text,w=ne(e,d.line),S=ne(e,h.line),M=me(v),L=i(v.length-1),I=h.line-d.line;if(t.full)e.insert(0,f(0,v.length)),e.remove(v.length,e.size-v.length);else if(Ls(e,t)){var H=f(0,v.length-1);l(S,S.text,L),I&&e.remove(d.line,I),H.length&&e.insert(d.line,H)}else if(w==S)if(v.length==1)l(w,w.text.slice(0,d.ch)+M+w.text.slice(h.ch),L);else{var z=f(1,v.length-1);z.push(new Yn(M+w.text.slice(h.ch),L,n)),l(w,w.text.slice(0,d.ch)+v[0],i(0)),e.insert(d.line+1,z)}else if(v.length==1)l(w,w.text.slice(0,d.ch)+v[0]+S.text.slice(h.ch),i(0)),e.remove(d.line+1,I);else{l(w,w.text.slice(0,d.ch)+v[0],i(0)),l(S,M+S.text.slice(h.ch),L);var Y=f(1,v.length-1);I>1&&e.remove(d.line+1,I-1),e.insert(d.line+1,Y)}Ye(e,"change",e,t)}function gn(e,t,r){function n(i,l,f){if(i.linked)for(var d=0;d<i.linked.length;++d){var h=i.linked[d];if(h.doc!=l){var v=f&&h.sharedHist;r&&!v||(t(h.doc,v),n(h.doc,i,v))}}}n(e,null,!0)}function Ds(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Ka(e),so(e),Ts(e),e.options.direction=t.direction,e.options.lineWrapping||Wa(e),e.options.mode=t.modeOption,st(e)}function Ts(e){(e.doc.direction=="rtl"?Te:we)(e.display.lineDiv,"CodeMirror-rtl")}function qc(e){vt(e,function(){Ts(e),st(e)})}function Fi(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function fo(e,t){var r={from:Na(t.from),to:pn(t),text:kn(e,t.from,t.to)};return Ns(e,r,t.from.line,t.to.line+1),gn(e,function(n){return Ns(n,r,t.from.line,t.to.line+1)},!0),r}function Ms(e){for(;e.length;){var t=me(e);if(t.ranges)e.pop();else break}}function Xc(e,t){if(t)return Ms(e.done),me(e.done);if(e.done.length&&!me(e.done).ranges)return me(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),me(e.done)}function As(e,t,r,n){var i=e.history;i.undone.length=0;var l=+new Date,f,d;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&i.lastModTime>l-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(f=Xc(i,i.lastOp==n)))d=me(f.changes),ce(t.from,t.to)==0&&ce(t.from,d.to)==0?d.to=pn(t):f.changes.push(fo(e,t));else{var h=me(i.done);for((!h||!h.ranges)&&Hi(e.sel,i.done),f={changes:[fo(e,t)],generation:i.generation},i.done.push(f);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=l,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,d||We(e,"historyAdded")}function Kc(e,t,r,n){var i=t.charAt(0);return i=="*"||i=="+"&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Qc(e,t,r,n){var i=e.history,l=n&&n.origin;r==i.lastSelOp||l&&i.lastSelOrigin==l&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==l||Kc(e,l,me(i.done),t))?i.done[i.done.length-1]=t:Hi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=l,i.lastSelOp=r,n&&n.clearRedo!==!1&&Ms(i.undone)}function Hi(e,t){var r=me(t);r&&r.ranges&&r.equals(e)||t.push(e)}function Ns(e,t,r,n){var i=t["spans_"+e.id],l=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(f){f.markedSpans&&((i||(i=t["spans_"+e.id]={}))[l]=f.markedSpans),++l})}function Zc(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Jc(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=[],i=0;i<t.text.length;++i)n.push(Zc(r[i]));return n}function Os(e,t){var r=Jc(e,t),n=Fa(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var l=r[i],f=n[i];if(l&&f)e:for(var d=0;d<f.length;++d){for(var h=f[d],v=0;v<l.length;++v)if(l[v].marker==h.marker)continue e;l.push(h)}else f&&(r[i]=f)}return r}function er(e,t,r){for(var n=[],i=0;i<e.length;++i){var l=e[i];if(l.ranges){n.push(r?bt.prototype.deepCopy.call(l):l);continue}var f=l.changes,d=[];n.push({changes:d});for(var h=0;h<f.length;++h){var v=f[h],w=void 0;if(d.push({from:v.from,to:v.to,text:v.text}),t)for(var S in v)(w=S.match(/^spans_(\d+)$/))&&Me(t,Number(w[1]))>-1&&(me(d)[S]=v[S],delete v[S])}}return n}function co(e,t,r,n){if(n){var i=e.anchor;if(r){var l=ce(t,i)<0;l!=ce(r,i)<0?(i=t,t=r):l!=ce(t,r)<0&&(t=r)}return new be(i,t)}else return new be(r||t,t)}function Pi(e,t,r,n,i){i==null&&(i=e.cm&&(e.cm.display.shift||e.extend)),et(e,new bt([co(e.sel.primary(),t,r,i)],0),n)}function Is(e,t,r){for(var n=[],i=e.cm&&(e.cm.display.shift||e.extend),l=0;l<e.sel.ranges.length;l++)n[l]=co(e.sel.ranges[l],t[l],null,i);var f=Mt(e.cm,n,e.sel.primIndex);et(e,f,r)}function ho(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,et(e,Mt(e.cm,i,e.sel.primIndex),n)}function Fs(e,t,r,n){et(e,hn(t,r),n)}function Vc(e,t,r){var n={ranges:t.ranges,update:function(i){this.ranges=[];for(var l=0;l<i.length;l++)this.ranges[l]=new be(de(e,i[l].anchor),de(e,i[l].head))},origin:r&&r.origin};return We(e,"beforeSelectionChange",e,n),e.cm&&We(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?Mt(e.cm,n.ranges,n.ranges.length-1):t}function Hs(e,t,r){var n=e.history.done,i=me(n);i&&i.ranges?(n[n.length-1]=t,Bi(e,t,r)):et(e,t,r)}function et(e,t,r){Bi(e,t,r),Qc(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Bi(e,t,r){(Et(e,"beforeSelectionChange")||e.cm&&Et(e.cm,"beforeSelectionChange"))&&(t=Vc(e,t,r));var n=r&&r.bias||(ce(t.primary().head,e.sel.primary().head)<0?-1:1);Ps(e,Ws(e,t,n,!0)),!(r&&r.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Jn(e.cm)}function Ps(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,xl(e.cm)),Ye(e,"cursorActivity",e))}function Bs(e){Ps(e,Ws(e,e.sel,null,!1))}function Ws(e,t,r,n){for(var i,l=0;l<t.ranges.length;l++){var f=t.ranges[l],d=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[l],h=Wi(e,f.anchor,d&&d.anchor,r,n),v=f.head==f.anchor?h:Wi(e,f.head,d&&d.head,r,n);(i||h!=f.anchor||v!=f.head)&&(i||(i=t.ranges.slice(0,l)),i[l]=new be(h,v))}return i?Mt(e.cm,i,t.primIndex):t}function tr(e,t,r,n,i){var l=ne(e,t.line);if(l.markedSpans)for(var f=0;f<l.markedSpans.length;++f){var d=l.markedSpans[f],h=d.marker,v="selectLeft"in h?!h.selectLeft:h.inclusiveLeft,w="selectRight"in h?!h.selectRight:h.inclusiveRight;if((d.from==null||(v?d.from<=t.ch:d.from<t.ch))&&(d.to==null||(w?d.to>=t.ch:d.to>t.ch))){if(i&&(We(h,"beforeCursorEnter"),h.explicitlyCleared))if(l.markedSpans){--f;continue}else break;if(!h.atomic)continue;if(r){var S=h.find(n<0?1:-1),M=void 0;if((n<0?w:v)&&(S=Rs(e,S,-n,S&&S.line==t.line?l:null)),S&&S.line==t.line&&(M=ce(S,r))&&(n<0?M<0:M>0))return tr(e,S,t,n,i)}var L=h.find(n<0?-1:1);return(n<0?v:w)&&(L=Rs(e,L,n,L.line==t.line?l:null)),L?tr(e,L,t,n,i):null}}return t}function Wi(e,t,r,n,i){var l=n||1,f=tr(e,t,r,l,i)||!i&&tr(e,t,r,l,!0)||tr(e,t,r,-l,i)||!i&&tr(e,t,r,-l,!0);return f||(e.cantEdit=!0,W(e.first,0))}function Rs(e,t,r,n){return r<0&&t.ch==0?t.line>e.first?de(e,W(t.line-1)):null:r>0&&t.ch==(n||ne(e,t.line)).text.length?t.line<e.first+e.size-1?W(t.line+1,0):null:new W(t.line,t.ch+r)}function zs(e){e.setSelection(W(e.firstLine(),0),W(e.lastLine()),Se)}function _s(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(i,l,f,d){i&&(n.from=de(e,i)),l&&(n.to=de(e,l)),f&&(n.text=f),d!==void 0&&(n.origin=d)}),We(e,"beforeChange",e,n),e.cm&&We(e.cm,"beforeChange",e.cm,n),n.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function nr(e,t,r){if(e.cm){if(!e.cm.curOp)return qe(e.cm,nr)(e,t,r);if(e.cm.state.suppressEdits)return}if(!((Et(e,"beforeChange")||e.cm&&Et(e.cm,"beforeChange"))&&(t=_s(e,t,!0),!t))){var n=Ol&&!r&&Qf(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)js(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text,origin:t.origin});else js(e,t)}}function js(e,t){if(!(t.text.length==1&&t.text[0]==""&&ce(t.from,t.to)==0)){var r=lo(e,t);As(e,t,r,e.cm?e.cm.curOp.id:NaN),Rr(e,t,r,Fa(e,t));var n=[];gn(e,function(i,l){!l&&Me(n,i.history)==-1&&(Ys(i.history,t),n.push(i.history)),Rr(i,t,null,Fa(i,t))})}}function Ri(e,t,r){var n=e.cm&&e.cm.state.suppressEdits;if(!(n&&!r)){for(var i=e.history,l,f=e.sel,d=t=="undo"?i.done:i.undone,h=t=="undo"?i.undone:i.done,v=0;v<d.length&&(l=d[v],!(r?l.ranges&&!l.equals(e.sel):!l.ranges));v++);if(v!=d.length){for(i.lastOrigin=i.lastSelOrigin=null;;)if(l=d.pop(),l.ranges){if(Hi(l,h),r&&!l.equals(e.sel)){et(e,l,{clearRedo:!1});return}f=l}else if(n){d.push(l);return}else break;var w=[];Hi(f,h),h.push({changes:w,generation:i.generation}),i.generation=l.generation||++i.maxGeneration;for(var S=Et(e,"beforeChange")||e.cm&&Et(e.cm,"beforeChange"),M=function(H){var z=l.changes[H];if(z.origin=t,S&&!_s(e,z,!1))return d.length=0,{};w.push(fo(e,z));var Y=H?lo(e,z):me(d);Rr(e,z,Y,Os(e,z)),!H&&e.cm&&e.cm.scrollIntoView({from:z.from,to:pn(z)});var Q=[];gn(e,function(q,Z){!Z&&Me(Q,q.history)==-1&&(Ys(q.history,z),Q.push(q.history)),Rr(q,z,null,Os(q,z))})},L=l.changes.length-1;L>=0;--L){var I=M(L);if(I)return I.v}}}}function Gs(e,t){if(t!=0&&(e.first+=t,e.sel=new bt(Kt(e.sel.ranges,function(i){return new be(W(i.anchor.line+t,i.anchor.ch),W(i.head.line+t,i.head.ch))}),e.sel.primIndex),e.cm)){st(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)cn(e.cm,n,"gutter")}}function Rr(e,t,r,n){if(e.cm&&!e.cm.curOp)return qe(e.cm,Rr)(e,t,r,n);if(t.to.line<e.first){Gs(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Gs(e,i),t={from:W(e.first,0),to:W(t.to.line+i,t.to.ch),text:[me(t.text)],origin:t.origin}}var l=e.lastLine();t.to.line>l&&(t={from:t.from,to:W(l,ne(e,l).text.length),text:[t.text[0]],origin:t.origin}),t.removed=kn(e,t.from,t.to),r||(r=lo(e,t)),e.cm?ed(e.cm,t,n):uo(e,t,n),Bi(e,r,Se),e.cantEdit&&Wi(e,W(e.firstLine(),0))&&(e.cantEdit=!1)}}function ed(e,t,r){var n=e.doc,i=e.display,l=t.from,f=t.to,d=!1,h=l.line;e.options.lineWrapping||(h=Ce(Dt(ne(n,l.line))),n.iter(h,f.line+1,function(L){if(L==i.maxLine)return d=!0,!0})),n.sel.contains(t.from,t.to)>-1&&xl(e),uo(n,t,r,ss(e)),e.options.lineWrapping||(n.iter(h,l.line+t.text.length,function(L){var I=Si(L);I>i.maxLineLength&&(i.maxLine=L,i.maxLineLength=I,i.maxLineChanged=!0,d=!1)}),d&&(e.curOp.updateMaxLine=!0)),Gf(n,l.line),Pr(e,400);var v=t.text.length-(f.line-l.line)-1;t.full?st(e):l.line==f.line&&t.text.length==1&&!Ls(e.doc,t)?cn(e,l.line,"text"):st(e,l.line,f.line+1,v);var w=Et(e,"changes"),S=Et(e,"change");if(S||w){var M={from:l,to:f,text:t.text,removed:t.removed,origin:t.origin};S&&Ye(e,"change",e,M),w&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(M)}e.display.selForContextMenu=null}function rr(e,t,r,n,i){var l;n||(n=r),ce(n,r)<0&&(l=[n,r],r=l[0],n=l[1]),typeof t=="string"&&(t=e.splitLines(t)),nr(e,{from:r,to:n,text:t,origin:i})}function Us(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function $s(e,t,r,n){for(var i=0;i<e.length;++i){var l=e[i],f=!0;if(l.ranges){l.copied||(l=e[i]=l.deepCopy(),l.copied=!0);for(var d=0;d<l.ranges.length;d++)Us(l.ranges[d].anchor,t,r,n),Us(l.ranges[d].head,t,r,n);continue}for(var h=0;h<l.changes.length;++h){var v=l.changes[h];if(r<v.from.line)v.from=W(v.from.line+n,v.from.ch),v.to=W(v.to.line+n,v.to.ch);else if(t<=v.to.line){f=!1;break}}f||(e.splice(0,i+1),i=0)}}function Ys(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;$s(e.done,r,n,i),$s(e.undone,r,n,i)}function zr(e,t,r,n){var i=t,l=t;return typeof t=="number"?l=ne(e,kl(e,t)):i=Ce(t),i==null?null:(n(l,i)&&e.cm&&cn(e.cm,i,r),l)}function _r(e){this.lines=e,this.parent=null;for(var t=0,r=0;r<e.length;++r)e[r].parent=this,t+=e[r].height;this.height=t}_r.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var i=this.lines[r];this.height-=i.height,tc(i),Ye(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}};function jr(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}jr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(e<i){var l=Math.min(t,i-e),f=n.height;if(n.removeInner(e,l),this.height-=f-n.height,i==l&&(this.children.splice(r--,1),n.parent=null),(t-=l)==0)break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof _r))){var d=[];this.collapse(d),this.children=[new _r(d)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],l=i.chunkSize();if(e<=l){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(var f=i.lines.length%25+25,d=f;d<i.lines.length;){var h=new _r(i.lines.slice(d,d+=25));i.height-=h.height,this.children.splice(++n,0,h),h.parent=this}i.lines=i.lines.slice(0,f),this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new jr(t);if(e.parent){e.size-=r.size,e.height-=r.height;var i=Me(e.parent.children,e);e.parent.children.splice(i+1,0,r)}else{var n=new jr(e.children);n.parent=e,e.children=[n,r],e=n}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],l=i.chunkSize();if(e<l){var f=Math.min(t,l-e);if(i.iterN(e,f,r))return!0;if((t-=f)==0)break;e=0}else e-=l}}};var Gr=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};Gr.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=Ce(r);if(!(n==null||!t)){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var l=Mr(this);Bt(r,Math.max(0,r.height-l)),e&&(vt(e,function(){qs(e,r,-l),cn(e,n,"widget")}),Ye(e,"lineWidgetCleared",e,this,n))}},Gr.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=Mr(this)-t;i&&(fn(this.doc,n)||Bt(n,n.height+i),r&&vt(r,function(){r.curOp.forceUpdate=!0,qs(r,n,i),Ye(r,"lineWidgetChanged",r,e,Ce(n))}))},Gn(Gr);function qs(e,t,r){en(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&to(e,r)}function td(e,t,r,n){var i=new Gr(e,r,n),l=e.cm;return l&&i.noHScroll&&(l.display.alignWidgets=!0),zr(e,t,"widget",function(f){var d=f.widgets||(f.widgets=[]);if(i.insertAt==null?d.push(i):d.splice(Math.min(d.length,Math.max(0,i.insertAt)),0,i),i.line=f,l&&!fn(e,f)){var h=en(f)<e.scrollTop;Bt(f,f.height+Mr(i)),h&&to(l,i.height),l.curOp.forceUpdate=!0}return!0}),l&&Ye(l,"lineWidgetAdded",l,i,typeof t=="number"?t:Ce(t)),i}var Xs=0,vn=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Xs};vn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Nn(e),Et(this,"clear")){var r=this.find();r&&Ye(this,"clear",r.from,r.to)}for(var n=null,i=null,l=0;l<this.lines.length;++l){var f=this.lines[l],d=Lr(f.markedSpans,this);e&&!this.collapsed?cn(e,Ce(f),"text"):e&&(d.to!=null&&(i=Ce(f)),d.from!=null&&(n=Ce(f))),f.markedSpans=Yf(f.markedSpans,d),d.from==null&&this.collapsed&&!fn(this.doc,f)&&e&&Bt(f,Kn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var h=0;h<this.lines.length;++h){var v=Dt(this.lines[h]),w=Si(v);w>e.display.maxLineLength&&(e.display.maxLine=v,e.display.maxLineLength=w,e.display.maxLineChanged=!0)}n!=null&&e&&this.collapsed&&st(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Bs(e.doc)),e&&Ye(e,"markerCleared",e,this,n,i),t&&On(e),this.parent&&this.parent.clear()}},vn.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var r,n,i=0;i<this.lines.length;++i){var l=this.lines[i],f=Lr(l.markedSpans,this);if(f.from!=null&&(r=W(t?l:Ce(l),f.from),e==-1))return r;if(f.to!=null&&(n=W(t?l:Ce(l),f.to),e==1))return n}return r&&{from:r,to:n}},vn.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,n=this.doc.cm;!t||!n||vt(n,function(){var i=t.line,l=Ce(t.line),f=ja(n,l);if(f&&(es(f),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!fn(r.doc,i)&&r.height!=null){var d=r.height;r.height=null;var h=Mr(r)-d;h&&Bt(i,i.height+h)}Ye(n,"markerChanged",n,e)})},vn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||Me(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},vn.prototype.detachLine=function(e){if(this.lines.splice(Me(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Gn(vn);function ir(e,t,r,n,i){if(n&&n.shared)return nd(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return qe(e.cm,ir)(e,t,r,n,i);var l=new vn(e,i),f=ce(t,r);if(n&&he(n,l,!1),f>0||f==0&&l.clearWhenEmpty!==!1)return l;if(l.replacedWith&&(l.collapsed=!0,l.widgetNode=R("span",[l.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||l.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(l.widgetNode.insertLeft=!0)),l.collapsed){if(Wl(e,t.line,t,r,l)||t.line!=r.line&&Wl(e,r.line,t,r,l))throw new Error("Inserting collapsed marker partially overlapping an existing one");$f()}l.addToHistory&&As(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var d=t.line,h=e.cm,v;if(e.iter(d,r.line+1,function(S){h&&l.collapsed&&!h.options.lineWrapping&&Dt(S)==h.display.maxLine&&(v=!0),l.collapsed&&d!=t.line&&Bt(S,0),qf(S,new yi(l,d==t.line?t.ch:null,d==r.line?r.ch:null),e.cm&&e.cm.curOp),++d}),l.collapsed&&e.iter(t.line,r.line+1,function(S){fn(e,S)&&Bt(S,0)}),l.clearOnEnter&&le(l,"beforeCursorEnter",function(){return l.clear()}),l.readOnly&&(Uf(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),l.collapsed&&(l.id=++Xs,l.atomic=!0),h){if(v&&(h.curOp.updateMaxLine=!0),l.collapsed)st(h,t.line,r.line+1);else if(l.className||l.startStyle||l.endStyle||l.css||l.attributes||l.title)for(var w=t.line;w<=r.line;w++)cn(h,w,"text");l.atomic&&Bs(h.doc),Ye(h,"markerAdded",h,l)}return l}var Ur=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};Ur.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ye(this,"clear")}},Ur.prototype.find=function(e,t){return this.primary.find(e,t)},Gn(Ur);function nd(e,t,r,n,i){n=he(n),n.shared=!1;var l=[ir(e,t,r,n,i)],f=l[0],d=n.widgetNode;return gn(e,function(h){d&&(n.widgetNode=d.cloneNode(!0)),l.push(ir(h,de(h,t),de(h,r),n,i));for(var v=0;v<h.linked.length;++v)if(h.linked[v].isParent)return;f=me(l)}),new Ur(l,f)}function Ks(e){return e.findMarks(W(e.first,0),e.clipPos(W(e.lastLine())),function(t){return t.parent})}function rd(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),l=e.clipPos(i.from),f=e.clipPos(i.to);if(ce(l,f)){var d=ir(e,l,f,n.primary,n.primary.type);n.markers.push(d),d.parent=n}}}function id(e){for(var t=function(n){var i=e[n],l=[i.primary.doc];gn(i.primary.doc,function(h){return l.push(h)});for(var f=0;f<i.markers.length;f++){var d=i.markers[f];Me(l,d.doc)==-1&&(d.parent=null,i.markers.splice(f--,1))}},r=0;r<e.length;r++)t(r)}var ad=0,ut=function(e,t,r,n,i){if(!(this instanceof ut))return new ut(e,t,r,n,i);r==null&&(r=0),jr.call(this,[new _r([new Yn("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var l=W(r,0);this.sel=hn(l),this.history=new Fi(null),this.id=++ad,this.modeOption=t,this.lineSep=n,this.direction=i=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),uo(this,{from:l,to:l,text:e}),et(this,hn(l),Se)};ut.prototype=Zt(jr.prototype,{constructor:ut,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ta(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Xe(function(e){var t=W(this.first,0),r=this.first+this.size-1;nr(this,{from:t,to:W(r,ne(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Or(this.cm,0,0),et(this,hn(t),Se)}),replaceRange:function(e,t,r,n){t=de(this,t),r=r?de(this,r):t,rr(this,e,t,r,n)},getRange:function(e,t,r){var n=kn(this,de(this,e),de(this,t));return r===!1?n:r===""?n.join(""):n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Cr(this,e))return ne(this,e)},getLineNumber:function(e){return Ce(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=ne(this,e)),Dt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return de(this,e)},getCursor:function(e){var t=this.sel.primary(),r;return e==null||e=="head"?r=t.head:e=="anchor"?r=t.anchor:e=="end"||e=="to"||e===!1?r=t.to():r=t.from(),r},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Xe(function(e,t,r){Fs(this,de(this,typeof e=="number"?W(e,t||0):e),null,r)}),setSelection:Xe(function(e,t,r){Fs(this,de(this,e),de(this,t||e),r)}),extendSelection:Xe(function(e,t,r){Pi(this,de(this,e),t&&de(this,t),r)}),extendSelections:Xe(function(e,t){Is(this,Cl(this,e),t)}),extendSelectionsBy:Xe(function(e,t){var r=Kt(this.sel.ranges,e);Is(this,Cl(this,r),t)}),setSelections:Xe(function(e,t,r){if(e.length){for(var n=[],i=0;i<e.length;i++)n[i]=new be(de(this,e[i].anchor),de(this,e[i].head||e[i].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),et(this,Mt(this.cm,n,t),r)}}),addSelection:Xe(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new be(de(this,e),de(this,t||e))),et(this,Mt(this.cm,n,n.length-1),r)}),getSelection:function(e){for(var t=this.sel.ranges,r,n=0;n<t.length;n++){var i=kn(this,t[n].from(),t[n].to());r=r?r.concat(i):i}return e===!1?r:r.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=kn(this,r[n].from(),r[n].to());e!==!1&&(i=i.join(e||this.lineSeparator())),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:Xe(function(e,t,r){for(var n=[],i=this.sel,l=0;l<i.ranges.length;l++){var f=i.ranges[l];n[l]={from:f.from(),to:f.to(),text:this.splitLines(e[l]),origin:r}}for(var d=t&&t!="end"&&Yc(this,n,t),h=n.length-1;h>=0;h--)nr(this,n[h]);d?Hs(this,d):this.cm&&Jn(this.cm)}),undo:Xe(function(){Ri(this,"undo")}),redo:Xe(function(){Ri(this,"redo")}),undoSelection:Xe(function(){Ri(this,"undo",!0)}),redoSelection:Xe(function(){Ri(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){var e=this;this.history=new Fi(this.history),gn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:er(this.history.done),undone:er(this.history.undone)}},setHistory:function(e){var t=this.history=new Fi(this.history);t.done=er(e.done.slice(0),null,!0),t.undone=er(e.undone.slice(0),null,!0)},setGutterMarker:Xe(function(e,t,r){return zr(this,e,"gutter",function(n){var i=n.gutterMarkers||(n.gutterMarkers={});return i[t]=r,!r&&vl(i)&&(n.gutterMarkers=null),!0})}),clearGutter:Xe(function(e){var t=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&zr(t,r,"gutter",function(){return r.gutterMarkers[e]=null,vl(r.gutterMarkers)&&(r.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!Cr(this,e)||(t=e,e=ne(this,e),!e))return null}else if(t=Ce(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Xe(function(e,t,r){return zr(this,e,t=="gutter"?"gutter":"class",function(n){var i=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!n[i])n[i]=r;else{if(K(r).test(n[i]))return!1;n[i]+=" "+r}return!0})}),removeLineClass:Xe(function(e,t,r){return zr(this,e,t=="gutter"?"gutter":"class",function(n){var i=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",l=n[i];if(l)if(r==null)n[i]=null;else{var f=l.match(K(r));if(!f)return!1;var d=f.index+f[0].length;n[i]=l.slice(0,f.index)+(!f.index||d==l.length?"":" ")+l.slice(d)||null}else return!1;return!0})}),addLineWidget:Xe(function(e,t,r){return td(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return ir(this,de(this,e),de(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=de(this,e),ir(this,e,e,r,"bookmark")},findMarksAt:function(e){e=de(this,e);var t=[],r=ne(this,e.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=de(this,e),t=de(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(l){var f=l.markedSpans;if(f)for(var d=0;d<f.length;d++){var h=f[d];!(h.to!=null&&i==e.line&&e.ch>=h.to||h.from==null&&i!=e.line||h.from!=null&&i==t.line&&h.from>=t.ch)&&(!r||r(h.marker))&&n.push(h.marker.parent||h.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)r[n].from!=null&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter(function(i){var l=i.text.length+n;if(l>e)return t=e,!0;e-=l,++r}),de(this,W(r,t))},indexFromPos:function(e){e=de(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(n){t+=n.text.length+r}),t},copy:function(e){var t=new ut(Ta(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<r&&(r=e.to);var n=new ut(Ta(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],rd(n,Ks(this)),n},unlinkDoc:function(e){if(e instanceof Ae&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var r=this.linked[t];if(r.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),id(Ks(this));break}}if(e.history==this.history){var n=[e.id];gn(e,function(i){return n.push(i.id)},!0),e.history=new Fi(null),e.history.done=er(this.history.done,n),e.history.undone=er(this.history.undone,n)}},iterLinkedDocs:function(e){gn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):ka(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Xe(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&qc(this.cm))})}),ut.prototype.eachLine=ut.prototype.iter;var Qs=0;function od(e){var t=this;if(Zs(t),!($e(t,e)||tn(t.display,e))){lt(e),p&&(Qs=+new Date);var r=Dn(t,e,!0),n=e.dataTransfer.files;if(!(!r||t.isReadOnly()))if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,l=Array(i),f=0,d=function(){++f==i&&qe(t,function(){r=de(t.doc,r);var L={from:r,to:r,text:t.doc.splitLines(l.filter(function(I){return I!=null}).join(t.doc.lineSeparator())),origin:"paste"};nr(t.doc,L),Hs(t.doc,hn(de(t.doc,r),de(t.doc,pn(L))))})()},h=function(L,I){if(t.options.allowDropFileTypes&&Me(t.options.allowDropFileTypes,L.type)==-1){d();return}var H=new FileReader;H.onerror=function(){return d()},H.onload=function(){var z=H.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(z)){d();return}l[I]=z,d()},H.readAsText(L)},v=0;v<n.length;v++)h(n[v],v);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var w=e.dataTransfer.getData("Text");if(w){var S;if(t.state.draggingText&&!t.state.draggingText.copy&&(S=t.listSelections()),Bi(t.doc,hn(r,r)),S)for(var M=0;M<S.length;++M)rr(t.doc,"",S[M].anchor,S[M].head,"drag");t.replaceSelection(w,"around","paste"),t.display.input.focus()}}catch(L){}}}}function ld(e,t){if(p&&(!e.state.draggingText||+new Date-Qs<100)){kr(t);return}if(!($e(e,t)||tn(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!T)){var r=E("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",O&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),O&&r.parentNode.removeChild(r)}}function sd(e,t){var r=Dn(e,t);if(r){var n=document.createDocumentFragment();Qa(e,r,n),e.display.dragCursor||(e.display.dragCursor=E("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),U(e.display.dragCursor,n)}}function Zs(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Js(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),r=[],n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&r.push(i)}r.length&&r[0].operation(function(){for(var l=0;l<r.length;l++)e(r[l])})}}var Vs=!1;function ud(){Vs||(fd(),Vs=!0)}function fd(){var e;le(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,Js(cd)},100))}),le(window,"blur",function(){return Js(Zn)})}function cd(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var mn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},$r=0;$r<10;$r++)mn[$r+48]=mn[$r+96]=String($r);for(var zi=65;zi<=90;zi++)mn[zi]=String.fromCharCode(zi);for(var Yr=1;Yr<=12;Yr++)mn[Yr+111]=mn[Yr+63235]="F"+Yr;var rn={};rn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},rn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},rn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},rn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},rn.default=G?rn.macDefault:rn.pcDefault;function dd(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var r,n,i,l,f=0;f<t.length-1;f++){var d=t[f];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))n=!0;else if(/^s(hift)?$/i.test(d))i=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(e="Alt-"+e),n&&(e="Ctrl-"+e),l&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function hd(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if(n=="..."){delete e[r];continue}for(var i=Kt(r.split(" "),dd),l=0;l<i.length;l++){var f=void 0,d=void 0;l==i.length-1?(d=i.join(" "),f=n):(d=i.slice(0,l+1).join(" "),f="...");var h=t[d];if(!h)t[d]=f;else if(h!=f)throw new Error("Inconsistent bindings for "+d)}delete e[r]}for(var v in t)e[v]=t[v];return e}function ar(e,t,r,n){t=_i(t);var i=t.call?t.call(e,n):t[e];if(i===!1)return"nothing";if(i==="...")return"multi";if(i!=null&&r(i))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return ar(e,t.fallthrough,r,n);for(var l=0;l<t.fallthrough.length;l++){var f=ar(e,t.fallthrough[l],r,n);if(f)return f}}}function eu(e){var t=typeof e=="string"?e:mn[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function tu(e,t,r){var n=e;return t.altKey&&n!="Alt"&&(e="Alt-"+e),(te?t.metaKey:t.ctrlKey)&&n!="Ctrl"&&(e="Ctrl-"+e),(te?t.ctrlKey:t.metaKey)&&n!="Mod"&&(e="Cmd-"+e),!r&&t.shiftKey&&n!="Shift"&&(e="Shift-"+e),e}function nu(e,t){if(O&&e.keyCode==34&&e.char)return!1;var r=mn[e.keyCode];return r==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(r=e.code),tu(r,e,t))}function _i(e){return typeof e=="string"?rn[e]:e}function or(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var l=t(r[i]);n.length&&ce(l.from,me(n).to)<=0;){var f=n.pop();if(ce(f.from,l.from)<0){l.from=f.from;break}}n.push(l)}vt(e,function(){for(var d=n.length-1;d>=0;d--)rr(e.doc,"",n[d].from,n[d].to,"+delete");Jn(e)})}function po(e,t,r){var n=ml(e.text,t+r,r);return n<0||n>e.text.length?null:n}function go(e,t,r){var n=po(e,t.ch,r);return n==null?null:new W(t.line,n,r<0?"after":"before")}function vo(e,t,r,n,i){if(e){t.doc.direction=="rtl"&&(i=-i);var l=Jt(r,t.doc.direction);if(l){var f=i<0?me(l):l[0],d=i<0==(f.level==1),h=d?"after":"before",v;if(f.level>0||t.doc.direction=="rtl"){var w=Xn(t,r);v=i<0?r.text.length-1:0;var S=zt(t,w,v).top;v=br(function(M){return zt(t,w,M).top==S},i<0==(f.level==1)?f.from:f.to-1,v),h=="before"&&(v=po(r,v,1))}else v=i<0?f.to:f.from;return new W(n,v,h)}}return new W(n,i<0?r.text.length:0,i<0?"before":"after")}function pd(e,t,r,n){var i=Jt(t,e.doc.direction);if(!i)return go(t,r,n);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var l=Sr(i,r.ch,r.sticky),f=i[l];if(e.doc.direction=="ltr"&&f.level%2==0&&(n>0?f.to>r.ch:f.from<r.ch))return go(t,r,n);var d=function(Y,Q){return po(t,Y instanceof W?Y.ch:Y,Q)},h,v=function(Y){return e.options.lineWrapping?(h=h||Xn(e,t),ls(e,t,h,Y)):{begin:0,end:t.text.length}},w=v(r.sticky=="before"?d(r,-1):r.ch);if(e.doc.direction=="rtl"||f.level==1){var S=f.level==1==n<0,M=d(r,S?1:-1);if(M!=null&&(S?M<=f.to&&M<=w.end:M>=f.from&&M>=w.begin)){var L=S?"before":"after";return new W(r.line,M,L)}}var I=function(Y,Q,q){for(var Z=function(De,Ke){return Ke?new W(r.line,d(De,1),"before"):new W(r.line,De,"after")};Y>=0&&Y<i.length;Y+=Q){var oe=i[Y],re=Q>0==(oe.level!=1),pe=re?q.begin:d(q.end,-1);if(oe.from<=pe&&pe<oe.to||(pe=re?oe.from:d(oe.to,-1),q.begin<=pe&&pe<q.end))return Z(pe,re)}},H=I(l+n,n,w);if(H)return H;var z=n>0?w.end:d(w.begin,-1);return z!=null&&!(n>0&&z==t.text.length)&&(H=I(n>0?0:i.length-1,n,v(z)),H)?H:null}var qr={selectAll:zs,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Se)},killLine:function(e){return or(e,function(t){if(t.empty()){var r=ne(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:W(t.head.line+1,0)}:{from:t.head,to:W(t.head.line,r)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return or(e,function(t){return{from:W(t.from().line,0),to:de(e.doc,W(t.to().line+1,0))}})},delLineLeft:function(e){return or(e,function(t){return{from:W(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return or(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){return or(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(W(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(W(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return ru(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return iu(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return gd(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},Ht)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},Ht)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?iu(e,t.head):n},Ht)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var l=r[i].from(),f=Ne(e.getLine(l.line),l.ch,n);t.push(Pt(n-f%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return vt(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++)if(t[n].empty()){var i=t[n].head,l=ne(e.doc,i.line).text;if(l){if(i.ch==l.length&&(i=new W(i.line,i.ch-1)),i.ch>0)i=new W(i.line,i.ch+1),e.replaceRange(l.charAt(i.ch-1)+l.charAt(i.ch-2),W(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var f=ne(e.doc,i.line-1).text;f&&(i=new W(i.line,1),e.replaceRange(l.charAt(0)+e.doc.lineSeparator()+f.charAt(f.length-1),W(i.line-1,f.length-1),i,"+transpose"))}}r.push(new be(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){return vt(e,function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);Jn(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ru(e,t){var r=ne(e.doc,t),n=Dt(r);return n!=r&&(t=Ce(n)),vo(!0,e,n,t,1)}function gd(e,t){var r=ne(e.doc,t),n=Jf(r);return n!=r&&(t=Ce(n)),vo(!0,e,r,t,-1)}function iu(e,t){var r=ru(e,t.line),n=ne(e.doc,r.line),i=Jt(n,e.doc.direction);if(!i||i[0].level==0){var l=Math.max(r.ch,n.text.search(/\S/)),f=t.line==r.line&&t.ch<=l&&t.ch;return W(r.line,f?0:l,r.sticky)}return r}function ji(e,t,r){if(typeof t=="string"&&(t=qr[t],!t))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=Ct}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}function vd(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=ar(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&ar(t,e.options.extraKeys,r,e)||ar(t,e.options.keyMap,r,e)}var md=new gt;function Xr(e,t,r,n){var i=e.state.keySeq;if(i){if(eu(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:md.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),au(e,i+" "+t,r,n))return!0}return au(e,t,r,n)}function au(e,t,r,n){var i=vd(e,t,n);return i=="multi"&&(e.state.keySeq=t),i=="handled"&&Ye(e,"keyHandled",e,t,r),(i=="handled"||i=="multi")&&(lt(r),Za(e)),!!i}function ou(e,t){var r=nu(t,!0);return r?t.shiftKey&&!e.state.keySeq?Xr(e,"Shift-"+r,t,function(n){return ji(e,n,!0)})||Xr(e,r,t,function(n){if(typeof n=="string"?/^go[A-Z]/.test(n):n.motion)return ji(e,n)}):Xr(e,r,t,function(n){return ji(e,n)}):!1}function yd(e,t,r){return Xr(e,"'"+r+"'",t,function(n){return ji(e,n,!0)})}var mo=null;function lu(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=ye(y(t)),!$e(t,e))){p&&m<11&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=r==16||e.shiftKey;var n=ou(t,e);O&&(mo=n?r:null,!n&&r==88&&!Pf&&(G?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),s&&!G&&!n&&r==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),r==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&xd(t)}}function xd(e){var t=e.display.lineDiv;Te(t,"CodeMirror-crosshair");function r(n){(n.keyCode==18||!n.altKey)&&(we(t,"CodeMirror-crosshair"),xt(document,"keyup",r),xt(document,"mouseover",r))}le(document,"keyup",r),le(document,"mouseover",r)}function su(e){e.keyCode==16&&(this.doc.sel.shift=!1),$e(this,e)}function uu(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(tn(t.display,e)||$e(t,e)||e.ctrlKey&&!e.altKey||G&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(O&&r==mo){mo=null,lt(e);return}if(!(O&&(!e.which||e.which<10)&&ou(t,e))){var i=String.fromCharCode(n==null?r:n);i!="\b"&&(yd(t,e,i)||t.display.input.onKeyPress(e))}}}var bd=400,yo=function(e,t,r){this.time=e,this.pos=t,this.button=r};yo.prototype.compare=function(e,t,r){return this.time+bd>e&&ce(t,this.pos)==0&&r==this.button};var Kr,Qr;function wd(e,t){var r=+new Date;return Qr&&Qr.compare(r,e,t)?(Kr=Qr=null,"triple"):Kr&&Kr.compare(r,e,t)?(Qr=new yo(r,e,t),Kr=null,"double"):(Kr=new yo(r,e,t),Qr=null,"single")}function fu(e){var t=this,r=t.display;if(!($e(t,e)||r.activeTouch&&r.input.supportsTouch())){if(r.input.ensurePolled(),r.shift=e.shiftKey,tn(r,e)){x||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100));return}if(!xo(t,e)){var n=Dn(t,e),i=wl(e),l=n?wd(n,i):"single";ee(t).focus(),i==1&&t.state.selectingText&&t.state.selectingText(e),!(n&&Sd(t,i,n,l,e))&&(i==1?n?Cd(t,n,l,e):ba(e)==r.scroller&&lt(e):i==2?(n&&Pi(t.doc,n),setTimeout(function(){return r.input.focus()},20)):i==3&&(ae?t.display.input.onContextMenu(e):Ja(t)))}}}function Sd(e,t,r,n,i){var l="Click";return n=="double"?l="Double"+l:n=="triple"&&(l="Triple"+l),l=(t==1?"Left":t==2?"Middle":"Right")+l,Xr(e,tu(l,i),i,function(f){if(typeof f=="string"&&(f=qr[f]),!f)return!1;var d=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),d=f(e,r)!=Ct}finally{e.state.suppressEdits=!1}return d})}function kd(e,t,r){var n=e.getOption("configureMouse"),i=n?n(e,t,r):{};if(i.unit==null){var l=ie?r.shiftKey&&r.metaKey:r.altKey;i.unit=l?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(i.extend==null||e.doc.extend)&&(i.extend=e.doc.extend||r.shiftKey),i.addNew==null&&(i.addNew=G?r.metaKey:r.ctrlKey),i.moveOnDrag==null&&(i.moveOnDrag=!(G?r.altKey:r.ctrlKey)),i}function Cd(e,t,r,n){p?setTimeout(Le(cs,e),0):e.curOp.focus=ye(y(e));var i=kd(e,r,n),l=e.doc.sel,f;e.options.dragDrop&&Of&&!e.isReadOnly()&&r=="single"&&(f=l.contains(t))>-1&&(ce((f=l.ranges[f]).from(),t)<0||t.xRel>0)&&(ce(f.to(),t)>0||t.xRel<0)?Ed(e,n,t,i):Ld(e,n,t,i)}function Ed(e,t,r,n){var i=e.display,l=!1,f=qe(e,function(v){x&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Ja(e)),xt(i.wrapper.ownerDocument,"mouseup",f),xt(i.wrapper.ownerDocument,"mousemove",d),xt(i.scroller,"dragstart",h),xt(i.scroller,"drop",f),l||(lt(v),n.addNew||Pi(e.doc,r,null,null,n.extend),x&&!T||p&&m==9?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),d=function(v){l=l||Math.abs(t.clientX-v.clientX)+Math.abs(t.clientY-v.clientY)>=10},h=function(){return l=!0};x&&(i.scroller.draggable=!0),e.state.draggingText=f,f.copy=!n.moveOnDrag,le(i.wrapper.ownerDocument,"mouseup",f),le(i.wrapper.ownerDocument,"mousemove",d),le(i.scroller,"dragstart",h),le(i.scroller,"drop",f),e.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}function cu(e,t,r){if(r=="char")return new be(t,t);if(r=="word")return e.findWordAt(t);if(r=="line")return new be(W(t.line,0),de(e.doc,W(t.line+1,0)));var n=r(e,t);return new be(n.from,n.to)}function Ld(e,t,r,n){p&&Ja(e);var i=e.display,l=e.doc;lt(t);var f,d,h=l.sel,v=h.ranges;if(n.addNew&&!n.extend?(d=l.sel.contains(r),d>-1?f=v[d]:f=new be(r,r)):(f=l.sel.primary(),d=l.sel.primIndex),n.unit=="rectangle")n.addNew||(f=new be(r,r)),r=Dn(e,t,!0,!0),d=-1;else{var w=cu(e,r,n.unit);n.extend?f=co(f,w.anchor,w.head,n.extend):f=w}n.addNew?d==-1?(d=v.length,et(l,Mt(e,v.concat([f]),d),{scroll:!1,origin:"*mouse"})):v.length>1&&v[d].empty()&&n.unit=="char"&&!n.extend?(et(l,Mt(e,v.slice(0,d).concat(v.slice(d+1)),0),{scroll:!1,origin:"*mouse"}),h=l.sel):ho(l,d,f,Ue):(d=0,et(l,new bt([f],0),Ue),h=l.sel);var S=r;function M(q){if(ce(S,q)!=0)if(S=q,n.unit=="rectangle"){for(var Z=[],oe=e.options.tabSize,re=Ne(ne(l,r.line).text,r.ch,oe),pe=Ne(ne(l,q.line).text,q.ch,oe),De=Math.min(re,pe),Ke=Math.max(re,pe),Oe=Math.min(r.line,q.line),mt=Math.min(e.lastLine(),Math.max(r.line,q.line));Oe<=mt;Oe++){var ft=ne(l,Oe).text,ze=xr(ft,De,oe);De==Ke?Z.push(new be(W(Oe,ze),W(Oe,ze))):ft.length>ze&&Z.push(new be(W(Oe,ze),W(Oe,xr(ft,Ke,oe))))}Z.length||Z.push(new be(r,r)),et(l,Mt(e,h.ranges.slice(0,d).concat(Z),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(q)}else{var ct=f,Ve=cu(e,q,n.unit),je=ct.anchor,_e;ce(Ve.anchor,je)>0?(_e=Ve.head,je=vi(ct.from(),Ve.anchor)):(_e=Ve.anchor,je=gi(ct.to(),Ve.head));var Fe=h.ranges.slice(0);Fe[d]=Dd(e,new be(de(l,je),_e)),et(l,Mt(e,Fe,d),Ue)}}var L=i.wrapper.getBoundingClientRect(),I=0;function H(q){var Z=++I,oe=Dn(e,q,!0,n.unit=="rectangle");if(oe)if(ce(oe,S)!=0){e.curOp.focus=ye(y(e)),M(oe);var re=Ai(i,l);(oe.line>=re.to||oe.line<re.from)&&setTimeout(qe(e,function(){I==Z&&H(q)}),150)}else{var pe=q.clientY<L.top?-20:q.clientY>L.bottom?20:0;pe&&setTimeout(qe(e,function(){I==Z&&(i.scroller.scrollTop+=pe,H(q))}),50)}}function z(q){e.state.selectingText=!1,I=1/0,q&&(lt(q),i.input.focus()),xt(i.wrapper.ownerDocument,"mousemove",Y),xt(i.wrapper.ownerDocument,"mouseup",Q),l.history.lastSelOrigin=null}var Y=qe(e,function(q){q.buttons===0||!wl(q)?z(q):H(q)}),Q=qe(e,z);e.state.selectingText=Q,le(i.wrapper.ownerDocument,"mousemove",Y),le(i.wrapper.ownerDocument,"mouseup",Q)}function Dd(e,t){var r=t.anchor,n=t.head,i=ne(e.doc,r.line);if(ce(r,n)==0&&r.sticky==n.sticky)return t;var l=Jt(i);if(!l)return t;var f=Sr(l,r.ch,r.sticky),d=l[f];if(d.from!=r.ch&&d.to!=r.ch)return t;var h=f+(d.from==r.ch==(d.level!=1)?0:1);if(h==0||h==l.length)return t;var v;if(n.line!=r.line)v=(n.line-r.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var w=Sr(l,n.ch,n.sticky),S=w-f||(n.ch-r.ch)*(d.level==1?-1:1);w==h-1||w==h?v=S<0:v=S>0}var M=l[h+(v?-1:0)],L=v==(M.level==1),I=L?M.from:M.to,H=L?"after":"before";return r.ch==I&&r.sticky==H?t:new be(new W(r.line,I,H),n)}function du(e,t,r,n){var i,l;if(t.touches)i=t.touches[0].clientX,l=t.touches[0].clientY;else try{i=t.clientX,l=t.clientY}catch(M){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&lt(t);var f=e.display,d=f.lineDiv.getBoundingClientRect();if(l>d.bottom||!Et(e,r))return xa(t);l-=d.top-f.viewOffset;for(var h=0;h<e.display.gutterSpecs.length;++h){var v=f.gutters.childNodes[h];if(v&&v.getBoundingClientRect().right>=i){var w=Cn(e.doc,l),S=e.display.gutterSpecs[h];return We(e,r,e,w,S.className,t),xa(t)}}}function xo(e,t){return du(e,t,"gutterClick",!0)}function hu(e,t){tn(e.display,t)||Td(e,t)||$e(e,t,"contextmenu")||ae||e.display.input.onContextMenu(t)}function Td(e,t){return Et(e,"gutterContextMenu")?du(e,t,"gutterContextMenu",!1):!1}function pu(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ar(e)}var lr={toString:function(){return"CodeMirror.Init"}},gu={},Gi={};function Md(e){var t=e.optionHandlers;function r(n,i,l,f){e.defaults[n]=i,l&&(t[n]=f?function(d,h,v){v!=lr&&l(d,h,v)}:l)}e.defineOption=r,e.Init=lr,r("value","",function(n,i){return n.setValue(i)},!0),r("mode",null,function(n,i){n.doc.modeOption=i,so(n)},!0),r("indentUnit",2,so,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,function(n){Wr(n),Ar(n),st(n)},!0),r("lineSeparator",null,function(n,i){if(n.doc.lineSep=i,!!i){var l=[],f=n.doc.first;n.doc.iter(function(h){for(var v=0;;){var w=h.text.indexOf(i,v);if(w==-1)break;v=w+i.length,l.push(W(f,w))}f++});for(var d=l.length-1;d>=0;d--)rr(n.doc,i,l[d],W(l[d].line,l[d].ch+i.length))}}),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(n,i,l){n.state.specialChars=new RegExp(i.source+(i.test("	")?"":"|	"),"g"),l!=lr&&n.refresh()}),r("specialCharPlaceholder",ic,function(n){return n.refresh()},!0),r("electricChars",!0),r("inputStyle",_?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),r("spellcheck",!1,function(n,i){return n.getInputField().spellcheck=i},!0),r("autocorrect",!1,function(n,i){return n.getInputField().autocorrect=i},!0),r("autocapitalize",!1,function(n,i){return n.getInputField().autocapitalize=i},!0),r("rtlMoveVisually",!ve),r("wholeLineUpdateBefore",!0),r("theme","default",function(n){pu(n),Br(n)},!0),r("keyMap","default",function(n,i,l){var f=_i(i),d=l!=lr&&_i(l);d&&d.detach&&d.detach(n,f),f.attach&&f.attach(n,d||null)}),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,Nd,!0),r("gutters",[],function(n,i){n.display.gutterSpecs=oo(i,n.options.lineNumbers),Br(n)},!0),r("fixedGutter",!0,function(n,i){n.display.gutters.style.left=i?Xa(n.display)+"px":"0",n.refresh()},!0),r("coverGutterNextToScrollbar",!1,function(n){return Vn(n)},!0),r("scrollbarStyle","native",function(n){ms(n),Vn(n),n.display.scrollbars.setScrollTop(n.doc.scrollTop),n.display.scrollbars.setScrollLeft(n.doc.scrollLeft)},!0),r("lineNumbers",!1,function(n,i){n.display.gutterSpecs=oo(n.options.gutters,i),Br(n)},!0),r("firstLineNumber",1,Br,!0),r("lineNumberFormatter",function(n){return n},Br,!0),r("showCursorWhenSelecting",!1,Nr,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,function(n,i){i=="nocursor"&&(Zn(n),n.display.input.blur()),n.display.input.readOnlyChanged(i)}),r("screenReaderLabel",null,function(n,i){i=i===""?null:i,n.display.input.screenReaderLabelChanged(i)}),r("disableInput",!1,function(n,i){i||n.display.input.reset()},!0),r("dragDrop",!0,Ad),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,Nr,!0),r("singleCursorHeightPerLine",!0,Nr,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,Wr,!0),r("addModeClass",!1,Wr,!0),r("pollInterval",100),r("undoDepth",200,function(n,i){return n.doc.history.undoDepth=i}),r("historyEventDelay",1250),r("viewportMargin",10,function(n){return n.refresh()},!0),r("maxHighlightLength",1e4,Wr,!0),r("moveInputWithCursor",!0,function(n,i){i||n.display.input.resetPosition()}),r("tabindex",null,function(n,i){return n.display.input.getField().tabIndex=i||""}),r("autofocus",null),r("direction","ltr",function(n,i){return n.doc.setDirection(i)},!0),r("phrases",null)}function Ad(e,t,r){var n=r&&r!=lr;if(!t!=!n){var i=e.display.dragFunctions,l=t?le:xt;l(e.display.scroller,"dragstart",i.start),l(e.display.scroller,"dragenter",i.enter),l(e.display.scroller,"dragover",i.over),l(e.display.scroller,"dragleave",i.leave),l(e.display.scroller,"drop",i.drop)}}function Nd(e){e.options.lineWrapping?(Te(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(we(e.display.wrapper,"CodeMirror-wrap"),Wa(e)),Ka(e),st(e),Ar(e),setTimeout(function(){return Vn(e)},100)}function Ae(e,t){var r=this;if(!(this instanceof Ae))return new Ae(e,t);this.options=t=t?he(t):{},he(gu,t,!1);var n=t.value;typeof n=="string"?n=new ut(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var i=new Ae.inputStyles[t.inputStyle](this),l=this.display=new Uc(e,n,i,t);l.wrapper.CodeMirror=this,pu(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ms(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new gt,keySeq:null,specialChars:null},t.autofocus&&!_&&l.input.focus(),p&&m<11&&setTimeout(function(){return r.display.input.reset(!0)},20),Od(this),ud(),Nn(this),this.curOp.forceUpdate=!0,Ds(this,n),t.autofocus&&!_||this.hasFocus()?setTimeout(function(){r.hasFocus()&&!r.state.focused&&Va(r)},20):Zn(this);for(var f in Gi)Gi.hasOwnProperty(f)&&Gi[f](this,t[f],lr);bs(this),t.finishInit&&t.finishInit(this);for(var d=0;d<bo.length;++d)bo[d](this);On(this),x&&t.lineWrapping&&getComputedStyle(l.lineDiv).textRendering=="optimizelegibility"&&(l.lineDiv.style.textRendering="auto")}Ae.defaults=gu,Ae.optionHandlers=Gi;function Od(e){var t=e.display;le(t.scroller,"mousedown",qe(e,fu)),p&&m<11?le(t.scroller,"dblclick",qe(e,function(h){if(!$e(e,h)){var v=Dn(e,h);if(!(!v||xo(e,h)||tn(e.display,h))){lt(h);var w=e.findWordAt(v);Pi(e.doc,w.anchor,w.head)}}})):le(t.scroller,"dblclick",function(h){return $e(e,h)||lt(h)}),le(t.scroller,"contextmenu",function(h){return hu(e,h)}),le(t.input.getField(),"contextmenu",function(h){t.scroller.contains(h.target)||hu(e,h)});var r,n={end:0};function i(){t.activeTouch&&(r=setTimeout(function(){return t.activeTouch=null},1e3),n=t.activeTouch,n.end=+new Date)}function l(h){if(h.touches.length!=1)return!1;var v=h.touches[0];return v.radiusX<=1&&v.radiusY<=1}function f(h,v){if(v.left==null)return!0;var w=v.left-h.left,S=v.top-h.top;return w*w+S*S>20*20}le(t.scroller,"touchstart",function(h){if(!$e(e,h)&&!l(h)&&!xo(e,h)){t.input.ensurePolled(),clearTimeout(r);var v=+new Date;t.activeTouch={start:v,moved:!1,prev:v-n.end<=300?n:null},h.touches.length==1&&(t.activeTouch.left=h.touches[0].pageX,t.activeTouch.top=h.touches[0].pageY)}}),le(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),le(t.scroller,"touchend",function(h){var v=t.activeTouch;if(v&&!tn(t,h)&&v.left!=null&&!v.moved&&new Date-v.start<300){var w=e.coordsChar(t.activeTouch,"page"),S;!v.prev||f(v,v.prev)?S=new be(w,w):!v.prev.prev||f(v,v.prev.prev)?S=e.findWordAt(w):S=new be(W(w.line,0),de(e.doc,W(w.line+1,0))),e.setSelection(S.anchor,S.head),e.focus(),lt(h)}i()}),le(t.scroller,"touchcancel",i),le(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Ir(e,t.scroller.scrollTop),Mn(e,t.scroller.scrollLeft,!0),We(e,"scroll",e))}),le(t.scroller,"mousewheel",function(h){return ks(e,h)}),le(t.scroller,"DOMMouseScroll",function(h){return ks(e,h)}),le(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(h){$e(e,h)||kr(h)},over:function(h){$e(e,h)||(sd(e,h),kr(h))},start:function(h){return ld(e,h)},drop:qe(e,od),leave:function(h){$e(e,h)||Zs(e)}};var d=t.input.getField();le(d,"keyup",function(h){return su.call(e,h)}),le(d,"keydown",qe(e,lu)),le(d,"keypress",qe(e,uu)),le(d,"focus",function(h){return Va(e,h)}),le(d,"blur",function(h){return Zn(e,h)})}var bo=[];Ae.defineInitHook=function(e){return bo.push(e)};function Zr(e,t,r,n){var i=e.doc,l;r==null&&(r="add"),r=="smart"&&(i.mode.indent?l=Er(e,t).state:r="prev");var f=e.options.tabSize,d=ne(i,t),h=Ne(d.text,null,f);d.stateAfter&&(d.stateAfter=null);var v=d.text.match(/^\s*/)[0],w;if(!n&&!/\S/.test(d.text))w=0,r="not";else if(r=="smart"&&(w=i.mode.indent(l,d.text.slice(v.length),d.text),w==Ct||w>150)){if(!n)return;r="prev"}r=="prev"?t>i.first?w=Ne(ne(i,t-1).text,null,f):w=0:r=="add"?w=h+e.options.indentUnit:r=="subtract"?w=h-e.options.indentUnit:typeof r=="number"&&(w=h+r),w=Math.max(0,w);var S="",M=0;if(e.options.indentWithTabs)for(var L=Math.floor(w/f);L;--L)M+=f,S+="	";if(M<w&&(S+=Pt(w-M)),S!=v)return rr(i,S,W(t,0),W(t,v.length),"+input"),d.stateAfter=null,!0;for(var I=0;I<i.sel.ranges.length;I++){var H=i.sel.ranges[I];if(H.head.line==t&&H.head.ch<v.length){var z=W(t,v.length);ho(i,I,new be(z,z));break}}}var At=null;function Ui(e){At=e}function wo(e,t,r,n,i){var l=e.doc;e.display.shift=!1,n||(n=l.sel);var f=+new Date-200,d=i=="paste"||e.state.pasteIncoming>f,h=ka(t),v=null;if(d&&n.ranges.length>1)if(At&&At.text.join(`
`)==t){if(n.ranges.length%At.text.length==0){v=[];for(var w=0;w<At.text.length;w++)v.push(l.splitLines(At.text[w]))}}else h.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(v=Kt(h,function(Y){return[Y]}));for(var S=e.curOp.updateInput,M=n.ranges.length-1;M>=0;M--){var L=n.ranges[M],I=L.from(),H=L.to();L.empty()&&(r&&r>0?I=W(I.line,I.ch-r):e.state.overwrite&&!d?H=W(H.line,Math.min(ne(l,H.line).text.length,H.ch+me(h).length)):d&&At&&At.lineWise&&At.text.join(`
`)==h.join(`
`)&&(I=H=W(I.line,0)));var z={from:I,to:H,text:v?v[M%v.length]:h,origin:i||(d?"paste":e.state.cutIncoming>f?"cut":"+input")};nr(e.doc,z),Ye(e,"inputRead",e,z)}t&&!d&&mu(e,t),Jn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=S),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function vu(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&t.hasFocus()&&vt(t,function(){return wo(t,r,0,null,"paste")}),!0}function mu(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var l=e.getModeAt(i.head),f=!1;if(l.electricChars){for(var d=0;d<l.electricChars.length;d++)if(t.indexOf(l.electricChars.charAt(d))>-1){f=Zr(e,i.head.line,"smart");break}}else l.electricInput&&l.electricInput.test(ne(e.doc,i.head.line).text.slice(0,i.head.ch))&&(f=Zr(e,i.head.line,"smart"));f&&Ye(e,"electricInput",e,i.head.line)}}}function yu(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,l={anchor:W(i,0),head:W(i+1,0)};r.push(l),t.push(e.getRange(l.anchor,l.head))}return{text:t,ranges:r}}function So(e,t,r,n){e.setAttribute("autocorrect",r?"on":"off"),e.setAttribute("autocapitalize",n?"on":"off"),e.setAttribute("spellcheck",!!t)}function xu(){var e=E("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=E("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?e.style.width="1000px":e.setAttribute("wrap","off"),F&&(e.style.border="1px solid black"),t}function Id(e){var t=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){ee(this).focus(),this.display.input.focus()},setOption:function(n,i){var l=this.options,f=l[n];l[n]==i&&n!="mode"||(l[n]=i,t.hasOwnProperty(n)&&qe(this,t[n])(this,i,f),We(this,"optionChange",this,n))},getOption:function(n){return this.options[n]},getDoc:function(){return this.doc},addKeyMap:function(n,i){this.state.keyMaps[i?"push":"unshift"](_i(n))},removeKeyMap:function(n){for(var i=this.state.keyMaps,l=0;l<i.length;++l)if(i[l]==n||i[l].name==n)return i.splice(l,1),!0},addOverlay:rt(function(n,i){var l=n.token?n:e.getMode(this.options,n);if(l.startState)throw new Error("Overlays may not be stateful.");jn(this.state.overlays,{mode:l,modeSpec:n,opaque:i&&i.opaque,priority:i&&i.priority||0},function(f){return f.priority}),this.state.modeGen++,st(this)}),removeOverlay:rt(function(n){for(var i=this.state.overlays,l=0;l<i.length;++l){var f=i[l].modeSpec;if(f==n||typeof n=="string"&&f.name==n){i.splice(l,1),this.state.modeGen++,st(this);return}}}),indentLine:rt(function(n,i,l){typeof i!="string"&&typeof i!="number"&&(i==null?i=this.options.smartIndent?"smart":"prev":i=i?"add":"subtract"),Cr(this.doc,n)&&Zr(this,n,i,l)}),indentSelection:rt(function(n){for(var i=this.doc.sel.ranges,l=-1,f=0;f<i.length;f++){var d=i[f];if(d.empty())d.head.line>l&&(Zr(this,d.head.line,n,!0),l=d.head.line,f==this.doc.sel.primIndex&&Jn(this));else{var h=d.from(),v=d.to(),w=Math.max(l,h.line);l=Math.min(this.lastLine(),v.line-(v.ch?0:1))+1;for(var S=w;S<l;++S)Zr(this,S,n);var M=this.doc.sel.ranges;h.ch==0&&i.length==M.length&&M[f].from().ch>0&&ho(this.doc,f,new be(h,M[f].to()),Se)}}}),getTokenAt:function(n,i){return Ml(this,n,i)},getLineTokens:function(n,i){return Ml(this,W(n),i,!0)},getTokenTypeAt:function(n){n=de(this.doc,n);var i=Ll(this,ne(this.doc,n.line)),l=0,f=(i.length-1)/2,d=n.ch,h;if(d==0)h=i[2];else for(;;){var v=l+f>>1;if((v?i[v*2-1]:0)>=d)f=v;else if(i[v*2+1]<d)l=v+1;else{h=i[v*2+2];break}}var w=h?h.indexOf("overlay "):-1;return w<0?h:w==0?null:h.slice(0,w-1)},getModeAt:function(n){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(n).state).mode:i},getHelper:function(n,i){return this.getHelpers(n,i)[0]},getHelpers:function(n,i){var l=[];if(!r.hasOwnProperty(i))return l;var f=r[i],d=this.getModeAt(n);if(typeof d[i]=="string")f[d[i]]&&l.push(f[d[i]]);else if(d[i])for(var h=0;h<d[i].length;h++){var v=f[d[i][h]];v&&l.push(v)}else d.helperType&&f[d.helperType]?l.push(f[d.helperType]):f[d.name]&&l.push(f[d.name]);for(var w=0;w<f._global.length;w++){var S=f._global[w];S.pred(d,this)&&Me(l,S.val)==-1&&l.push(S.val)}return l},getStateAfter:function(n,i){var l=this.doc;return n=kl(l,n==null?l.first+l.size-1:n),Er(this,n+1,i).state},cursorCoords:function(n,i){var l,f=this.doc.sel.primary();return n==null?l=f.head:typeof n=="object"?l=de(this.doc,n):l=n?f.from():f.to(),Tt(this,l,i||"page")},charCoords:function(n,i){return Li(this,de(this.doc,n),i||"page")},coordsChar:function(n,i){return n=is(this,n,i||"page"),$a(this,n.left,n.top)},lineAtHeight:function(n,i){return n=is(this,{top:n,left:0},i||"page").top,Cn(this.doc,n+this.display.viewOffset)},heightAtLine:function(n,i,l){var f=!1,d;if(typeof n=="number"){var h=this.doc.first+this.doc.size-1;n<this.doc.first?n=this.doc.first:n>h&&(n=h,f=!0),d=ne(this.doc,n)}else d=n;return Ei(this,d,{top:0,left:0},i||"page",l||f).top+(f?this.doc.height-en(d):0)},defaultTextHeight:function(){return Kn(this.display)},defaultCharWidth:function(){return Qn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(n,i,l,f,d){var h=this.display;n=Tt(this,de(this.doc,n));var v=n.bottom,w=n.left;if(i.style.position="absolute",i.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(i),h.sizer.appendChild(i),f=="over")v=n.top;else if(f=="above"||f=="near"){var S=Math.max(h.wrapper.clientHeight,this.doc.height),M=Math.max(h.sizer.clientWidth,h.lineSpace.clientWidth);(f=="above"||n.bottom+i.offsetHeight>S)&&n.top>i.offsetHeight?v=n.top-i.offsetHeight:n.bottom+i.offsetHeight<=S&&(v=n.bottom),w+i.offsetWidth>M&&(w=M-i.offsetWidth)}i.style.top=v+"px",i.style.left=i.style.right="",d=="right"?(w=h.sizer.clientWidth-i.offsetWidth,i.style.right="0px"):(d=="left"?w=0:d=="middle"&&(w=(h.sizer.clientWidth-i.offsetWidth)/2),i.style.left=w+"px"),l&&Ac(this,{left:w,top:v,right:w+i.offsetWidth,bottom:v+i.offsetHeight})},triggerOnKeyDown:rt(lu),triggerOnKeyPress:rt(uu),triggerOnKeyUp:su,triggerOnMouseDown:rt(fu),execCommand:function(n){if(qr.hasOwnProperty(n))return qr[n].call(null,this)},triggerElectric:rt(function(n){mu(this,n)}),findPosH:function(n,i,l,f){var d=1;i<0&&(d=-1,i=-i);for(var h=de(this.doc,n),v=0;v<i&&(h=ko(this.doc,h,d,l,f),!h.hitSide);++v);return h},moveH:rt(function(n,i){var l=this;this.extendSelectionsBy(function(f){return l.display.shift||l.doc.extend||f.empty()?ko(l.doc,f.head,n,i,l.options.rtlMoveVisually):n<0?f.from():f.to()},Ht)}),deleteH:rt(function(n,i){var l=this.doc.sel,f=this.doc;l.somethingSelected()?f.replaceSelection("",null,"+delete"):or(this,function(d){var h=ko(f,d.head,n,i,!1);return n<0?{from:h,to:d.head}:{from:d.head,to:h}})}),findPosV:function(n,i,l,f){var d=1,h=f;i<0&&(d=-1,i=-i);for(var v=de(this.doc,n),w=0;w<i;++w){var S=Tt(this,v,"div");if(h==null?h=S.left:S.left=h,v=bu(this,S,d,l),v.hitSide)break}return v},moveV:rt(function(n,i){var l=this,f=this.doc,d=[],h=!this.display.shift&&!f.extend&&f.sel.somethingSelected();if(f.extendSelectionsBy(function(w){if(h)return n<0?w.from():w.to();var S=Tt(l,w.head,"div");w.goalColumn!=null&&(S.left=w.goalColumn),d.push(S.left);var M=bu(l,S,n,i);return i=="page"&&w==f.sel.primary()&&to(l,Li(l,M,"div").top-S.top),M},Ht),d.length)for(var v=0;v<f.sel.ranges.length;v++)f.sel.ranges[v].goalColumn=d[v]}),findWordAt:function(n){var i=this.doc,l=ne(i,n.line).text,f=n.ch,d=n.ch;if(l){var h=this.getHelper(n,"wordChars");(n.sticky=="before"||d==l.length)&&f?--f:++d;for(var v=l.charAt(f),w=hi(v,h)?function(S){return hi(S,h)}:/\s/.test(v)?function(S){return/\s/.test(S)}:function(S){return!/\s/.test(S)&&!hi(S)};f>0&&w(l.charAt(f-1));)--f;for(;d<l.length&&w(l.charAt(d));)++d}return new be(W(n.line,f),W(n.line,d))},toggleOverwrite:function(n){n!=null&&n==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Te(this.display.cursorDiv,"CodeMirror-overwrite"):we(this.display.cursorDiv,"CodeMirror-overwrite"),We(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ye(y(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:rt(function(n,i){Or(this,n,i)}),getScrollInfo:function(){var n=this.display.scroller;return{left:n.scrollLeft,top:n.scrollTop,height:n.scrollHeight-Rt(this)-this.display.barHeight,width:n.scrollWidth-Rt(this)-this.display.barWidth,clientHeight:_a(this),clientWidth:En(this)}},scrollIntoView:rt(function(n,i){n==null?(n={from:this.doc.sel.primary().head,to:null},i==null&&(i=this.options.cursorScrollMargin)):typeof n=="number"?n={from:W(n,0),to:null}:n.from==null&&(n={from:n,to:null}),n.to||(n.to=n.from),n.margin=i||0,n.from.line!=null?Nc(this,n):hs(this,n.from,n.to,n.margin)}),setSize:rt(function(n,i){var l=this,f=function(h){return typeof h=="number"||/^\d+$/.test(String(h))?h+"px":h};n!=null&&(this.display.wrapper.style.width=f(n)),i!=null&&(this.display.wrapper.style.height=f(i)),this.options.lineWrapping&&ts(this);var d=this.display.viewFrom;this.doc.iter(d,this.display.viewTo,function(h){if(h.widgets){for(var v=0;v<h.widgets.length;v++)if(h.widgets[v].noHScroll){cn(l,d,"widget");break}}++d}),this.curOp.forceUpdate=!0,We(this,"refresh",this)}),operation:function(n){return vt(this,n)},startOperation:function(){return Nn(this)},endOperation:function(){return On(this)},refresh:rt(function(){var n=this.display.cachedTextHeight;st(this),this.curOp.forceUpdate=!0,Ar(this),Or(this,this.doc.scrollLeft,this.doc.scrollTop),io(this.display),(n==null||Math.abs(n-Kn(this.display))>.5||this.options.lineWrapping)&&Ka(this),We(this,"refresh",this)}),swapDoc:rt(function(n){var i=this.doc;return i.cm=null,this.state.selectingText&&this.state.selectingText(),Ds(this,n),Ar(this),this.display.input.reset(),Or(this,n.scrollLeft,n.scrollTop),this.curOp.forceScroll=!0,Ye(this,"swapDoc",this,i),i}),phrase:function(n){var i=this.options.phrases;return i&&Object.prototype.hasOwnProperty.call(i,n)?i[n]:n},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Gn(e),e.registerHelper=function(n,i,l){r.hasOwnProperty(n)||(r[n]=e[n]={_global:[]}),r[n][i]=l},e.registerGlobalHelper=function(n,i,l,f){e.registerHelper(n,i,f),r[n]._global.push({pred:l,val:f})}}function ko(e,t,r,n,i){var l=t,f=r,d=ne(e,t.line),h=i&&e.direction=="rtl"?-r:r;function v(){var Q=t.line+h;return Q<e.first||Q>=e.first+e.size?!1:(t=new W(Q,t.ch,t.sticky),d=ne(e,Q))}function w(Q){var q;if(n=="codepoint"){var Z=d.text.charCodeAt(t.ch+(r>0?0:-1));if(isNaN(Z))q=null;else{var oe=r>0?Z>=55296&&Z<56320:Z>=56320&&Z<57343;q=new W(t.line,Math.max(0,Math.min(d.text.length,t.ch+r*(oe?2:1))),-r)}}else i?q=pd(e.cm,d,t,r):q=go(d,t,r);if(q==null)if(!Q&&v())t=vo(i,e.cm,d,t.line,h);else return!1;else t=q;return!0}if(n=="char"||n=="codepoint")w();else if(n=="column")w(!0);else if(n=="word"||n=="group")for(var S=null,M=n=="group",L=e.cm&&e.cm.getHelper(t,"wordChars"),I=!0;!(r<0&&!w(!I));I=!1){var H=d.text.charAt(t.ch)||`
`,z=hi(H,L)?"w":M&&H==`
`?"n":!M||/\s/.test(H)?null:"p";if(M&&!I&&!z&&(z="s"),S&&S!=z){r<0&&(r=1,w(),t.sticky="after");break}if(z&&(S=z),r>0&&!w(!I))break}var Y=Wi(e,t,l,f,!0);return Aa(l,Y)&&(Y.hitSide=!0),Y}function bu(e,t,r,n){var i=e.doc,l=t.left,f;if(n=="page"){var d=Math.min(e.display.wrapper.clientHeight,ee(e).innerHeight||i(e).documentElement.clientHeight),h=Math.max(d-.5*Kn(e.display),3);f=(r>0?t.bottom:t.top)+r*h}else n=="line"&&(f=r>0?t.bottom+3:t.top-3);for(var v;v=$a(e,l,f),!!v.outside;){if(r<0?f<=0:f>=i.height){v.hitSide=!0;break}f+=r*5}return v}var Ee=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new gt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ee.prototype.init=function(e){var t=this,r=this,n=r.cm,i=r.div=e.lineDiv;i.contentEditable=!0,So(i,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize);function l(d){for(var h=d.target;h;h=h.parentNode){if(h==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(h.className))break}return!1}le(i,"paste",function(d){!l(d)||$e(n,d)||vu(d,n)||m<=11&&setTimeout(qe(n,function(){return t.updateFromDOM()}),20)}),le(i,"compositionstart",function(d){t.composing={data:d.data,done:!1}}),le(i,"compositionupdate",function(d){t.composing||(t.composing={data:d.data,done:!1})}),le(i,"compositionend",function(d){t.composing&&(d.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),le(i,"touchstart",function(){return r.forceCompositionEnd()}),le(i,"input",function(){t.composing||t.readFromDOMSoon()});function f(d){if(!(!l(d)||$e(n,d))){if(n.somethingSelected())Ui({lineWise:!1,text:n.getSelections()}),d.type=="cut"&&n.replaceSelection("",null,"cut");else if(n.options.lineWiseCopyCut){var h=yu(n);Ui({lineWise:!0,text:h.text}),d.type=="cut"&&n.operation(function(){n.setSelections(h.ranges,0,Se),n.replaceSelection("",null,"cut")})}else return;if(d.clipboardData){d.clipboardData.clearData();var v=At.text.join(`
`);if(d.clipboardData.setData("Text",v),d.clipboardData.getData("Text")==v){d.preventDefault();return}}var w=xu(),S=w.firstChild;So(S),n.display.lineSpace.insertBefore(w,n.display.lineSpace.firstChild),S.value=At.text.join(`
`);var M=ye(i.ownerDocument);C(S),setTimeout(function(){n.display.lineSpace.removeChild(w),M.focus(),M==i&&r.showPrimarySelection()},50)}}le(i,"copy",f),le(i,"cut",f)},Ee.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Ee.prototype.prepareSelection=function(){var e=fs(this.cm,!1);return e.focus=ye(this.div.ownerDocument)==this.div,e},Ee.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ee.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ee.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),n=r.from(),i=r.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||i.line<t.display.viewFrom){e.removeAllRanges();return}var l=$i(t,e.anchorNode,e.anchorOffset),f=$i(t,e.focusNode,e.focusOffset);if(!(l&&!l.bad&&f&&!f.bad&&ce(vi(l,f),n)==0&&ce(gi(l,f),i)==0)){var d=t.display.view,h=n.line>=t.display.viewFrom&&wu(t,n)||{node:d[0].measure.map[2],offset:0},v=i.line<t.display.viewTo&&wu(t,i);if(!v){var w=d[d.length-1].measure,S=w.maps?w.maps[w.maps.length-1]:w.map;v={node:S[S.length-1],offset:S[S.length-2]-S[S.length-3]}}if(!h||!v){e.removeAllRanges();return}var M=e.rangeCount&&e.getRangeAt(0),L;try{L=B(h.node,h.offset,v.offset,v.node)}catch(I){}L&&(!s&&t.state.focused?(e.collapse(h.node,h.offset),L.collapsed||(e.removeAllRanges(),e.addRange(L))):(e.removeAllRanges(),e.addRange(L)),M&&e.anchorNode==null?e.addRange(M):s&&this.startGracePeriod()),this.rememberSelection()}},Ee.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ee.prototype.showMultipleSelections=function(e){U(this.cm.display.cursorDiv,e.cursors),U(this.cm.display.selectionDiv,e.selection)},Ee.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ee.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return J(this.div,t)},Ee.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ye(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ee.prototype.blur=function(){this.div.blur()},Ee.prototype.getField=function(){return this.div},Ee.prototype.supportsTouch=function(){return!0},Ee.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):vt(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function r(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,r))}this.polling.set(this.cm.options.pollInterval,r)},Ee.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ee.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(P&&D&&this.cm.display.gutterSpecs.length&&Fd(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var r=$i(t,e.anchorNode,e.anchorOffset),n=$i(t,e.focusNode,e.focusOffset);r&&n&&vt(t,function(){et(t.doc,hn(r,n),Se),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}}},Ee.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,r=e.doc.sel.primary(),n=r.from(),i=r.to();if(n.ch==0&&n.line>e.firstLine()&&(n=W(n.line-1,ne(e.doc,n.line-1).length)),i.ch==ne(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=W(i.line+1,0)),n.line<t.viewFrom||i.line>t.viewTo-1)return!1;var l,f,d;n.line==t.viewFrom||(l=Tn(e,n.line))==0?(f=Ce(t.view[0].line),d=t.view[0].node):(f=Ce(t.view[l].line),d=t.view[l-1].node.nextSibling);var h=Tn(e,i.line),v,w;if(h==t.view.length-1?(v=t.viewTo-1,w=t.lineDiv.lastChild):(v=Ce(t.view[h+1].line)-1,w=t.view[h+1].node.previousSibling),!d)return!1;for(var S=e.doc.splitLines(Hd(e,d,w,f,v)),M=kn(e.doc,W(f,0),W(v,ne(e.doc,v).text.length));S.length>1&&M.length>1;)if(me(S)==me(M))S.pop(),M.pop(),v--;else if(S[0]==M[0])S.shift(),M.shift(),f++;else break;for(var L=0,I=0,H=S[0],z=M[0],Y=Math.min(H.length,z.length);L<Y&&H.charCodeAt(L)==z.charCodeAt(L);)++L;for(var Q=me(S),q=me(M),Z=Math.min(Q.length-(S.length==1?L:0),q.length-(M.length==1?L:0));I<Z&&Q.charCodeAt(Q.length-I-1)==q.charCodeAt(q.length-I-1);)++I;if(S.length==1&&M.length==1&&f==n.line)for(;L&&L>n.ch&&Q.charCodeAt(Q.length-I-1)==q.charCodeAt(q.length-I-1);)L--,I++;S[S.length-1]=Q.slice(0,Q.length-I).replace(/^\u200b+/,""),S[0]=S[0].slice(L).replace(/\u200b+$/,"");var oe=W(f,L),re=W(v,M.length?me(M).length-I:0);if(S.length>1||S[0]||ce(oe,re))return rr(e.doc,S,oe,re,"+input"),!0},Ee.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ee.prototype.reset=function(){this.forceCompositionEnd()},Ee.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ee.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},Ee.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&vt(this.cm,function(){return st(e.cm)})},Ee.prototype.setUneditable=function(e){e.contentEditable="false"},Ee.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||qe(this.cm,wo)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},Ee.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Ee.prototype.onContextMenu=function(){},Ee.prototype.resetPosition=function(){},Ee.prototype.needsContentAttribute=!0;function wu(e,t){var r=ja(e,t.line);if(!r||r.hidden)return null;var n=ne(e.doc,t.line),i=Ql(r,n,t.line),l=Jt(n,e.doc.direction),f="left";if(l){var d=Sr(l,t.ch);f=d%2?"right":"left"}var h=Vl(i.map,t.ch,f);return h.offset=h.collapse=="right"?h.end:h.start,h}function Fd(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function sr(e,t){return t&&(e.bad=!0),e}function Hd(e,t,r,n,i){var l="",f=!1,d=e.doc.lineSeparator(),h=!1;function v(L){return function(I){return I.id==L}}function w(){f&&(l+=d,h&&(l+=d),f=h=!1)}function S(L){L&&(w(),l+=L)}function M(L){if(L.nodeType==1){var I=L.getAttribute("cm-text");if(I){S(I);return}var H=L.getAttribute("cm-marker"),z;if(H){var Y=e.findMarks(W(n,0),W(i+1,0),v(+H));Y.length&&(z=Y[0].find(0))&&S(kn(e.doc,z.from,z.to).join(d));return}if(L.getAttribute("contenteditable")=="false")return;var Q=/^(pre|div|p|li|table|br)$/i.test(L.nodeName);if(!/^br$/i.test(L.nodeName)&&L.textContent.length==0)return;Q&&w();for(var q=0;q<L.childNodes.length;q++)M(L.childNodes[q]);/^(pre|p)$/i.test(L.nodeName)&&(h=!0),Q&&(f=!0)}else L.nodeType==3&&S(L.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;M(t),t!=r;)t=t.nextSibling,h=!1;return l}function $i(e,t,r){var n;if(t==e.display.lineDiv){if(n=e.display.lineDiv.childNodes[r],!n)return sr(e.clipPos(W(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var l=e.display.view[i];if(l.node==n)return Pd(l,t,r)}}function Pd(e,t,r){var n=e.text.firstChild,i=!1;if(!t||!J(n,t))return sr(W(Ce(e.line),0),!0);if(t==n&&(i=!0,t=n.childNodes[r],r=0,!t)){var l=e.rest?me(e.rest):e.line;return sr(W(Ce(l),l.text.length),i)}var f=t.nodeType==3?t:null,d=t;for(!f&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(f=t.firstChild,r&&(r=f.nodeValue.length));d.parentNode!=n;)d=d.parentNode;var h=e.measure,v=h.maps;function w(z,Y,Q){for(var q=-1;q<(v?v.length:0);q++)for(var Z=q<0?h.map:v[q],oe=0;oe<Z.length;oe+=3){var re=Z[oe+2];if(re==z||re==Y){var pe=Ce(q<0?e.line:e.rest[q]),De=Z[oe]+Q;return(Q<0||re!=z)&&(De=Z[oe+(Q?1:0)]),W(pe,De)}}}var S=w(f,d,r);if(S)return sr(S,i);for(var M=d.nextSibling,L=f?f.nodeValue.length-r:0;M;M=M.nextSibling){if(S=w(M,M.firstChild,0),S)return sr(W(S.line,S.ch-L),i);L+=M.textContent.length}for(var I=d.previousSibling,H=r;I;I=I.previousSibling){if(S=w(I,I.firstChild,-1),S)return sr(W(S.line,S.ch+H),i);H+=I.textContent.length}}var Pe=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new gt,this.hasSelection=!1,this.composing=null,this.resetting=!1};Pe.prototype.init=function(e){var t=this,r=this,n=this.cm;this.createField(e);var i=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),F&&(i.style.width="0px"),le(i,"input",function(){p&&m>=9&&t.hasSelection&&(t.hasSelection=null),r.poll()}),le(i,"paste",function(f){$e(n,f)||vu(f,n)||(n.state.pasteIncoming=+new Date,r.fastPoll())});function l(f){if(!$e(n,f)){if(n.somethingSelected())Ui({lineWise:!1,text:n.getSelections()});else if(n.options.lineWiseCopyCut){var d=yu(n);Ui({lineWise:!0,text:d.text}),f.type=="cut"?n.setSelections(d.ranges,null,Se):(r.prevInput="",i.value=d.text.join(`
`),C(i))}else return;f.type=="cut"&&(n.state.cutIncoming=+new Date)}}le(i,"cut",l),le(i,"copy",l),le(e.scroller,"paste",function(f){if(!(tn(e,f)||$e(n,f))){if(!i.dispatchEvent){n.state.pasteIncoming=+new Date,r.focus();return}var d=new Event("paste");d.clipboardData=f.clipboardData,i.dispatchEvent(d)}}),le(e.lineSpace,"selectstart",function(f){tn(e,f)||lt(f)}),le(i,"compositionstart",function(){var f=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:f,range:n.markText(f,n.getCursor("to"),{className:"CodeMirror-composing"})}}),le(i,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},Pe.prototype.createField=function(e){this.wrapper=xu(),this.textarea=this.wrapper.firstChild;var t=this.cm.options;So(this.textarea,t.spellcheck,t.autocorrect,t.autocapitalize)},Pe.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Pe.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=fs(e);if(e.options.moveInputWithCursor){var i=Tt(e,r.sel.primary().head,"div"),l=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+f.top-l.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+f.left-l.left))}return n},Pe.prototype.showSelection=function(e){var t=this.cm,r=t.display;U(r.cursorDiv,e.cursors),U(r.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Pe.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var t=this.cm;if(this.resetting=!0,t.somethingSelected()){this.prevInput="";var r=t.getSelection();this.textarea.value=r,t.state.focused&&C(this.textarea),p&&m>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",p&&m>=9&&(this.hasSelection=null));this.resetting=!1}},Pe.prototype.getField=function(){return this.textarea},Pe.prototype.supportsTouch=function(){return!1},Pe.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!_||ye(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch(e){}},Pe.prototype.blur=function(){this.textarea.blur()},Pe.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Pe.prototype.receivedFocus=function(){this.slowPoll()},Pe.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Pe.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function r(){var n=t.poll();!n&&!e?(e=!0,t.polling.set(60,r)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,r)},Pe.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||this.resetting||!t.state.focused||Hf(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=r.value;if(i==n&&!t.somethingSelected())return!1;if(p&&m>=9&&this.hasSelection===i||G&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var l=i.charCodeAt(0);if(l==8203&&!n&&(n="\u200B"),l==8666)return this.reset(),this.cm.execCommand("undo")}for(var f=0,d=Math.min(n.length,i.length);f<d&&n.charCodeAt(f)==i.charCodeAt(f);)++f;return vt(t,function(){wo(t,i.slice(f),n.length-f,null,e.composing?"*compose":null),i.length>1e3||i.indexOf(`
`)>-1?r.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Pe.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Pe.prototype.onKeyPress=function(){p&&m>=9&&(this.hasSelection=null),this.fastPoll()},Pe.prototype.onContextMenu=function(e){var t=this,r=t.cm,n=r.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var l=Dn(r,e),f=n.scroller.scrollTop;if(!l||O)return;var d=r.options.resetSelectionOnContextMenu;d&&r.doc.sel.contains(l)==-1&&qe(r,et)(r.doc,hn(l),Se);var h=i.style.cssText,v=t.wrapper.style.cssText,w=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",i.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-w.top-5)+"px; left: "+(e.clientX-w.left-5)+`px;
      z-index: 1000; background: `+(p?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var S;x&&(S=i.ownerDocument.defaultView.scrollY),n.input.focus(),x&&i.ownerDocument.defaultView.scrollTo(null,S),n.input.reset(),r.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=L,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll);function M(){if(i.selectionStart!=null){var H=r.somethingSelected(),z="\u200B"+(H?i.value:"");i.value="\u21DA",i.value=z,t.prevInput=H?"":"\u200B",i.selectionStart=1,i.selectionEnd=z.length,n.selForContextMenu=r.doc.sel}}function L(){if(t.contextMenuPending==L&&(t.contextMenuPending=!1,t.wrapper.style.cssText=v,i.style.cssText=h,p&&m<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=f),i.selectionStart!=null)){(!p||p&&m<9)&&M();var H=0,z=function(){n.selForContextMenu==r.doc.sel&&i.selectionStart==0&&i.selectionEnd>0&&t.prevInput=="\u200B"?qe(r,zs)(r):H++<10?n.detectingSelectAll=setTimeout(z,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(z,200)}}if(p&&m>=9&&M(),ae){kr(e);var I=function(){xt(window,"mouseup",I),setTimeout(L,20)};le(window,"mouseup",I)}else setTimeout(L,50)},Pe.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Pe.prototype.setUneditable=function(){},Pe.prototype.needsContentAttribute=!1;function Bd(e,t){if(t=t?he(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var r=ye(e.ownerDocument);t.autofocus=r==e||e.getAttribute("autofocus")!=null&&r==document.body}function n(){e.value=d.getValue()}var i;if(e.form&&(le(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var l=e.form;i=l.submit;try{var f=l.submit=function(){n(),l.submit=i,l.submit(),l.submit=f}}catch(h){}}t.finishInit=function(h){h.save=n,h.getTextArea=function(){return e},h.toTextArea=function(){h.toTextArea=isNaN,n(),e.parentNode.removeChild(h.getWrapperElement()),e.style.display="",e.form&&(xt(e.form,"submit",n),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=i))}},e.style.display="none";var d=Ae(function(h){return e.parentNode.insertBefore(h,e.nextSibling)},t);return d}function Wd(e){e.off=xt,e.on=le,e.wheelEventPixels=$c,e.Doc=ut,e.splitLines=ka,e.countColumn=Ne,e.findColumn=xr,e.isWordChar=va,e.Pass=Ct,e.signal=We,e.Line=Yn,e.changeEnd=pn,e.scrollbarModel=vs,e.Pos=W,e.cmpPos=ce,e.modes=Ea,e.mimeModes=Un,e.resolveMode=pi,e.getMode=La,e.modeExtensions=$n,e.extendMode=zf,e.copyState=Sn,e.startState=Sl,e.innerMode=Da,e.commands=qr,e.keyMap=rn,e.keyName=nu,e.isModifierKey=eu,e.lookupKey=ar,e.normalizeKeyMap=hd,e.StringStream=Re,e.SharedTextMarker=Ur,e.TextMarker=vn,e.LineWidget=Gr,e.e_preventDefault=lt,e.e_stopPropagation=bl,e.e_stop=kr,e.addClass=Te,e.contains=J,e.rmClass=we,e.keyNames=mn}Md(Ae),Id(Ae);var Rd="iter insert remove copy getEditor constructor".split(" ");for(var Yi in ut.prototype)ut.prototype.hasOwnProperty(Yi)&&Me(Rd,Yi)<0&&(Ae.prototype[Yi]=function(e){return function(){return e.apply(this.doc,arguments)}}(ut.prototype[Yi]));return Gn(ut),Ae.inputStyles={textarea:Pe,contenteditable:Ee},Ae.defineMode=function(e){!Ae.defaults.mode&&e!="null"&&(Ae.defaults.mode=e),Wf.apply(this,arguments)},Ae.defineMIME=Rf,Ae.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ae.defineMIME("text/plain","null"),Ae.defineExtension=function(e,t){Ae.prototype[e]=t},Ae.defineDocExtension=function(e,t){ut.prototype[e]=t},Ae.fromTextArea=Bd,Wd(Ae),Ae.version="5.65.13",Ae})});var cf=cr((uf,ff)=>{(function(o){typeof uf=="object"&&typeof ff=="object"?o(zn()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],o):o(CodeMirror)})(function(o){"use strict";var a={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},s={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};o.defineMode("xml",function(u,c){var g=u.indentUnit,p={},m=c.htmlMode?a:s;for(var x in m)p[x]=m[x];for(var x in c)p[x]=c[x];var k,D;function N(E,R){function B(Te){return R.tokenize=Te,Te(E,R)}var J=E.next();if(J=="<")return E.eat("!")?E.eat("[")?E.match("CDATA[")?B(b("atom","]]>")):null:E.match("--")?B(b("comment","-->")):E.match("DOCTYPE",!0,!0)?(E.eatWhile(/[\w\._\-]/),B(A(1))):null:E.eat("?")?(E.eatWhile(/[\w\._\-]/),R.tokenize=b("meta","?>"),"meta"):(k=E.eat("/")?"closeTag":"openTag",R.tokenize=O,"tag bracket");if(J=="&"){var ye;return E.eat("#")?E.eat("x")?ye=E.eatWhile(/[a-fA-F\d]/)&&E.eat(";"):ye=E.eatWhile(/[\d]/)&&E.eat(";"):ye=E.eatWhile(/[\w\.\-:]/)&&E.eat(";"),ye?"atom":"error"}else return E.eatWhile(/[^&<]/),null}N.isInText=!0;function O(E,R){var B=E.next();if(B==">"||B=="/"&&E.eat(">"))return R.tokenize=N,k=B==">"?"endTag":"selfcloseTag","tag bracket";if(B=="=")return k="equals",null;if(B=="<"){R.tokenize=N,R.state=ie,R.tagName=R.tagStart=null;var J=R.tokenize(E,R);return J?J+" tag error":"tag error"}else return/[\'\"]/.test(B)?(R.tokenize=T(B),R.stringStartCol=E.column(),R.tokenize(E,R)):(E.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function T(E){var R=function(B,J){for(;!B.eol();)if(B.next()==E){J.tokenize=O;break}return"string"};return R.isInAttribute=!0,R}function b(E,R){return function(B,J){for(;!B.eol();){if(B.match(R)){J.tokenize=N;break}B.next()}return E}}function A(E){return function(R,B){for(var J;(J=R.next())!=null;){if(J=="<")return B.tokenize=A(E+1),B.tokenize(R,B);if(J==">")if(E==1){B.tokenize=N;break}else return B.tokenize=A(E-1),B.tokenize(R,B)}return"meta"}}function F(E){return E&&E.toLowerCase()}function P(E,R,B){this.prev=E.context,this.tagName=R||"",this.indent=E.indented,this.startOfLine=B,(p.doNotIndent.hasOwnProperty(R)||E.context&&E.context.noIndent)&&(this.noIndent=!0)}function _(E){E.context&&(E.context=E.context.prev)}function G(E,R){for(var B;;){if(!E.context||(B=E.context.tagName,!p.contextGrabbers.hasOwnProperty(F(B))||!p.contextGrabbers[F(B)].hasOwnProperty(F(R))))return;_(E)}}function ie(E,R,B){return E=="openTag"?(B.tagStart=R.column(),ve):E=="closeTag"?V:ie}function ve(E,R,B){return E=="word"?(B.tagName=R.current(),D="tag",K):p.allowMissingTagName&&E=="endTag"?(D="tag bracket",K(E,R,B)):(D="error",ve)}function V(E,R,B){if(E=="word"){var J=R.current();return B.context&&B.context.tagName!=J&&p.implicitlyClosed.hasOwnProperty(F(B.context.tagName))&&_(B),B.context&&B.context.tagName==J||p.matchClosing===!1?(D="tag",te):(D="tag error",ae)}else return p.allowMissingTagName&&E=="endTag"?(D="tag bracket",te(E,R,B)):(D="error",ae)}function te(E,R,B){return E!="endTag"?(D="error",te):(_(B),ie)}function ae(E,R,B){return D="error",te(E,R,B)}function K(E,R,B){if(E=="word")return D="attribute",we;if(E=="endTag"||E=="selfcloseTag"){var J=B.tagName,ye=B.tagStart;return B.tagName=B.tagStart=null,E=="selfcloseTag"||p.autoSelfClosers.hasOwnProperty(F(J))?G(B,J):(G(B,J),B.context=new P(B,J,ye==B.indented)),ie}return D="error",K}function we(E,R,B){return E=="equals"?j:(p.allowMissing||(D="error"),K(E,R,B))}function j(E,R,B){return E=="string"?U:E=="word"&&p.allowUnquoted?(D="string",K):(D="error",K(E,R,B))}function U(E,R,B){return E=="string"?U:K(E,R,B)}return{startState:function(E){var R={tokenize:N,state:ie,indented:E||0,tagName:null,tagStart:null,context:null};return E!=null&&(R.baseIndent=E),R},token:function(E,R){if(!R.tagName&&E.sol()&&(R.indented=E.indentation()),E.eatSpace())return null;k=null;var B=R.tokenize(E,R);return(B||k)&&B!="comment"&&(D=null,R.state=R.state(k||B,E,R),D&&(B=D=="error"?B+" error":D)),B},indent:function(E,R,B){var J=E.context;if(E.tokenize.isInAttribute)return E.tagStart==E.indented?E.stringStartCol+1:E.indented+g;if(J&&J.noIndent)return o.Pass;if(E.tokenize!=O&&E.tokenize!=N)return B?B.match(/^(\s*)/)[0].length:0;if(E.tagName)return p.multilineTagIndentPastTag!==!1?E.tagStart+E.tagName.length+2:E.tagStart+g*(p.multilineTagIndentFactor||1);if(p.alignCDATA&&/<!\[CDATA\[/.test(R))return 0;var ye=R&&/^<(\/)?([\w_:\.-]*)/.exec(R);if(ye&&ye[1])for(;J;)if(J.tagName==ye[2]){J=J.prev;break}else if(p.implicitlyClosed.hasOwnProperty(F(J.tagName)))J=J.prev;else break;else if(ye)for(;J;){var Te=p.contextGrabbers[F(J.tagName)];if(Te&&Te.hasOwnProperty(F(ye[2])))J=J.prev;else break}for(;J&&J.prev&&!J.startOfLine;)J=J.prev;return J?J.indent+g:E.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:p.htmlMode?"html":"xml",helperType:p.htmlMode?"html":"xml",skipAttribute:function(E){E.state==j&&(E.state=K)},xmlCurrentTag:function(E){return E.tagName?{name:E.tagName,close:E.type=="closeTag"}:null},xmlCurrentContext:function(E){for(var R=[],B=E.context;B;B=B.prev)R.push(B.tagName);return R.reverse()}}}),o.defineMIME("text/xml","xml"),o.defineMIME("application/xml","xml"),o.mimeModes.hasOwnProperty("text/html")||o.defineMIME("text/html",{name:"xml",htmlMode:!0})})});var pf=cr((df,hf)=>{(function(o){typeof df=="object"&&typeof hf=="object"?o(zn()):typeof define=="function"&&define.amd?define(["../lib/codemirror"],o):o(CodeMirror)})(function(o){"use strict";o.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var a=0;a<o.modeInfo.length;a++){var s=o.modeInfo[a];s.mimes&&(s.mime=s.mimes[0])}o.findModeByMIME=function(u){u=u.toLowerCase();for(var c=0;c<o.modeInfo.length;c++){var g=o.modeInfo[c];if(g.mime==u)return g;if(g.mimes){for(var p=0;p<g.mimes.length;p++)if(g.mimes[p]==u)return g}}if(/\+xml$/.test(u))return o.findModeByMIME("application/xml");if(/\+json$/.test(u))return o.findModeByMIME("application/json")},o.findModeByExtension=function(u){u=u.toLowerCase();for(var c=0;c<o.modeInfo.length;c++){var g=o.modeInfo[c];if(g.ext){for(var p=0;p<g.ext.length;p++)if(g.ext[p]==u)return g}}},o.findModeByFileName=function(u){for(var c=0;c<o.modeInfo.length;c++){var g=o.modeInfo[c];if(g.file&&g.file.test(u))return g}var p=u.lastIndexOf("."),m=p>-1&&u.substring(p+1,u.length);if(m)return o.findModeByExtension(m)},o.findModeByName=function(u){u=u.toLowerCase();for(var c=0;c<o.modeInfo.length;c++){var g=o.modeInfo[c];if(g.name.toLowerCase()==u)return g;if(g.alias){for(var p=0;p<g.alias.length;p++)if(g.alias[p].toLowerCase()==u)return g}}}})});var mf=cr((gf,vf)=>{(function(o){typeof gf=="object"&&typeof vf=="object"?o(zn(),cf(),pf()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],o):o(CodeMirror)})(function(o){"use strict";o.defineMode("markdown",function(a,s){var u=o.getMode(a,"text/html"),c=u.name=="null";function g(C){if(o.findModeByName){var y=o.findModeByName(C);y&&(C=y.mime||y.mimes[0])}var ee=o.getMode(a,C);return ee.name=="null"?null:ee}s.highlightFormatting===void 0&&(s.highlightFormatting=!1),s.maxBlockquoteDepth===void 0&&(s.maxBlockquoteDepth=0),s.taskLists===void 0&&(s.taskLists=!1),s.strikethrough===void 0&&(s.strikethrough=!1),s.emoji===void 0&&(s.emoji=!1),s.fencedCodeBlockHighlighting===void 0&&(s.fencedCodeBlockHighlighting=!0),s.fencedCodeBlockDefaultMode===void 0&&(s.fencedCodeBlockDefaultMode="text/plain"),s.xml===void 0&&(s.xml=!0),s.tokenTypeOverrides===void 0&&(s.tokenTypeOverrides={});var p={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var m in p)p.hasOwnProperty(m)&&s.tokenTypeOverrides[m]&&(p[m]=s.tokenTypeOverrides[m]);var x=/^([*\-_])(?:\s*\1){2,}\s*$/,k=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,D=/^\[(x| )\](?=\s)/i,N=s.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,O=/^ {0,3}(?:\={1,}|-{2,})\s*$/,T=/^[^#!\[\]*_\\<>` "'(~:]+/,b=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,A=/^\s*\[[^\]]+?\]:.*$/,F=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,P="    ";function _(C,y,ee){return y.f=y.inline=ee,ee(C,y)}function G(C,y,ee){return y.f=y.block=ee,ee(C,y)}function ie(C){return!C||!/\S/.test(C.string)}function ve(C){if(C.linkTitle=!1,C.linkHref=!1,C.linkText=!1,C.em=!1,C.strong=!1,C.strikethrough=!1,C.quote=0,C.indentedCode=!1,C.f==te){var y=c;if(!y){var ee=o.innerMode(u,C.htmlState);y=ee.mode.name=="xml"&&ee.state.tagStart===null&&!ee.state.context&&ee.state.tokenize.isInText}y&&(C.f=j,C.block=V,C.htmlState=null)}return C.trailingSpace=0,C.trailingSpaceNewLine=!1,C.prevLine=C.thisLine,C.thisLine={stream:null},null}function V(C,y){var ee=C.column()===y.indentation,Le=ie(y.prevLine.stream),he=y.indentedCode,Ne=y.prevLine.hr,gt=y.list!==!1,Me=(y.listStack[y.listStack.length-1]||0)+3;y.indentedCode=!1;var Ft=y.indentation;if(y.indentationDiff===null&&(y.indentationDiff=y.indentation,gt)){for(y.list=null;Ft<y.listStack[y.listStack.length-1];)y.listStack.pop(),y.listStack.length?y.indentation=y.listStack[y.listStack.length-1]:y.list=!1;y.list!==!1&&(y.indentationDiff=Ft-y.listStack[y.listStack.length-1])}var Ct=!Le&&!Ne&&!y.prevLine.header&&(!gt||!he)&&!y.prevLine.fencedCodeEnd,Se=(y.list===!1||Ne||Le)&&y.indentation<=Me&&C.match(x),Ue=null;if(y.indentationDiff>=4&&(he||y.prevLine.fencedCodeEnd||y.prevLine.header||Le))return C.skipToEnd(),y.indentedCode=!0,p.code;if(C.eatSpace())return null;if(ee&&y.indentation<=Me&&(Ue=C.match(N))&&Ue[1].length<=6)return y.quote=0,y.header=Ue[1].length,y.thisLine.header=!0,s.highlightFormatting&&(y.formatting="header"),y.f=y.inline,K(y);if(y.indentation<=Me&&C.eat(">"))return y.quote=ee?1:y.quote+1,s.highlightFormatting&&(y.formatting="quote"),C.eatSpace(),K(y);if(!Se&&!y.setext&&ee&&y.indentation<=Me&&(Ue=C.match(k))){var Ht=Ue[1]?"ol":"ul";return y.indentation=Ft+C.current().length,y.list=!0,y.quote=0,y.listStack.push(y.indentation),y.em=!1,y.strong=!1,y.code=!1,y.strikethrough=!1,s.taskLists&&C.match(D,!1)&&(y.taskList=!0),y.f=y.inline,s.highlightFormatting&&(y.formatting=["list","list-"+Ht]),K(y)}else{if(ee&&y.indentation<=Me&&(Ue=C.match(b,!0)))return y.quote=0,y.fencedEndRE=new RegExp(Ue[1]+"+ *$"),y.localMode=s.fencedCodeBlockHighlighting&&g(Ue[2]||s.fencedCodeBlockDefaultMode),y.localMode&&(y.localState=o.startState(y.localMode)),y.f=y.block=ae,s.highlightFormatting&&(y.formatting="code-block"),y.code=-1,K(y);if(y.setext||(!Ct||!gt)&&!y.quote&&y.list===!1&&!y.code&&!Se&&!A.test(C.string)&&(Ue=C.lookAhead(1))&&(Ue=Ue.match(O)))return y.setext?(y.header=y.setext,y.setext=0,C.skipToEnd(),s.highlightFormatting&&(y.formatting="header")):(y.header=Ue[0].charAt(0)=="="?1:2,y.setext=y.header),y.thisLine.header=!0,y.f=y.inline,K(y);if(Se)return C.skipToEnd(),y.hr=!0,y.thisLine.hr=!0,p.hr;if(C.peek()==="[")return _(C,y,J)}return _(C,y,y.inline)}function te(C,y){var ee=u.token(C,y.htmlState);if(!c){var Le=o.innerMode(u,y.htmlState);(Le.mode.name=="xml"&&Le.state.tagStart===null&&!Le.state.context&&Le.state.tokenize.isInText||y.md_inside&&C.current().indexOf(">")>-1)&&(y.f=j,y.block=V,y.htmlState=null)}return ee}function ae(C,y){var ee=y.listStack[y.listStack.length-1]||0,Le=y.indentation<ee,he=ee+3;if(y.fencedEndRE&&y.indentation<=he&&(Le||C.match(y.fencedEndRE))){s.highlightFormatting&&(y.formatting="code-block");var Ne;return Le||(Ne=K(y)),y.localMode=y.localState=null,y.block=V,y.f=j,y.fencedEndRE=null,y.code=0,y.thisLine.fencedCodeEnd=!0,Le?G(C,y,y.block):Ne}else return y.localMode?y.localMode.token(C,y.localState):(C.skipToEnd(),p.code)}function K(C){var y=[];if(C.formatting){y.push(p.formatting),typeof C.formatting=="string"&&(C.formatting=[C.formatting]);for(var ee=0;ee<C.formatting.length;ee++)y.push(p.formatting+"-"+C.formatting[ee]),C.formatting[ee]==="header"&&y.push(p.formatting+"-"+C.formatting[ee]+"-"+C.header),C.formatting[ee]==="quote"&&(!s.maxBlockquoteDepth||s.maxBlockquoteDepth>=C.quote?y.push(p.formatting+"-"+C.formatting[ee]+"-"+C.quote):y.push("error"))}if(C.taskOpen)return y.push("meta"),y.length?y.join(" "):null;if(C.taskClosed)return y.push("property"),y.length?y.join(" "):null;if(C.linkHref?y.push(p.linkHref,"url"):(C.strong&&y.push(p.strong),C.em&&y.push(p.em),C.strikethrough&&y.push(p.strikethrough),C.emoji&&y.push(p.emoji),C.linkText&&y.push(p.linkText),C.code&&y.push(p.code),C.image&&y.push(p.image),C.imageAltText&&y.push(p.imageAltText,"link"),C.imageMarker&&y.push(p.imageMarker)),C.header&&y.push(p.header,p.header+"-"+C.header),C.quote&&(y.push(p.quote),!s.maxBlockquoteDepth||s.maxBlockquoteDepth>=C.quote?y.push(p.quote+"-"+C.quote):y.push(p.quote+"-"+s.maxBlockquoteDepth)),C.list!==!1){var Le=(C.listStack.length-1)%3;Le?Le===1?y.push(p.list2):y.push(p.list3):y.push(p.list1)}return C.trailingSpaceNewLine?y.push("trailing-space-new-line"):C.trailingSpace&&y.push("trailing-space-"+(C.trailingSpace%2?"a":"b")),y.length?y.join(" "):null}function we(C,y){if(C.match(T,!0))return K(y)}function j(C,y){var ee=y.text(C,y);if(typeof ee!="undefined")return ee;if(y.list)return y.list=null,K(y);if(y.taskList){var Le=C.match(D,!0)[1]===" ";return Le?y.taskOpen=!0:y.taskClosed=!0,s.highlightFormatting&&(y.formatting="task"),y.taskList=!1,K(y)}if(y.taskOpen=!1,y.taskClosed=!1,y.header&&C.match(/^#+$/,!0))return s.highlightFormatting&&(y.formatting="header"),K(y);var he=C.next();if(y.linkTitle){y.linkTitle=!1;var Ne=he;he==="("&&(Ne=")"),Ne=(Ne+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var gt="^\\s*(?:[^"+Ne+"\\\\]+|\\\\\\\\|\\\\.)"+Ne;if(C.match(new RegExp(gt),!0))return p.linkHref}if(he==="`"){var Me=y.formatting;s.highlightFormatting&&(y.formatting="code"),C.eatWhile("`");var Ft=C.current().length;if(y.code==0&&(!y.quote||Ft==1))return y.code=Ft,K(y);if(Ft==y.code){var Ct=K(y);return y.code=0,Ct}else return y.formatting=Me,K(y)}else if(y.code)return K(y);if(he==="\\"&&(C.next(),s.highlightFormatting)){var Se=K(y),Ue=p.formatting+"-escape";return Se?Se+" "+Ue:Ue}if(he==="!"&&C.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return y.imageMarker=!0,y.image=!0,s.highlightFormatting&&(y.formatting="image"),K(y);if(he==="["&&y.imageMarker&&C.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return y.imageMarker=!1,y.imageAltText=!0,s.highlightFormatting&&(y.formatting="image"),K(y);if(he==="]"&&y.imageAltText){s.highlightFormatting&&(y.formatting="image");var Se=K(y);return y.imageAltText=!1,y.image=!1,y.inline=y.f=E,Se}if(he==="["&&!y.image)return y.linkText&&C.match(/^.*?\]/)||(y.linkText=!0,s.highlightFormatting&&(y.formatting="link")),K(y);if(he==="]"&&y.linkText){s.highlightFormatting&&(y.formatting="link");var Se=K(y);return y.linkText=!1,y.inline=y.f=C.match(/\(.*?\)| ?\[.*?\]/,!1)?E:j,Se}if(he==="<"&&C.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){y.f=y.inline=U,s.highlightFormatting&&(y.formatting="link");var Se=K(y);return Se?Se+=" ":Se="",Se+p.linkInline}if(he==="<"&&C.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){y.f=y.inline=U,s.highlightFormatting&&(y.formatting="link");var Se=K(y);return Se?Se+=" ":Se="",Se+p.linkEmail}if(s.xml&&he==="<"&&C.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var Ht=C.string.indexOf(">",C.pos);if(Ht!=-1){var xr=C.string.substring(C.start,Ht);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(xr)&&(y.md_inside=!0)}return C.backUp(1),y.htmlState=o.startState(u),G(C,y,te)}if(s.xml&&he==="<"&&C.match(/^\/\w*?>/))return y.md_inside=!1,"tag";if(he==="*"||he==="_"){for(var Xt=1,Pt=C.pos==1?" ":C.string.charAt(C.pos-2);Xt<3&&C.eat(he);)Xt++;var me=C.peek()||" ",Kt=!/\s/.test(me)&&(!F.test(me)||/\s/.test(Pt)||F.test(Pt)),jn=!/\s/.test(Pt)&&(!F.test(Pt)||/\s/.test(me)||F.test(me)),Qt=null,Zt=null;if(Xt%2&&(!y.em&&Kt&&(he==="*"||!jn||F.test(Pt))?Qt=!0:y.em==he&&jn&&(he==="*"||!Kt||F.test(me))&&(Qt=!1)),Xt>1&&(!y.strong&&Kt&&(he==="*"||!jn||F.test(Pt))?Zt=!0:y.strong==he&&jn&&(he==="*"||!Kt||F.test(me))&&(Zt=!1)),Zt!=null||Qt!=null){s.highlightFormatting&&(y.formatting=Qt==null?"strong":Zt==null?"em":"strong em"),Qt===!0&&(y.em=he),Zt===!0&&(y.strong=he);var Ct=K(y);return Qt===!1&&(y.em=!1),Zt===!1&&(y.strong=!1),Ct}}else if(he===" "&&(C.eat("*")||C.eat("_"))){if(C.peek()===" ")return K(y);C.backUp(1)}if(s.strikethrough){if(he==="~"&&C.eatWhile(he)){if(y.strikethrough){s.highlightFormatting&&(y.formatting="strikethrough");var Ct=K(y);return y.strikethrough=!1,Ct}else if(C.match(/^[^\s]/,!1))return y.strikethrough=!0,s.highlightFormatting&&(y.formatting="strikethrough"),K(y)}else if(he===" "&&C.match("~~",!0)){if(C.peek()===" ")return K(y);C.backUp(2)}}if(s.emoji&&he===":"&&C.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){y.emoji=!0,s.highlightFormatting&&(y.formatting="emoji");var ga=K(y);return y.emoji=!1,ga}return he===" "&&(C.match(/^ +$/,!1)?y.trailingSpace++:y.trailingSpace&&(y.trailingSpaceNewLine=!0)),K(y)}function U(C,y){var ee=C.next();if(ee===">"){y.f=y.inline=j,s.highlightFormatting&&(y.formatting="link");var Le=K(y);return Le?Le+=" ":Le="",Le+p.linkInline}return C.match(/^[^>]+/,!0),p.linkInline}function E(C,y){if(C.eatSpace())return null;var ee=C.next();return ee==="("||ee==="["?(y.f=y.inline=B(ee==="("?")":"]"),s.highlightFormatting&&(y.formatting="link-string"),y.linkHref=!0,K(y)):"error"}var R={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function B(C){return function(y,ee){var Le=y.next();if(Le===C){ee.f=ee.inline=j,s.highlightFormatting&&(ee.formatting="link-string");var he=K(ee);return ee.linkHref=!1,he}return y.match(R[C]),ee.linkHref=!0,K(ee)}}function J(C,y){return C.match(/^([^\]\\]|\\.)*\]:/,!1)?(y.f=ye,C.next(),s.highlightFormatting&&(y.formatting="link"),y.linkText=!0,K(y)):_(C,y,j)}function ye(C,y){if(C.match("]:",!0)){y.f=y.inline=Te,s.highlightFormatting&&(y.formatting="link");var ee=K(y);return y.linkText=!1,ee}return C.match(/^([^\]\\]|\\.)+/,!0),p.linkText}function Te(C,y){return C.eatSpace()?null:(C.match(/^[^\s]+/,!0),C.peek()===void 0?y.linkTitle=!0:C.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),y.f=y.inline=j,p.linkHref+" url")}var It={startState:function(){return{f:V,prevLine:{stream:null},thisLine:{stream:null},block:V,htmlState:null,indentation:0,inline:j,text:we,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(C){return{f:C.f,prevLine:C.prevLine,thisLine:C.thisLine,block:C.block,htmlState:C.htmlState&&o.copyState(u,C.htmlState),indentation:C.indentation,localMode:C.localMode,localState:C.localMode?o.copyState(C.localMode,C.localState):null,inline:C.inline,text:C.text,formatting:!1,linkText:C.linkText,linkTitle:C.linkTitle,linkHref:C.linkHref,code:C.code,em:C.em,strong:C.strong,strikethrough:C.strikethrough,emoji:C.emoji,header:C.header,setext:C.setext,hr:C.hr,taskList:C.taskList,list:C.list,listStack:C.listStack.slice(0),quote:C.quote,indentedCode:C.indentedCode,trailingSpace:C.trailingSpace,trailingSpaceNewLine:C.trailingSpaceNewLine,md_inside:C.md_inside,fencedEndRE:C.fencedEndRE}},token:function(C,y){if(y.formatting=!1,C!=y.thisLine.stream){if(y.header=0,y.hr=!1,C.match(/^\s*$/,!0))return ve(y),null;if(y.prevLine=y.thisLine,y.thisLine={stream:C},y.taskList=!1,y.trailingSpace=0,y.trailingSpaceNewLine=!1,!y.localState&&(y.f=y.block,y.f!=te)){var ee=C.match(/^\s*/,!0)[0].replace(/\t/g,P).length;if(y.indentation=ee,y.indentationDiff=null,ee>0)return null}}return y.f(C,y)},innerMode:function(C){return C.block==te?{state:C.htmlState,mode:u}:C.localState?{state:C.localState,mode:C.localMode}:{state:C,mode:It}},indent:function(C,y,ee){return C.block==te&&u.indent?u.indent(C.htmlState,y,ee):C.localState&&C.localMode.indent?C.localMode.indent(C.localState,y,ee):o.Pass},blankLine:ve,getType:K,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return It},"xml"),o.defineMIME("text/markdown","markdown"),o.defineMIME("text/x-markdown","markdown")})});var bf=cr((yf,xf)=>{(function(o){typeof yf=="object"&&typeof xf=="object"?o(zn()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],o):o(CodeMirror)})(function(o){o.defineOption("placeholder","",function(m,x,k){var D=k&&k!=o.Init;if(x&&!D)m.on("blur",c),m.on("change",g),m.on("swapDoc",g),o.on(m.getInputField(),"compositionupdate",m.state.placeholderCompose=function(){u(m)}),g(m);else if(!x&&D){m.off("blur",c),m.off("change",g),m.off("swapDoc",g),o.off(m.getInputField(),"compositionupdate",m.state.placeholderCompose),a(m);var N=m.getWrapperElement();N.className=N.className.replace(" CodeMirror-empty","")}x&&!m.hasFocus()&&c(m)});function a(m){m.state.placeholder&&(m.state.placeholder.parentNode.removeChild(m.state.placeholder),m.state.placeholder=null)}function s(m){a(m);var x=m.state.placeholder=document.createElement("pre");x.style.cssText="height: 0; overflow: visible",x.style.direction=m.getOption("direction"),x.className="CodeMirror-placeholder CodeMirror-line-like";var k=m.getOption("placeholder");typeof k=="string"&&(k=document.createTextNode(k)),x.appendChild(k),m.display.lineSpace.insertBefore(x,m.display.lineSpace.firstChild)}function u(m){setTimeout(function(){var x=!1;if(m.lineCount()==1){var k=m.getInputField();x=k.nodeName=="TEXTAREA"?!m.getLine(0).length:!/[^\u200b]/.test(k.querySelector(".CodeMirror-line").textContent)}x?s(m):a(m)},20)}function c(m){p(m)&&s(m)}function g(m){var x=m.getWrapperElement(),k=p(m);x.className=x.className.replace(" CodeMirror-empty","")+(k?" CodeMirror-empty":""),k?s(m):a(m)}function p(m){return m.lineCount()===1&&m.getLine(0)===""}})});var kf=cr((wf,Sf)=>{(function(o){typeof wf=="object"&&typeof Sf=="object"?o(zn()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],o):o(CodeMirror)})(function(o){"use strict";var a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,s=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,u=/[*+-]\s/;o.commands.newlineAndIndentContinueMarkdownList=function(g){if(g.getOption("disableInput"))return o.Pass;for(var p=g.listSelections(),m=[],x=0;x<p.length;x++){var k=p[x].head,D=g.getStateAfter(k.line),N=o.innerMode(g.getMode(),D);if(N.mode.name!=="markdown"&&N.mode.helperType!=="markdown"){g.execCommand("newlineAndIndent");return}else D=N.state;var O=D.list!==!1,T=D.quote!==0,b=g.getLine(k.line),A=a.exec(b),F=/^\s*$/.test(b.slice(0,k.ch));if(!p[x].empty()||!O&&!T||!A||F){g.execCommand("newlineAndIndent");return}if(s.test(b)){var P=T&&/>\s*$/.test(b),_=!/>\s*$/.test(b);(P||_)&&g.replaceRange("",{line:k.line,ch:0},{line:k.line,ch:k.ch+1}),m[x]=`
`}else{var G=A[1],ie=A[5],ve=!(u.test(A[2])||A[2].indexOf(">")>=0),V=ve?parseInt(A[3],10)+1+A[4]:A[2].replace("x"," ");m[x]=`
`+G+V+ie,ve&&c(g,k)}}g.replaceSelections(m)};function c(g,p){var m=p.line,x=0,k=0,D=a.exec(g.getLine(m)),N=D[1];do{x+=1;var O=m+x,T=g.getLine(O),b=a.exec(T);if(b){var A=b[1],F=parseInt(D[3],10)+x-k,P=parseInt(b[3],10),_=P;if(N===A&&!isNaN(P))F===P&&(_=P+1),F>P&&(_=F+1),g.replaceRange(T.replace(a,A+_+b[4]+b[5]),{line:O,ch:0},{line:O,ch:T.length});else{if(N.length>A.length||N.length<A.length&&x===1)return;k+=1}}}while(b)}})});var qh={};Yd(qh,{default:()=>Yh});var ti={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},Xd=8,Lu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function Du(o,a){return typeof o=="number"?o+a:o}function No(o){if(typeof o=="string"){let a=/^(\d+)\s*(.*)$/g.exec(o);return{value:a?+a[1]:0,unit:(a==null?void 0:a[2])||void 0}}return{value:Number(o)}}function Kd(o){return String.fromCharCode(97+o%26)}var To=2221e-19;function Qd(o){return Math.floor(Math.log(Math.abs(o))/Math.LN10)}function Vr(o,a,s){return a/s.range*o}function Zd(o,a){let s=Math.pow(10,a||Xd);return Math.round(o*s)/s}function Jd(o){if(o===1)return o;function a(p,m){return p%m===0?m:a(m,p%m)}function s(p){return p*p+1}let u=2,c=2,g;if(o%2===0)return 2;do u=s(u)%o,c=s(s(c))%o,g=a(Math.abs(u-c),o);while(g===1);return g}function Vd(o,a,s){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c={high:a.high,low:a.low,valueRange:0,oom:0,step:0,min:0,max:0,range:0,numberOfSteps:0,values:[]};c.valueRange=c.high-c.low,c.oom=Qd(c.valueRange),c.step=Math.pow(10,c.oom),c.min=Math.floor(c.low/c.step)*c.step,c.max=Math.ceil(c.high/c.step)*c.step,c.range=c.max-c.min,c.numberOfSteps=Math.round(c.range/c.step);let p=Vr(o,c.step,c)<s,m=u?Jd(c.range):0;if(u&&Vr(o,1,c)>=s)c.step=1;else if(u&&m<c.step&&Vr(o,m,c)>=s)c.step=m;else{let O=0;for(;;){if(p&&Vr(o,c.step,c)<=s)c.step*=2;else if(!p&&Vr(o,c.step/2,c)>=s){if(c.step/=2,u&&c.step%1!==0){c.step*=2;break}}else break;if(O++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}}c.step=Math.max(c.step,To);function x(O,T){return O===(O+=T)&&(O*=1+(T>0?To:-To)),O}let k=c.min,D=c.max;for(;k+c.step<=c.low;)k=x(k,c.step);for(;D-c.step>=c.high;)D=x(D,-c.step);c.min=k,c.max=D,c.range=c.max-c.min;let N=[];for(let O=c.min;O<=c.max;O=x(O,c.step)){let T=Zd(O);T!==N[N.length-1]&&N.push(T)}return c.values=N,c}function ni(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];for(let c=0;c<s.length;c++){let g=s[c];for(let p in g){let m=g[p];typeof m=="object"&&m!==null&&!(m instanceof Array)?o[p]=ni(o[p],m):o[p]=m}}return o}var Tu=o=>o;function Mu(o,a){return Array.from({length:o},a?(s,u)=>a(u):()=>{})}function ht(o,a){return o!==null&&typeof o=="object"&&Reflect.has(o,a)}function Qi(o){return o!==null&&isFinite(o)}function eh(o){return!o&&o!==0}function dr(o){return Qi(o)?Number(o):void 0}function th(o){return Array.isArray(o)?o.every(Array.isArray):!1}function nh(o,a){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=0;o[s?"reduceRight":"reduce"]((c,g,p)=>a(g,u++,p),void 0)}function rh(o,a){let s=Array.isArray(o)?o[a]:ht(o,"data")?o.data[a]:null;return ht(s,"meta")?s.meta:void 0}function Hu(o){return o==null||typeof o=="number"&&isNaN(o)}function ih(o){return Array.isArray(o)&&o.every(a=>Array.isArray(a)||ht(a,"data"))}function ah(o){return typeof o=="object"&&o!==null&&(Reflect.has(o,"x")||Reflect.has(o,"y"))}function zo(o){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y";return ah(o)&&ht(o,a)?dr(o[a]):dr(o)}function oh(o,a,s){a=Ze(Ze({},a),s?s==="x"?a.axisX:a.axisY:{});let u={high:a.high===void 0?-Number.MAX_VALUE:+a.high,low:a.low===void 0?Number.MAX_VALUE:+a.low},c=a.high===void 0,g=a.low===void 0;function p(m){if(!Hu(m))if(Array.isArray(m))for(let x=0;x<m.length;x++)p(m[x]);else{let x=Number(s&&ht(m,s)?m[s]:m);c&&x>u.high&&(u.high=x),g&&x<u.low&&(u.low=x)}}return(c||g)&&p(o),(a.referenceValue||a.referenceValue===0)&&(u.high=Math.max(a.referenceValue,u.high),u.low=Math.min(a.referenceValue,u.low)),u.high<=u.low&&(u.low===0?u.high=1:u.low<0?u.high=0:(u.high>0||(u.high=1),u.low=0)),u}function lh(o){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,c,g={labels:(o.labels||[]).slice(),series:fh(o.series,s,u)},p=g.labels.length;return th(g.series)?(c=Math.max(p,...g.series.map(m=>m.length)),g.series.forEach(m=>{m.push(...Mu(Math.max(0,c-m.length)))})):c=g.series.length,g.labels.push(...Mu(Math.max(0,c-p),()=>"")),a&&sh(g),g}function sh(o){var a;(a=o.labels)===null||a===void 0||a.reverse(),o.series.reverse();for(let s of o.series)ht(s,"data")?s.data.reverse():Array.isArray(s)&&s.reverse()}function uh(o,a){let s,u;if(typeof o!="object"){let c=dr(o);a==="x"?s=c:u=c}else ht(o,"x")&&(s=dr(o.x)),ht(o,"y")&&(u=dr(o.y));if(!(s===void 0&&u===void 0))return{x:s,y:u}}function Au(o,a){if(!Hu(o))return a?uh(o,a):dr(o)}function Oo(o,a){return Array.isArray(o)?o.map(s=>ht(s,"value")?Au(s.value,a):Au(s,a)):Oo(o.data,a)}function fh(o,a,s){if(ih(o))return o.map(c=>Oo(c,a));let u=Oo(o,a);return s?u.map(c=>[c]):u}function ch(o,a,s){let u=Ze({increasingX:!1,fillHoles:!1},s),c=[],g=!0;for(let p=0;p<o.length;p+=2)zo(a[p/2].value)===void 0?u.fillHoles||(g=!0):(u.increasingX&&p>=2&&o[p]<=o[p-2]&&(g=!0),g&&(c.push({pathCoordinates:[],valueData:[]}),g=!1),c[c.length-1].pathCoordinates.push(o[p],o[p+1]),c[c.length-1].valueData.push(a[p/2]));return c}function Nu(o){let a="";return o==null?o:(typeof o=="number"?a=""+o:typeof o=="object"?a=JSON.stringify({data:o}):a=String(o),Object.keys(Lu).reduce((s,u)=>s.replaceAll(u,Lu[u]),a))}var Io=class{call(a,s){return this.svgElements.forEach(u=>Reflect.apply(u[a],u,s)),this}attr(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("attr",s)}elem(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("elem",s)}root(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("root",s)}getNode(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("getNode",s)}foreignObject(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("foreignObject",s)}text(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("text",s)}empty(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("empty",s)}remove(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("remove",s)}addClass(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("addClass",s)}removeClass(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("removeClass",s)}removeAllClasses(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("removeAllClasses",s)}animate(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.call("animate",s)}constructor(a){this.svgElements=[];for(let s=0;s<a.length;s++)this.svgElements.push(new jt(a[s]))}},Pu={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function Ou(o,a,s){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4?arguments[4]:void 0,O=s,{easing:g}=O,p=Cu(O,["easing"]),m={},x,k;g&&(x=Array.isArray(g)?g:Pu[g]),p.begin=Du(p.begin,"ms"),p.dur=Du(p.dur,"ms"),x&&(p.calcMode="spline",p.keySplines=x.join(" "),p.keyTimes="0;1"),u&&(p.fill="freeze",m[a]=p.from,o.attr(m),k=No(p.begin||0).value,p.begin="indefinite");let D=o.elem("animate",Ze({attributeName:a},p));u&&setTimeout(()=>{try{D._node.beginElement()}catch(T){m[a]=p.to,o.attr(m),D.remove()}},k);let N=D.getNode();c&&N.addEventListener("beginEvent",()=>c.emit("animationBegin",{element:o,animate:N,params:s})),N.addEventListener("endEvent",()=>{c&&c.emit("animationEnd",{element:o,animate:N,params:s}),u&&(m[a]=p.to,o.attr(m),D.remove())})}var jt=class{attr(a,s){return typeof a=="string"?s?this._node.getAttributeNS(s,a):this._node.getAttribute(a):(Object.keys(a).forEach(u=>{if(a[u]!==void 0)if(u.indexOf(":")!==-1){let c=u.split(":");this._node.setAttributeNS(ti[c[0]],u,String(a[u]))}else this._node.setAttribute(u,String(a[u]))}),this)}elem(a,s,u){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return new jt(a,s,u,this,c)}parent(){return this._node.parentNode instanceof SVGElement?new jt(this._node.parentNode):null}root(){let a=this._node;for(;a.nodeName!=="svg"&&a.parentElement;)a=a.parentElement;return new jt(a)}querySelector(a){let s=this._node.querySelector(a);return s?new jt(s):null}querySelectorAll(a){let s=this._node.querySelectorAll(a);return new Io(s)}getNode(){return this._node}foreignObject(a,s,u){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g;if(typeof a=="string"){let m=document.createElement("div");m.innerHTML=a,g=m.firstChild}else g=a;g instanceof Element&&g.setAttribute("xmlns",ti.xmlns);let p=this.elem("foreignObject",s,u,c);return p._node.appendChild(g),p}text(a){return this._node.appendChild(document.createTextNode(a)),this}empty(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}remove(){var a;return(a=this._node.parentNode)===null||a===void 0||a.removeChild(this._node),this.parent()}replace(a){var s;return(s=this._node.parentNode)===null||s===void 0||s.replaceChild(a._node,this._node),a}append(a){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&this._node.firstChild?this._node.insertBefore(a._node,this._node.firstChild):this._node.appendChild(a._node),this}classes(){let a=this._node.getAttribute("class");return a?a.trim().split(/\s+/):[]}addClass(a){return this._node.setAttribute("class",this.classes().concat(a.trim().split(/\s+/)).filter(function(s,u,c){return c.indexOf(s)===u}).join(" ")),this}removeClass(a){let s=a.trim().split(/\s+/);return this._node.setAttribute("class",this.classes().filter(u=>s.indexOf(u)===-1).join(" ")),this}removeAllClasses(){return this._node.setAttribute("class",""),this}height(){return this._node.getBoundingClientRect().height}width(){return this._node.getBoundingClientRect().width}animate(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,u=arguments.length>2?arguments[2]:void 0;return Object.keys(a).forEach(c=>{let g=a[c];Array.isArray(g)?g.forEach(p=>Ou(this,c,p,!1,u)):Ou(this,c,g,s,u)}),this}constructor(a,s,u,c,g=!1){a instanceof Element?this._node=a:(this._node=document.createElementNS(ti.svg,a),a==="svg"&&this.attr({"xmlns:ct":ti.ct})),s&&this.attr(s),u&&this.addClass(u),c&&(g&&c._node.firstChild?c._node.insertBefore(this._node,c._node.firstChild):c._node.appendChild(this._node))}};jt.Easing=Pu;function dh(o){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"100%",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"100%",u=arguments.length>3?arguments[3]:void 0;Array.from(o.querySelectorAll("svg")).filter(g=>g.getAttributeNS(ti.xmlns,"ct")).forEach(g=>o.removeChild(g));let c=new jt("svg").attr({width:a,height:s}).attr({style:"width: ".concat(a,"; height: ").concat(s,";")});return u&&c.addClass(u),o.appendChild(c.getNode()),c}function hh(o){return typeof o=="number"?{top:o,right:o,bottom:o,left:o}:o===void 0?{top:0,right:0,bottom:0,left:0}:{top:typeof o.top=="number"?o.top:0,right:typeof o.right=="number"?o.right:0,bottom:typeof o.bottom=="number"?o.bottom:0,left:typeof o.left=="number"?o.left:0}}function ph(o,a){var s,u,c,g;let p=!!(a.axisX||a.axisY),m=((s=a.axisY)===null||s===void 0?void 0:s.offset)||0,x=((u=a.axisX)===null||u===void 0?void 0:u.offset)||0,k=(c=a.axisY)===null||c===void 0?void 0:c.position,D=(g=a.axisX)===null||g===void 0?void 0:g.position,N=o.width()||No(a.width).value||0,O=o.height()||No(a.height).value||0,T=hh(a.chartPadding);N=Math.max(N,m+T.left+T.right),O=Math.max(O,x+T.top+T.bottom);let b={x1:0,x2:0,y1:0,y2:0,padding:T,width(){return this.x2-this.x1},height(){return this.y1-this.y2}};return p?(D==="start"?(b.y2=T.top+x,b.y1=Math.max(O-T.bottom,b.y2+1)):(b.y2=T.top,b.y1=Math.max(O-T.bottom-x,b.y2+1)),k==="start"?(b.x1=T.left+m,b.x2=Math.max(N-T.right,b.x1+1)):(b.x1=T.left,b.x2=Math.max(N-T.right-m,b.x1+1))):(b.x1=T.left,b.x2=Math.max(N-T.right,b.x1+1),b.y2=T.top,b.y1=Math.max(O-T.bottom,b.y2+1)),b}function gh(o,a,s,u,c,g,p,m){let x={["".concat(s.units.pos,"1")]:o,["".concat(s.units.pos,"2")]:o,["".concat(s.counterUnits.pos,"1")]:u,["".concat(s.counterUnits.pos,"2")]:u+c},k=g.elem("line",x,p.join(" "));m.emit("draw",Ze({type:"grid",axis:s,index:a,group:g,element:k},x))}function vh(o,a,s,u){let c=o.elem("rect",{x:a.x1,y:a.y2,width:a.width(),height:a.height()},s,!0);u.emit("draw",{type:"gridBackground",group:o,element:c})}function mh(o,a,s,u,c,g,p,m,x,k){let D={[c.units.pos]:o+p[c.units.pos],[c.counterUnits.pos]:p[c.counterUnits.pos],[c.units.len]:a,[c.counterUnits.len]:Math.max(0,g-10)},N=Math.round(D[c.units.len]),O=Math.round(D[c.counterUnits.len]),T=document.createElement("span");T.className=x.join(" "),T.style[c.units.len]=N+"px",T.style[c.counterUnits.len]=O+"px",T.textContent=String(u);let b=m.foreignObject(T,Ze({style:"overflow: visible;"},D));k.emit("draw",Ze({type:"label",axis:c,index:s,group:m,element:b,text:u},D))}function Iu(o,a,s){let u,c=[];function g(m){let x=u;u=ni({},o),a&&a.forEach(k=>{window.matchMedia(k[0]).matches&&(u=ni(u,k[1]))}),s&&m&&s.emit("optionsChanged",{previousOptions:x,currentOptions:u})}function p(){c.forEach(m=>m.removeEventListener("change",g))}if(window.matchMedia)a&&a.forEach(m=>{let x=window.matchMedia(m[0]);x.addEventListener("change",g),c.push(x)});else throw new Error("window.matchMedia not found! Make sure you're using a polyfill.");return g(),{removeMediaQueryListeners:p,getCurrentOptions(){return u}}}var Fo={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},yh={accuracy:3};function Ki(o,a,s,u,c,g){let p=Ze(Ze({command:c?o.toLowerCase():o.toUpperCase()},a),g?{data:g}:{});s.splice(u,0,p)}function Mo(o,a){o.forEach((s,u)=>{Fo[s.command.toLowerCase()].forEach((c,g)=>{a(s,c,u,g,o)})})}var Gt=class{static join(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2?arguments[2]:void 0,c=new Gt(s,u);for(let g=0;g<a.length;g++){let p=a[g];for(let m=0;m<p.pathElements.length;m++)c.pathElements.push(p.pathElements[m])}return c}position(a){return a!==void 0?(this.pos=Math.max(0,Math.min(this.pathElements.length,a)),this):this.pos}remove(a){return this.pathElements.splice(this.pos,a),this}move(a,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=arguments.length>3?arguments[3]:void 0;return Ki("M",{x:+a,y:+s},this.pathElements,this.pos++,u,c),this}line(a,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=arguments.length>3?arguments[3]:void 0;return Ki("L",{x:+a,y:+s},this.pathElements,this.pos++,u,c),this}curve(a,s,u,c,g,p){let m=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,x=arguments.length>7?arguments[7]:void 0;return Ki("C",{x1:+a,y1:+s,x2:+u,y2:+c,x:+g,y:+p},this.pathElements,this.pos++,m,x),this}arc(a,s,u,c,g,p,m){let x=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,k=arguments.length>8?arguments[8]:void 0;return Ki("A",{rx:a,ry:s,xAr:u,lAf:c,sf:g,x:p,y:m},this.pathElements,this.pos++,x,k),this}parse(a){let s=a.replace(/([A-Za-z])(-?[0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((c,g)=>(g.match(/[A-Za-z]/)&&c.push([]),c[c.length-1].push(g),c),[]);s[s.length-1][0].toUpperCase()==="Z"&&s.pop();let u=s.map(c=>{let g=c.shift(),p=Fo[g.toLowerCase()];return Ze({command:g},p.reduce((m,x,k)=>(m[x]=+c[k],m),{}))});return this.pathElements.splice(this.pos,0,...u),this.pos+=u.length,this}stringify(){let a=Math.pow(10,this.options.accuracy);return this.pathElements.reduce((s,u)=>{let c=Fo[u.command.toLowerCase()].map(g=>{let p=u[g];return this.options.accuracy?Math.round(p*a)/a:p});return s+u.command+c.join(",")},"")+(this.close?"Z":"")}scale(a,s){return Mo(this.pathElements,(u,c)=>{u[c]*=c[0]==="x"?a:s}),this}translate(a,s){return Mo(this.pathElements,(u,c)=>{u[c]+=c[0]==="x"?a:s}),this}transform(a){return Mo(this.pathElements,(s,u,c,g,p)=>{let m=a(s,u,c,g,p);(m||m===0)&&(s[u]=m)}),this}clone(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s=new Gt(a||this.close);return s.pos=this.pos,s.pathElements=this.pathElements.slice().map(u=>Ze({},u)),s.options=Ze({},this.options),s}splitByCommand(a){let s=[new Gt];return this.pathElements.forEach(u=>{u.command===a.toUpperCase()&&s[s.length-1].pathElements.length!==0&&s.push(new Gt),s[s.length-1].pathElements.push(u)}),s}constructor(a=!1,s){this.close=a,this.pathElements=[],this.pos=0,this.options=Ze(Ze({},yh),s)}};function Ho(o){let a=Ze({fillHoles:!1},o);return function(u,c){let g=new Gt,p=!0;for(let m=0;m<u.length;m+=2){let x=u[m],k=u[m+1],D=c[m/2];zo(D.value)!==void 0?(p?g.move(x,k,!1,D):g.line(x,k,!1,D),p=!1):a.fillHoles||(p=!0)}return g}}function xh(o){let a=Ze({fillHoles:!1},o);return function s(u,c){let g=ch(u,c,{fillHoles:a.fillHoles,increasingX:!0});if(g.length){if(g.length>1)return Gt.join(g.map(p=>s(p.pathCoordinates,p.valueData)));{if(u=g[0].pathCoordinates,c=g[0].valueData,u.length<=4)return Ho()(u,c);let p=[],m=[],x=u.length/2,k=[],D=[],N=[],O=[];for(let b=0;b<x;b++)p[b]=u[b*2],m[b]=u[b*2+1];for(let b=0;b<x-1;b++)N[b]=m[b+1]-m[b],O[b]=p[b+1]-p[b],D[b]=N[b]/O[b];k[0]=D[0],k[x-1]=D[x-2];for(let b=1;b<x-1;b++)D[b]===0||D[b-1]===0||D[b-1]>0!=D[b]>0?k[b]=0:(k[b]=3*(O[b-1]+O[b])/((2*O[b]+O[b-1])/D[b-1]+(O[b]+2*O[b-1])/D[b]),isFinite(k[b])||(k[b]=0));let T=new Gt().move(p[0],m[0],!1,c[0]);for(let b=0;b<x-1;b++)T.curve(p[b]+O[b]/3,m[b]+k[b]*O[b]/3,p[b+1]-O[b]/3,m[b+1]-k[b+1]*O[b]/3,p[b+1],m[b+1],!1,c[b+1]);return T}}else return Ho()([],[])}}var Po=class{on(a,s){let{allListeners:u,listeners:c}=this;a==="*"?u.add(s):(c.has(a)||c.set(a,new Set),c.get(a).add(s))}off(a,s){let{allListeners:u,listeners:c}=this;if(a==="*")s?u.delete(s):u.clear();else if(c.has(a)){let g=c.get(a);s?g.delete(s):g.clear(),g.size||c.delete(a)}}emit(a,s){let{allListeners:u,listeners:c}=this;c.has(a)&&c.get(a).forEach(g=>g(s)),u.forEach(g=>g(a,s))}constructor(){this.listeners=new Map,this.allListeners=new Set}},Ao=new WeakMap,Bo=class{update(a,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a&&(this.data=a||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),s&&(this.options=ni({},u?this.options:this.defaultOptions,s),!this.initializeTimeoutId)){var c;(c=this.optionsProvider)===null||c===void 0||c.removeMediaQueryListeners(),this.optionsProvider=Iu(this.options,this.responsiveOptions,this.eventEmitter)}return!this.initializeTimeoutId&&this.optionsProvider&&this.createChart(this.optionsProvider.getCurrentOptions()),this}detach(){if(this.initializeTimeoutId)window.clearTimeout(this.initializeTimeoutId);else{var a;window.removeEventListener("resize",this.resizeListener),(a=this.optionsProvider)===null||a===void 0||a.removeMediaQueryListeners()}return Ao.delete(this.container),this}on(a,s){return this.eventEmitter.on(a,s),this}off(a,s){return this.eventEmitter.off(a,s),this}initialize(){window.addEventListener("resize",this.resizeListener),this.optionsProvider=Iu(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.on("optionsChanged",()=>this.update()),this.options.plugins&&this.options.plugins.forEach(a=>{Array.isArray(a)?a[0](this,a[1]):a(this)}),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=null}constructor(a,s,u,c,g){this.data=s,this.defaultOptions=u,this.options=c,this.responsiveOptions=g,this.eventEmitter=new Po,this.resizeListener=()=>this.update(),this.initializeTimeoutId=setTimeout(()=>this.initialize(),0);let p=typeof a=="string"?document.querySelector(a):a;if(!p)throw new Error("Target element is not found");this.container=p;let m=Ao.get(p);m&&m.detach(),Ao.set(p,this)}},Hn={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}},Zi=class{createGridAndLabels(a,s,u,c){let g=this.units.pos==="x"?u.axisX:u.axisY,p=this.ticks.map((x,k)=>this.projectValue(x,k)),m=this.ticks.map(g.labelInterpolationFnc);p.forEach((x,k)=>{let D=m[k],N={x:0,y:0},O;p[k+1]?O=p[k+1]-x:O=Math.max(this.axisLength-x,this.axisLength/this.ticks.length),!(D!==""&&eh(D))&&(this.units.pos==="x"?(x=this.chartRect.x1+x,N.x=u.axisX.labelOffset.x,u.axisX.position==="start"?N.y=this.chartRect.padding.top+u.axisX.labelOffset.y+5:N.y=this.chartRect.y1+u.axisX.labelOffset.y+5):(x=this.chartRect.y1-x,N.y=u.axisY.labelOffset.y-O,u.axisY.position==="start"?N.x=this.chartRect.padding.left+u.axisY.labelOffset.x:N.x=this.chartRect.x2+u.axisY.labelOffset.x+10),g.showGrid&&gh(x,k,this,this.gridOffset,this.chartRect[this.counterUnits.len](),a,[u.classNames.grid,u.classNames[this.units.dir]],c),g.showLabel&&mh(x,O,k,D,this,g.offset,N,s,[u.classNames.label,u.classNames[this.units.dir],g.position==="start"?u.classNames[g.position]:u.classNames.end],c))})}constructor(a,s,u){this.units=a,this.chartRect=s,this.ticks=u,this.counterUnits=a===Hn.x?Hn.y:Hn.x,this.axisLength=s[this.units.rectEnd]-s[this.units.rectStart],this.gridOffset=s[this.units.rectOffset]}},Wo=class extends Zi{projectValue(a){let s=Number(zo(a,this.units.pos));return this.axisLength*(s-this.bounds.min)/this.bounds.range}constructor(a,s,u,c){let g=c.highLow||oh(s,c,a.pos),p=Vd(u[a.rectEnd]-u[a.rectStart],g,c.scaleMinSpace||20,c.onlyInteger),m={min:p.min,max:p.max};super(a,u,p.values),this.bounds=p,this.range=m}};var Ro=class extends Zi{projectValue(a,s){return this.stepLength*s}constructor(a,s,u,c){let g=c.ticks||[];super(a,u,g);let p=Math.max(1,g.length-(c.stretch?1:0));this.stepLength=this.axisLength/p,this.stretch=!!c.stretch}};function ei(o,a,s){var u;if(ht(o,"name")&&o.name&&(!((u=a.series)===null||u===void 0)&&u[o.name])){let g=(a==null?void 0:a.series[o.name])[s];return g===void 0?a[s]:g}else return a[s]}var Fu={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Tu,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Tu,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}},Ji=class extends Bo{createChart(a){let{data:s}=this,u=lh(s,a.reverseData,!0),c=dh(this.container,a.width,a.height,a.classNames.chart);this.svg=c;let g=c.elem("g").addClass(a.classNames.gridGroup),p=c.elem("g"),m=c.elem("g").addClass(a.classNames.labelGroup),x=ph(c,a),k,D;a.axisX.type===void 0?k=new Ro(Hn.x,u.series,x,Do(Ze({},a.axisX),{ticks:u.labels,stretch:a.fullWidth})):k=new a.axisX.type(Hn.x,u.series,x,a.axisX),a.axisY.type===void 0?D=new Wo(Hn.y,u.series,x,Do(Ze({},a.axisY),{high:Qi(a.high)?a.high:a.axisY.high,low:Qi(a.low)?a.low:a.axisY.low})):D=new a.axisY.type(Hn.y,u.series,x,a.axisY),k.createGridAndLabels(g,m,a,this.eventEmitter),D.createGridAndLabels(g,m,a,this.eventEmitter),a.showGridBackground&&vh(g,x,a.classNames.gridBackground,this.eventEmitter),nh(s.series,(N,O)=>{let T=p.elem("g"),b=ht(N,"name")&&N.name,A=ht(N,"className")&&N.className,F=ht(N,"meta")?N.meta:void 0;b&&T.attr({"ct:series-name":b}),F&&T.attr({"ct:meta":Nu(F)}),T.addClass([a.classNames.series,A||"".concat(a.classNames.series,"-").concat(Kd(O))].join(" "));let P=[],_=[];u.series[O].forEach((V,te)=>{let ae={x:x.x1+k.projectValue(V,te,u.series[O]),y:x.y1-D.projectValue(V,te,u.series[O])};P.push(ae.x,ae.y),_.push({value:V,valueIndex:te,meta:rh(N,te)})});let G={lineSmooth:ei(N,a,"lineSmooth"),showPoint:ei(N,a,"showPoint"),showLine:ei(N,a,"showLine"),showArea:ei(N,a,"showArea"),areaBase:ei(N,a,"areaBase")},ie;typeof G.lineSmooth=="function"?ie=G.lineSmooth:ie=G.lineSmooth?xh():Ho();let ve=ie(P,_);if(G.showPoint&&ve.pathElements.forEach(V=>{let{data:te}=V,ae=T.elem("line",{x1:V.x,y1:V.y,x2:V.x+.01,y2:V.y},a.classNames.point);if(te){let K,we;ht(te.value,"x")&&(K=te.value.x),ht(te.value,"y")&&(we=te.value.y),ae.attr({"ct:value":[K,we].filter(Qi).join(","),"ct:meta":Nu(te.meta)})}this.eventEmitter.emit("draw",{type:"point",value:te==null?void 0:te.value,index:(te==null?void 0:te.valueIndex)||0,meta:te==null?void 0:te.meta,series:N,seriesIndex:O,axisX:k,axisY:D,group:T,element:ae,x:V.x,y:V.y,chartRect:x})}),G.showLine){let V=T.elem("path",{d:ve.stringify()},a.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:u.series[O],path:ve.clone(),chartRect:x,index:O,series:N,seriesIndex:O,meta:F,axisX:k,axisY:D,group:T,element:V})}if(G.showArea&&D.range){let V=Math.max(Math.min(G.areaBase,D.range.max),D.range.min),te=x.y1-D.projectValue(V);ve.splitByCommand("M").filter(ae=>ae.pathElements.length>1).map(ae=>{let K=ae.pathElements[0],we=ae.pathElements[ae.pathElements.length-1];return ae.clone(!0).position(0).remove(1).move(K.x,te).line(K.x,K.y).position(ae.pathElements.length+1).line(we.x,te)}).forEach(ae=>{let K=T.elem("path",{d:ae.stringify()},a.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:u.series[O],path:ae.clone(),series:N,seriesIndex:O,axisX:k,axisY:D,chartRect:x,index:O,group:T,element:K,meta:F})})}},a.reverseData),this.eventEmitter.emit("created",{chartRect:x,axisX:k,axisY:D,svg:c,options:a})}constructor(a,s,u,c){super(a,s,Fu,ni({},Fu,u),c),this.data=s}};var se={escapeRegExp:function(o){return o.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")},makeDiacriticsRegExp:function(o){var a,s={a:"[a\xE1\xE0\u0103\xE2\u01CE\xE5\xE4\xE3\u0227\u0105\u0101\u1EA3\u0201\u1EA1]",b:"[b\u1E03\u1E05]",c:"[c\u0107\u0109\u010D\u010B\xE7]",d:"[d\u010F\u1E0B\u1E11\u1E0D]",e:"[e\xE9\xE8\u0115\xEA\u011B\xEB\u1EBD\u0117\u0229\u0119\u0113\u1EBB\u0205\u1EB9]",g:"[g\u01F5\u011F\u011D\u01E7\u0121\u0123\u1E21]",h:"[h\u0125\u021F\u1E27\u1E23\u1E29\u1E25]",i:"[ii\xED\xEC\u012D\xEE\u01D0\xEF\u0129\u012F\u012B\u1EC9\u0209\u1ECB\u0131]",j:"[j\u0135\u01F0]",k:"[k\u1E31\u01E9\u0137\u1E33]",l:"[l\u013A\u013E\u013C\u1E37]",m:"[m\u1E3F\u1E41\u1E43]",n:"[n\u0144\u01F9\u0148\xF1\u1E45\u0146\u1E47]",o:"[o\xF3\xF2\u014F\xF4\u01D2\xF6\u0151\xF5\u022F\u01FF\u01EB\u014D\u1ECF\u020D\u01A1\u1ECD]",p:"[p\u1E55\u1E57]",r:"[r\u0155\u0159\u1E59\u0157\u0211\u1E5B]",s:"[s\u015B\u015D\u0161\u1E61\u015F\u1E63\u0219]",t:"[t\u0165\u1E97\u1E6B\u0163\u1E6D\u021B]",u:"[u\xFA\xF9\u016D\xFB\u01D4\u016F\xFC\u0171\u0169\u0173\u016B\u1EE7\u0215\u01B0\u1EE5]",v:"[v\u1E7D\u1E7F]",w:"[w\u1E83\u1E81\u0175\u1E98\u1E85\u1E87\u1E89]",x:"[x\u1E8D\u1E8B]",y:"[y\xFD\u1EF3\u0177\u1E99\xFF\u1EF9\u1E8F\u0233\u1EF7\u1EF5]",z:"[z\u017A\u1E91\u017E\u017C\u1E93]"};for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o=o.split(a).join(s[a]),o=o.split(a.toUpperCase()).join(s[a].toUpperCase()));return o},slug:function(o){var a,s={"	":"","\r":"","!":"",'"':"","#":"",$:"","%":"","'":"-","(":"",")":"","*":"","+":"",",":"",".":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","]":"","^":"","`":"","{":"","|":"","}":"","\xA1":"","\xA3":"","\xA4":"","\xA5":"","\xA6":"","\xA7":"","\xAB":"","\xB0":"","\xBB":"","\u2018":"","\u2019":"","\u201C":"","\u201D":"","\n":"-"," ":"-","-":"-","\u2013":"-","\u2014":"-","/":"-","\\":"-",_:"-","~":"-",\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00C6:"Ae",\u00C7:"C",\u00D0:"D",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00D1:"N",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u0152:"Oe",\u0160:"S",\u00DE:"Th",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00DD:"Y",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"ae",\u00E5:"a",\u00E6:"ae","\xA2":"c",\u00E7:"c",\u00F0:"d",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00F1:"n",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"oe",\u00F8:"o",\u0153:"oe",\u0161:"s",\u00DF:"ss",\u00FE:"th",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"ue",\u00FD:"y",\u00FF:"y",\u0178:"y"};o=o.toLowerCase();for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o=o.split(a).join(s[a]));return o.replace(/[^a-z0-9-]/g,"").replace(/^-+|-+$/g,"").replace(/-+/g,"-")},validateSlug:function(o){return o.toLowerCase().replace(" ","-").replace(/[^a-z0-9-]/g,"")},debounce:function(o,a,s){var u,c,g,p=null;function m(){return u=this,c=arguments,p&&clearTimeout(p),s&&!p&&(g=o.apply(u,c)),p=setTimeout(function(){s||(g=o.apply(u,c)),p=null},a),g}return m},throttle:function(o,a){var s,u,c,g=0,p=null;function m(){var x=Date.now(),k;return g===0&&(g=x),k=g+a-x,s=this,u=arguments,k<=0||k>a?(p&&(clearTimeout(p),p=null),g=x,c=o.apply(s,u)):p||(p=setTimeout(function(){g=Date.now(),c=o.apply(s,u),p=null},k)),c}return m},outerWidth:function(o){var a=o.offsetWidth,s=getComputedStyle(o);return a+=parseInt(s.marginLeft)+parseInt(s.marginRight),a},outerHeight:function(o){var a=o.offsetHeight,s=getComputedStyle(o);return a+=parseInt(s.marginTop)+parseInt(s.marginBottom),a},toggleElement:function(o,a){var s=o.style.display||getComputedStyle(o).display;typeof a=="undefined"&&(a="block"),s==="none"?o.style.display=a:o.style.display="none"},sameArray:function(o,a){var s;if(o.length!==a.length)return!1;for(s=0;s<o.length;s++)if(o[s]!==a[s])return!1;return!0},extendObject:function(o){var a,s,u;for(o=o||{},a=1;a<arguments.length;a++){s=arguments[a];for(u in s)o[u]=s[u]}return o},serializeObject:function(o){var a,s=[];for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&s.push(encodeURIComponent(a)+"="+encodeURIComponent(o[a]));return s.join("&")},serializeForm:function(o){var a,s,u,c=[];for(s=0;s<o.elements.length;s++)if(a=o.elements[s],a.name&&!a.disabled&&a.type!=="file"&&a.type!=="reset"&&a.type!=="submit"&&a.type!=="button")if(a.type==="select-multiple")for(u=o.elements[s].options.length-1;u>=0;u--)a.options[u].selected&&c.push(encodeURIComponent(a.name)+"="+encodeURIComponent(a.options[u].value));else(a.type!=="checkbox"&&a.type!=="radio"||a.checked)&&c.push(encodeURIComponent(a.name)+"="+encodeURIComponent(a.value));return c.join("&")},triggerEvent:function(o,a){var s;try{s=new Event(a)}catch(u){s=document.createEvent("HTMLEvents"),s.initEvent(a,!0,!0)}o.dispatchEvent(s)},triggerDownload:function(o,a){var s=document.createElement("form"),u=document.createElement("input");s.action=o,s.method="post",u.type="hidden",u.name="csrf-token",u.value=a,s.appendChild(u),document.body.appendChild(s),s.submit(),document.body.removeChild(s)},longClick:function(o,a,s,u){var c;function g(){clearTimeout(c)}o.addEventListener("mousedown",function(p){var m=this;p.which!==1?g():(a.call(m,p),c=setTimeout(function(){c=setInterval(a.bind(m,p),u)},s))}),o.addEventListener("mouseout",g),window.addEventListener("mouseup",g)},firstFocusableElement:function(o){return typeof o=="undefined"&&(o=document.body),o.querySelector("button, .button, input:not([type=hidden]), select, textarea")||o},getCookies:function(){var o=[],a=document.cookie.split(";"),s,u;for(u=0;u<a.length;u++)s=a[u].split("=",2),s.length===2&&(o[s[0].trim()]=decodeURIComponent(s[1].trim()));return o},setCookie:function(o,a,s){var u=o+"="+a,c;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(u+=";"+c+"="+s[c]);document.cookie=u},getMaxSafeInteger:function(){return Number.MAX_SAFE_INTEGER||9007199254740991},toSafeInteger:function(o){var a=this.getMaxSafeInteger(),s=-a;return o>a?a:o<s?s:parseInt(o,10)||0}};function Pn(o,a){var s={container:document.body,referenceElement:document.body,position:"top",offset:{x:0,y:0},delay:500,timeout:null,removeOnMouseout:!0,removeOnClick:!1},u=a.referenceElement,c,g,p;a=se.extendObject({},s,a),u instanceof HTMLElement&&(u.tagName.toLowerCase()==="button"||u.classList.contains("button"))&&(u.addEventListener("click",x),u.addEventListener("blur",x)),a.removeOnMouseout&&u.addEventListener("mouseout",x),a.removeOnClick&&u.addEventListener("click",x);function m(){g=setTimeout(function(){var D;c=document.createElement("div"),c.className="tooltip",c.setAttribute("role","tooltip"),c.style.display="block",c.innerHTML=o,a.container.appendChild(c),D=k(c),c.style.top=D.top+"px",c.style.left=D.left+"px",a.timeout!==null&&(p=setTimeout(x,a.timeout))},a.delay)}function x(){clearTimeout(g),clearTimeout(p),c!==void 0&&a.container.contains(c)&&a.container.removeChild(c)}function k(D){var N=u.getBoundingClientRect(),O=N.top+window.pageYOffset,T=N.left+window.pageXOffset,b=(N.width-D.offsetWidth)/2,A=(N.height-D.offsetHeight)/2;switch(a.position){case"top":return{top:Math.round(O-D.offsetHeight+a.offset.y),left:Math.round(T+b+a.offset.x)};case"right":return{top:Math.round(O+A+a.offset.y),left:Math.round(T+u.offsetWidth+a.offset.x)};case"bottom":return{top:Math.round(O+u.offsetHeight+a.offset.y),left:Math.round(T+b+a.offset.x)};case"left":return{top:Math.round(O+A+a.offset.y),left:Math.round(T-D.offsetWidth+a.offset.x)};case"center":return{top:Math.round(O+A+a.offset.y),left:Math.round(T+b+a.offset.x)}}}return{show:m,remove:x}}function _o(o,a){var s={showArea:!0,fullWidth:!0,scaleMinSpace:20,divisor:5,chartPadding:20,lineSmooth:!1,low:0,axisX:{showGrid:!1,labelOffset:{x:0,y:10}},axisY:{onlyInteger:!0,offset:15,labelOffset:{x:0,y:5}}},u=new Ji(o,a,s);u.container.addEventListener("mouseover",function(c){var g,p,m;c.target.getAttribute("class")==="ct-point"&&(g={x:0,y:-8},navigator.userAgent.indexOf("Firefox")!==-1&&(m=parseFloat(getComputedStyle(c.target)["stroke-width"]),g.x+=m/2,g.y+=m/2),p=new Pn(c.target.getAttribute("ct:value"),{referenceElement:c.target,offset:g}),p.show())})}var jo={},at={pass:function(o,a){var s;if(o in jo){a(jo[o]);return}s=new XMLHttpRequest,s.onload=function(){var u=this.status===200?this.response:"";u!==""&&(jo[o]=u),a(u)},s.open("GET",Formwork.config.baseUri+"assets/icons/svg/"+o+".svg"),s.send()},inject:function(o,a,s){typeof s=="undefined"&&(s="afterBegin"),this.pass(o,function(u){a.insertAdjacentHTML(s,u)})}};function Ut(o,a,s){var u={interval:5e3,icon:null,newestOnTop:!0,fadeOutDelay:300,mouseleaveDelay:1e3},c=$(".notification-container"),g,p;s=se.extendObject({},u,s);function m(D,N,O){c||(c=document.createElement("div"),c.className="notification-container",document.body.appendChild(c)),g=document.createElement("div"),g.className="notification notification-"+N,g.innerHTML=D,s.newestOnTop&&c.childNodes.length>0?c.insertBefore(g,c.childNodes[0]):c.appendChild(g),p=setTimeout(k,O),g.addEventListener("click",k),g.addEventListener("mouseenter",function(){clearTimeout(p)}),g.addEventListener("mouseleave",function(){p=setTimeout(k,s.mouseleaveDelay)})}function x(){s.icon!==null?at.pass(s.icon,function(D){m(o,a,s.interval),g.insertAdjacentHTML("afterBegin",D)}):m(o,a,s.interval)}function k(){g.classList.add("fadeout"),setTimeout(function(){g&&g.parentNode&&c.removeChild(g),c&&c.childNodes.length<1&&(c.parentNode&&document.body.removeChild(c),c=null)},s.fadeOutDelay)}return{show:x,remove:k}}function on(o,a){var s=new XMLHttpRequest,u,c,g;return s.open(o.method,o.url,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(se.serializeObject(o.data)),typeof a=="function"&&(u=function(){c=JSON.parse(this.response),g=c.code||this.status,parseInt(g)===400?location.reload():a(c,s)},s.onload=u,s.onerror=u),s}var Bu={init:function(){var o=$("[data-command=clear-cache]"),a=$("[data-command=make-backup]");o&&o.addEventListener("click",function(){on({method:"POST",url:Formwork.config.baseUri+"cache/clear/",data:{"csrf-token":$("meta[name=csrf-token]").getAttribute("content")}},function(s){var u=new Ut(s.message,s.status,{icon:"check-circle"});u.show()})}),a&&a.addEventListener("click",function(){var s=this;s.setAttribute("disabled",""),on({method:"POST",url:Formwork.config.baseUri+"backup/make/",data:{"csrf-token":$("meta[name=csrf-token]").getAttribute("content")}},function(u){var c=new Ut(u.message,u.status,{icon:"check-circle"});c.show(),setTimeout(function(){u.status==="success"&&se.triggerDownload(u.data.uri,$("meta[name=csrf-token]").getAttribute("content")),s.removeAttribute("disabled")},1e3)})})}};var Wu={init:function(){$(".dropdown")&&document.addEventListener("click",function(o){var a=o.target.closest(".dropdown-button"),s,u;a&&(s=document.getElementById(a.getAttribute("data-dropdown")),u=getComputedStyle(s).display!=="none",o.preventDefault()),$$(".dropdown-menu").forEach(function(c){c.style.display=""}),s&&!u&&(s.style.display="block")})}};function Ru(o,a){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);a&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable})),s.push.apply(s,u)}return s}function qt(o){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?Ru(Object(s),!0).forEach(function(u){bh(o,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):Ru(Object(s)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(s,u))})}return o}function ra(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ra=function(a){return typeof a}:ra=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ra(o)}function bh(o,a,s){return a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,o}function sn(){return sn=Object.assign||function(o){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])}return o},sn.apply(this,arguments)}function wh(o,a){if(o==null)return{};var s={},u=Object.keys(o),c,g;for(g=0;g<u.length;g++)c=u[g],!(a.indexOf(c)>=0)&&(s[c]=o[c]);return s}function Sh(o,a){if(o==null)return{};var s=wh(o,a),u,c;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(o);for(c=0;c<g.length;c++)u=g[c],!(a.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(o,u)&&(s[u]=o[u])}return s}var kh="1.15.0";function ln(o){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(o)}var un=ln(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ci=ln(/Edge/i),zu=ln(/firefox/i),oi=ln(/safari/i)&&!ln(/chrome/i)&&!ln(/android/i),Xu=ln(/iP(ad|od|hone)/i),Ku=ln(/chrome/i)&&ln(/android/i),Qu={capture:!1,passive:!1};function ke(o,a,s){o.addEventListener(a,s,!un&&Qu)}function xe(o,a,s){o.removeEventListener(a,s,!un&&Qu)}function sa(o,a){if(a){if(a[0]===">"&&(a=a.substring(1)),o)try{if(o.matches)return o.matches(a);if(o.msMatchesSelector)return o.msMatchesSelector(a);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(a)}catch(s){return!1}return!1}}function Ch(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function $t(o,a,s,u){if(o){s=s||document;do{if(a!=null&&(a[0]===">"?o.parentNode===s&&sa(o,a):sa(o,a))||u&&o===s)return o;if(o===s)break}while(o=Ch(o))}return null}var _u=/\s+/g;function wt(o,a,s){if(o&&a)if(o.classList)o.classList[s?"add":"remove"](a);else{var u=(" "+o.className+" ").replace(_u," ").replace(" "+a+" "," ");o.className=(u+(s?" "+a:"")).replace(_u," ")}}function fe(o,a,s){var u=o&&o.style;if(u){if(s===void 0)return document.defaultView&&document.defaultView.getComputedStyle?s=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(s=o.currentStyle),a===void 0?s:s[a];!(a in u)&&a.indexOf("webkit")===-1&&(a="-webkit-"+a),u[a]=s+(typeof s=="string"?"":"px")}}function mr(o,a){var s="";if(typeof o=="string")s=o;else do{var u=fe(o,"transform");u&&u!=="none"&&(s=u+" "+s)}while(!a&&(o=o.parentNode));var c=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return c&&new c(s)}function Zu(o,a,s){if(o){var u=o.getElementsByTagName(a),c=0,g=u.length;if(s)for(;c<g;c++)s(u[c],c);return u}return[]}function Yt(){var o=document.scrollingElement;return o||document.documentElement}function Je(o,a,s,u,c){if(!(!o.getBoundingClientRect&&o!==window)){var g,p,m,x,k,D,N;if(o!==window&&o.parentNode&&o!==Yt()?(g=o.getBoundingClientRect(),p=g.top,m=g.left,x=g.bottom,k=g.right,D=g.height,N=g.width):(p=0,m=0,x=window.innerHeight,k=window.innerWidth,D=window.innerHeight,N=window.innerWidth),(a||s)&&o!==window&&(c=c||o.parentNode,!un))do if(c&&c.getBoundingClientRect&&(fe(c,"transform")!=="none"||s&&fe(c,"position")!=="static")){var O=c.getBoundingClientRect();p-=O.top+parseInt(fe(c,"border-top-width")),m-=O.left+parseInt(fe(c,"border-left-width")),x=p+g.height,k=m+g.width;break}while(c=c.parentNode);if(u&&o!==window){var T=mr(c||o),b=T&&T.a,A=T&&T.d;T&&(p/=A,m/=b,N/=b,D/=A,x=p+D,k=m+N)}return{top:p,left:m,bottom:x,right:k,width:N,height:D}}}function ju(o,a,s){for(var u=wn(o,!0),c=Je(o)[a];u;){var g=Je(u)[s],p=void 0;if(s==="top"||s==="left"?p=c>=g:p=c<=g,!p)return u;if(u===Yt())break;u=wn(u,!1)}return!1}function yr(o,a,s,u){for(var c=0,g=0,p=o.children;g<p.length;){if(p[g].style.display!=="none"&&p[g]!==ue.ghost&&(u||p[g]!==ue.dragged)&&$t(p[g],s.draggable,o,!1)){if(c===a)return p[g];c++}g++}return null}function nl(o,a){for(var s=o.lastElementChild;s&&(s===ue.ghost||fe(s,"display")==="none"||a&&!sa(s,a));)s=s.previousElementSibling;return s||null}function Lt(o,a){var s=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==ue.clone&&(!a||sa(o,a))&&s++;return s}function Gu(o){var a=0,s=0,u=Yt();if(o)do{var c=mr(o),g=c.a,p=c.d;a+=o.scrollLeft*g,s+=o.scrollTop*p}while(o!==u&&(o=o.parentNode));return[a,s]}function Eh(o,a){for(var s in o)if(o.hasOwnProperty(s)){for(var u in a)if(a.hasOwnProperty(u)&&a[u]===o[s][u])return Number(s)}return-1}function wn(o,a){if(!o||!o.getBoundingClientRect)return Yt();var s=o,u=!1;do if(s.clientWidth<s.scrollWidth||s.clientHeight<s.scrollHeight){var c=fe(s);if(s.clientWidth<s.scrollWidth&&(c.overflowX=="auto"||c.overflowX=="scroll")||s.clientHeight<s.scrollHeight&&(c.overflowY=="auto"||c.overflowY=="scroll")){if(!s.getBoundingClientRect||s===document.body)return Yt();if(u||a)return s;u=!0}}while(s=s.parentNode);return Yt()}function Lh(o,a){if(o&&a)for(var s in a)a.hasOwnProperty(s)&&(o[s]=a[s]);return o}function Go(o,a){return Math.round(o.top)===Math.round(a.top)&&Math.round(o.left)===Math.round(a.left)&&Math.round(o.height)===Math.round(a.height)&&Math.round(o.width)===Math.round(a.width)}var li;function Ju(o,a){return function(){if(!li){var s=arguments,u=this;s.length===1?o.call(u,s[0]):o.apply(u,s),li=setTimeout(function(){li=void 0},a)}}}function Dh(){clearTimeout(li),li=void 0}function Vu(o,a,s){o.scrollLeft+=a,o.scrollTop+=s}function ef(o){var a=window.Polymer,s=window.jQuery||window.Zepto;return a&&a.dom?a.dom(o).cloneNode(!0):s?s(o).clone(!0)[0]:o.cloneNode(!0)}var kt="Sortable"+new Date().getTime();function Th(){var o=[],a;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var u=[].slice.call(this.el.children);u.forEach(function(c){if(!(fe(c,"display")==="none"||c===ue.ghost)){o.push({target:c,rect:Je(c)});var g=qt({},o[o.length-1].rect);if(c.thisAnimationDuration){var p=mr(c,!0);p&&(g.top-=p.f,g.left-=p.e)}c.fromRect=g}})}},addAnimationState:function(u){o.push(u)},removeAnimationState:function(u){o.splice(Eh(o,{target:u}),1)},animateAll:function(u){var c=this;if(!this.options.animation){clearTimeout(a),typeof u=="function"&&u();return}var g=!1,p=0;o.forEach(function(m){var x=0,k=m.target,D=k.fromRect,N=Je(k),O=k.prevFromRect,T=k.prevToRect,b=m.rect,A=mr(k,!0);A&&(N.top-=A.f,N.left-=A.e),k.toRect=N,k.thisAnimationDuration&&Go(O,N)&&!Go(D,N)&&(b.top-N.top)/(b.left-N.left)===(D.top-N.top)/(D.left-N.left)&&(x=Ah(b,O,T,c.options)),Go(N,D)||(k.prevFromRect=D,k.prevToRect=N,x||(x=c.options.animation),c.animate(k,b,N,x)),x&&(g=!0,p=Math.max(p,x),clearTimeout(k.animationResetTimer),k.animationResetTimer=setTimeout(function(){k.animationTime=0,k.prevFromRect=null,k.fromRect=null,k.prevToRect=null,k.thisAnimationDuration=null},x),k.thisAnimationDuration=x)}),clearTimeout(a),g?a=setTimeout(function(){typeof u=="function"&&u()},p):typeof u=="function"&&u(),o=[]},animate:function(u,c,g,p){if(p){fe(u,"transition",""),fe(u,"transform","");var m=mr(this.el),x=m&&m.a,k=m&&m.d,D=(c.left-g.left)/(x||1),N=(c.top-g.top)/(k||1);u.animatingX=!!D,u.animatingY=!!N,fe(u,"transform","translate3d("+D+"px,"+N+"px,0)"),this.forRepaintDummy=Mh(u),fe(u,"transition","transform "+p+"ms"+(this.options.easing?" "+this.options.easing:"")),fe(u,"transform","translate3d(0,0,0)"),typeof u.animated=="number"&&clearTimeout(u.animated),u.animated=setTimeout(function(){fe(u,"transition",""),fe(u,"transform",""),u.animated=!1,u.animatingX=!1,u.animatingY=!1},p)}}}}function Mh(o){return o.offsetWidth}function Ah(o,a,s,u){return Math.sqrt(Math.pow(a.top-o.top,2)+Math.pow(a.left-o.left,2))/Math.sqrt(Math.pow(a.top-s.top,2)+Math.pow(a.left-s.left,2))*u.animation}var hr=[],Uo={initializeByDefault:!0},di={mount:function(a){for(var s in Uo)Uo.hasOwnProperty(s)&&!(s in a)&&(a[s]=Uo[s]);hr.forEach(function(u){if(u.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once")}),hr.push(a)},pluginEvent:function(a,s,u){var c=this;this.eventCanceled=!1,u.cancel=function(){c.eventCanceled=!0};var g=a+"Global";hr.forEach(function(p){s[p.pluginName]&&(s[p.pluginName][g]&&s[p.pluginName][g](qt({sortable:s},u)),s.options[p.pluginName]&&s[p.pluginName][a]&&s[p.pluginName][a](qt({sortable:s},u)))})},initializePlugins:function(a,s,u,c){hr.forEach(function(m){var x=m.pluginName;if(!(!a.options[x]&&!m.initializeByDefault)){var k=new m(a,s,a.options);k.sortable=a,k.options=a.options,a[x]=k,sn(u,k.defaults)}});for(var g in a.options)if(a.options.hasOwnProperty(g)){var p=this.modifyOption(a,g,a.options[g]);typeof p!="undefined"&&(a.options[g]=p)}},getEventProperties:function(a,s){var u={};return hr.forEach(function(c){typeof c.eventProperties=="function"&&sn(u,c.eventProperties.call(s[c.pluginName],a))}),u},modifyOption:function(a,s,u){var c;return hr.forEach(function(g){a[g.pluginName]&&g.optionListeners&&typeof g.optionListeners[s]=="function"&&(c=g.optionListeners[s].call(a[g.pluginName],u))}),c}};function Nh(o){var a=o.sortable,s=o.rootEl,u=o.name,c=o.targetEl,g=o.cloneEl,p=o.toEl,m=o.fromEl,x=o.oldIndex,k=o.newIndex,D=o.oldDraggableIndex,N=o.newDraggableIndex,O=o.originalEvent,T=o.putSortable,b=o.extraEventProperties;if(a=a||s&&s[kt],!!a){var A,F=a.options,P="on"+u.charAt(0).toUpperCase()+u.substr(1);window.CustomEvent&&!un&&!ci?A=new CustomEvent(u,{bubbles:!0,cancelable:!0}):(A=document.createEvent("Event"),A.initEvent(u,!0,!0)),A.to=p||s,A.from=m||s,A.item=c||s,A.clone=g,A.oldIndex=x,A.newIndex=k,A.oldDraggableIndex=D,A.newDraggableIndex=N,A.originalEvent=O,A.pullMode=T?T.lastPutMode:void 0;var _=qt(qt({},b),di.getEventProperties(u,a));for(var G in _)A[G]=_[G];s&&s.dispatchEvent(A),F[P]&&F[P].call(a,A)}}var Oh=["evt"],yt=function(a,s){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=u.evt,g=Sh(u,Oh);di.pluginEvent.bind(ue)(a,s,qt({dragEl:X,parentEl:Be,ghostEl:ge,rootEl:Ie,nextEl:Rn,lastDownEl:ia,cloneEl:He,cloneHidden:bn,dragStarted:ri,putSortable:nt,activeSortable:ue.active,originalEvent:c,oldIndex:vr,oldDraggableIndex:si,newIndex:St,newDraggableIndex:xn,hideGhostForTarget:af,unhideGhostForTarget:of,cloneNowHidden:function(){bn=!0},cloneNowShown:function(){bn=!1},dispatchSortableEvent:function(m){pt({sortable:s,name:m,originalEvent:c})}},g))};function pt(o){Nh(qt({putSortable:nt,cloneEl:He,targetEl:X,rootEl:Ie,oldIndex:vr,oldDraggableIndex:si,newIndex:St,newDraggableIndex:xn},o))}var X,Be,ge,Ie,Rn,ia,He,bn,vr,St,si,xn,Vi,nt,gr=!1,ua=!1,fa=[],Bn,Nt,$o,Yo,Uu,$u,ri,pr,ui,fi=!1,ea=!1,aa,ot,qo=[],Jo=!1,ca=[],ha=typeof document!="undefined",ta=Xu,Yu=ci||un?"cssFloat":"float",Ih=ha&&!Ku&&!Xu&&"draggable"in document.createElement("div"),tf=function(){if(ha){if(un)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),nf=function(a,s){var u=fe(a),c=parseInt(u.width)-parseInt(u.paddingLeft)-parseInt(u.paddingRight)-parseInt(u.borderLeftWidth)-parseInt(u.borderRightWidth),g=yr(a,0,s),p=yr(a,1,s),m=g&&fe(g),x=p&&fe(p),k=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+Je(g).width,D=x&&parseInt(x.marginLeft)+parseInt(x.marginRight)+Je(p).width;if(u.display==="flex")return u.flexDirection==="column"||u.flexDirection==="column-reverse"?"vertical":"horizontal";if(u.display==="grid")return u.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(g&&m.float&&m.float!=="none"){var N=m.float==="left"?"left":"right";return p&&(x.clear==="both"||x.clear===N)?"vertical":"horizontal"}return g&&(m.display==="block"||m.display==="flex"||m.display==="table"||m.display==="grid"||k>=c&&u[Yu]==="none"||p&&u[Yu]==="none"&&k+D>c)?"vertical":"horizontal"},Fh=function(a,s,u){var c=u?a.left:a.top,g=u?a.right:a.bottom,p=u?a.width:a.height,m=u?s.left:s.top,x=u?s.right:s.bottom,k=u?s.width:s.height;return c===m||g===x||c+p/2===m+k/2},Hh=function(a,s){var u;return fa.some(function(c){var g=c[kt].options.emptyInsertThreshold;if(!(!g||nl(c))){var p=Je(c),m=a>=p.left-g&&a<=p.right+g,x=s>=p.top-g&&s<=p.bottom+g;if(m&&x)return u=c}}),u},rf=function(a){function s(g,p){return function(m,x,k,D){var N=m.options.group.name&&x.options.group.name&&m.options.group.name===x.options.group.name;if(g==null&&(p||N))return!0;if(g==null||g===!1)return!1;if(p&&g==="clone")return g;if(typeof g=="function")return s(g(m,x,k,D),p)(m,x,k,D);var O=(p?m:x).options.group.name;return g===!0||typeof g=="string"&&g===O||g.join&&g.indexOf(O)>-1}}var u={},c=a.group;(!c||ra(c)!="object")&&(c={name:c}),u.name=c.name,u.checkPull=s(c.pull,!0),u.checkPut=s(c.put),u.revertClone=c.revertClone,a.group=u},af=function(){!tf&&ge&&fe(ge,"display","none")},of=function(){!tf&&ge&&fe(ge,"display","")};ha&&!Ku&&document.addEventListener("click",function(o){if(ua)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),ua=!1,!1},!0);var Wn=function(a){if(X){a=a.touches?a.touches[0]:a;var s=Hh(a.clientX,a.clientY);if(s){var u={};for(var c in a)a.hasOwnProperty(c)&&(u[c]=a[c]);u.target=u.rootEl=s,u.preventDefault=void 0,u.stopPropagation=void 0,s[kt]._onDragOver(u)}}},Ph=function(a){X&&X.parentNode[kt]._isOutsideThisEl(a.target)};function ue(o,a){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=a=sn({},a),o[kt]=this;var s={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return nf(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(p,m){p.setData("Text",m.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ue.supportPointer!==!1&&"PointerEvent"in window&&!oi,emptyInsertThreshold:5};di.initializePlugins(this,o,s);for(var u in s)!(u in a)&&(a[u]=s[u]);rf(a);for(var c in this)c.charAt(0)==="_"&&typeof this[c]=="function"&&(this[c]=this[c].bind(this));this.nativeDraggable=a.forceFallback?!1:Ih,this.nativeDraggable&&(this.options.touchStartThreshold=1),a.supportPointer?ke(o,"pointerdown",this._onTapStart):(ke(o,"mousedown",this._onTapStart),ke(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(ke(o,"dragover",this),ke(o,"dragenter",this)),fa.push(this.el),a.store&&a.store.get&&this.sort(a.store.get(this)||[]),sn(this,Th())}ue.prototype={constructor:ue,_isOutsideThisEl:function(a){!this.el.contains(a)&&a!==this.el&&(pr=null)},_getDirection:function(a,s){return typeof this.options.direction=="function"?this.options.direction.call(this,a,s,X):this.options.direction},_onTapStart:function(a){if(a.cancelable){var s=this,u=this.el,c=this.options,g=c.preventOnFilter,p=a.type,m=a.touches&&a.touches[0]||a.pointerType&&a.pointerType==="touch"&&a,x=(m||a).target,k=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||x,D=c.filter;if(Uh(u),!X&&!(/mousedown|pointerdown/.test(p)&&a.button!==0||c.disabled)&&!k.isContentEditable&&!(!this.nativeDraggable&&oi&&x&&x.tagName.toUpperCase()==="SELECT")&&(x=$t(x,c.draggable,u,!1),!(x&&x.animated)&&ia!==x)){if(vr=Lt(x),si=Lt(x,c.draggable),typeof D=="function"){if(D.call(this,a,x,this)){pt({sortable:s,rootEl:k,name:"filter",targetEl:x,toEl:u,fromEl:u}),yt("filter",s,{evt:a}),g&&a.cancelable&&a.preventDefault();return}}else if(D&&(D=D.split(",").some(function(N){if(N=$t(k,N.trim(),u,!1),N)return pt({sortable:s,rootEl:N,name:"filter",targetEl:x,fromEl:u,toEl:u}),yt("filter",s,{evt:a}),!0}),D)){g&&a.cancelable&&a.preventDefault();return}c.handle&&!$t(k,c.handle,u,!1)||this._prepareDragStart(a,m,x)}}},_prepareDragStart:function(a,s,u){var c=this,g=c.el,p=c.options,m=g.ownerDocument,x;if(u&&!X&&u.parentNode===g){var k=Je(u);if(Ie=g,X=u,Be=X.parentNode,Rn=X.nextSibling,ia=u,Vi=p.group,ue.dragged=X,Bn={target:X,clientX:(s||a).clientX,clientY:(s||a).clientY},Uu=Bn.clientX-k.left,$u=Bn.clientY-k.top,this._lastX=(s||a).clientX,this._lastY=(s||a).clientY,X.style["will-change"]="all",x=function(){if(yt("delayEnded",c,{evt:a}),ue.eventCanceled){c._onDrop();return}c._disableDelayedDragEvents(),!zu&&c.nativeDraggable&&(X.draggable=!0),c._triggerDragStart(a,s),pt({sortable:c,name:"choose",originalEvent:a}),wt(X,p.chosenClass,!0)},p.ignore.split(",").forEach(function(D){Zu(X,D.trim(),Xo)}),ke(m,"dragover",Wn),ke(m,"mousemove",Wn),ke(m,"touchmove",Wn),ke(m,"mouseup",c._onDrop),ke(m,"touchend",c._onDrop),ke(m,"touchcancel",c._onDrop),zu&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),yt("delayStart",this,{evt:a}),p.delay&&(!p.delayOnTouchOnly||s)&&(!this.nativeDraggable||!(ci||un))){if(ue.eventCanceled){this._onDrop();return}ke(m,"mouseup",c._disableDelayedDrag),ke(m,"touchend",c._disableDelayedDrag),ke(m,"touchcancel",c._disableDelayedDrag),ke(m,"mousemove",c._delayedDragTouchMoveHandler),ke(m,"touchmove",c._delayedDragTouchMoveHandler),p.supportPointer&&ke(m,"pointermove",c._delayedDragTouchMoveHandler),c._dragStartTimer=setTimeout(x,p.delay)}else x()}},_delayedDragTouchMoveHandler:function(a){var s=a.touches?a.touches[0]:a;Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&Xo(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;xe(a,"mouseup",this._disableDelayedDrag),xe(a,"touchend",this._disableDelayedDrag),xe(a,"touchcancel",this._disableDelayedDrag),xe(a,"mousemove",this._delayedDragTouchMoveHandler),xe(a,"touchmove",this._delayedDragTouchMoveHandler),xe(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,s){s=s||a.pointerType=="touch"&&a,!this.nativeDraggable||s?this.options.supportPointer?ke(document,"pointermove",this._onTouchMove):s?ke(document,"touchmove",this._onTouchMove):ke(document,"mousemove",this._onTouchMove):(ke(X,"dragend",this),ke(Ie,"dragstart",this._onDragStart));try{document.selection?oa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(u){}},_dragStarted:function(a,s){if(gr=!1,Ie&&X){yt("dragStarted",this,{evt:s}),this.nativeDraggable&&ke(document,"dragover",Ph);var u=this.options;!a&&wt(X,u.dragClass,!1),wt(X,u.ghostClass,!0),ue.active=this,a&&this._appendGhost(),pt({sortable:this,name:"start",originalEvent:s})}else this._nulling()},_emulateDragOver:function(){if(Nt){this._lastX=Nt.clientX,this._lastY=Nt.clientY,af();for(var a=document.elementFromPoint(Nt.clientX,Nt.clientY),s=a;a&&a.shadowRoot&&(a=a.shadowRoot.elementFromPoint(Nt.clientX,Nt.clientY),a!==s);)s=a;if(X.parentNode[kt]._isOutsideThisEl(a),s)do{if(s[kt]){var u=void 0;if(u=s[kt]._onDragOver({clientX:Nt.clientX,clientY:Nt.clientY,target:a,rootEl:s}),u&&!this.options.dragoverBubble)break}a=s}while(s=s.parentNode);of()}},_onTouchMove:function(a){if(Bn){var s=this.options,u=s.fallbackTolerance,c=s.fallbackOffset,g=a.touches?a.touches[0]:a,p=ge&&mr(ge,!0),m=ge&&p&&p.a,x=ge&&p&&p.d,k=ta&&ot&&Gu(ot),D=(g.clientX-Bn.clientX+c.x)/(m||1)+(k?k[0]-qo[0]:0)/(m||1),N=(g.clientY-Bn.clientY+c.y)/(x||1)+(k?k[1]-qo[1]:0)/(x||1);if(!ue.active&&!gr){if(u&&Math.max(Math.abs(g.clientX-this._lastX),Math.abs(g.clientY-this._lastY))<u)return;this._onDragStart(a,!0)}if(ge){p?(p.e+=D-($o||0),p.f+=N-(Yo||0)):p={a:1,b:0,c:0,d:1,e:D,f:N};var O="matrix(".concat(p.a,",").concat(p.b,",").concat(p.c,",").concat(p.d,",").concat(p.e,",").concat(p.f,")");fe(ge,"webkitTransform",O),fe(ge,"mozTransform",O),fe(ge,"msTransform",O),fe(ge,"transform",O),$o=D,Yo=N,Nt=g}a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!ge){var a=this.options.fallbackOnBody?document.body:Ie,s=Je(X,!0,ta,!0,a),u=this.options;if(ta){for(ot=a;fe(ot,"position")==="static"&&fe(ot,"transform")==="none"&&ot!==document;)ot=ot.parentNode;ot!==document.body&&ot!==document.documentElement?(ot===document&&(ot=Yt()),s.top+=ot.scrollTop,s.left+=ot.scrollLeft):ot=Yt(),qo=Gu(ot)}ge=X.cloneNode(!0),wt(ge,u.ghostClass,!1),wt(ge,u.fallbackClass,!0),wt(ge,u.dragClass,!0),fe(ge,"transition",""),fe(ge,"transform",""),fe(ge,"box-sizing","border-box"),fe(ge,"margin",0),fe(ge,"top",s.top),fe(ge,"left",s.left),fe(ge,"width",s.width),fe(ge,"height",s.height),fe(ge,"opacity","0.8"),fe(ge,"position",ta?"absolute":"fixed"),fe(ge,"zIndex","100000"),fe(ge,"pointerEvents","none"),ue.ghost=ge,a.appendChild(ge),fe(ge,"transform-origin",Uu/parseInt(ge.style.width)*100+"% "+$u/parseInt(ge.style.height)*100+"%")}},_onDragStart:function(a,s){var u=this,c=a.dataTransfer,g=u.options;if(yt("dragStart",this,{evt:a}),ue.eventCanceled){this._onDrop();return}yt("setupClone",this),ue.eventCanceled||(He=ef(X),He.removeAttribute("id"),He.draggable=!1,He.style["will-change"]="",this._hideClone(),wt(He,this.options.chosenClass,!1),ue.clone=He),u.cloneId=oa(function(){yt("clone",u),!ue.eventCanceled&&(u.options.removeCloneOnHide||Ie.insertBefore(He,X),u._hideClone(),pt({sortable:u,name:"clone"}))}),!s&&wt(X,g.dragClass,!0),s?(ua=!0,u._loopId=setInterval(u._emulateDragOver,50)):(xe(document,"mouseup",u._onDrop),xe(document,"touchend",u._onDrop),xe(document,"touchcancel",u._onDrop),c&&(c.effectAllowed="move",g.setData&&g.setData.call(u,c,X)),ke(document,"drop",u),fe(X,"transform","translateZ(0)")),gr=!0,u._dragStartId=oa(u._dragStarted.bind(u,s,a)),ke(document,"selectstart",u),ri=!0,oi&&fe(document.body,"user-select","none")},_onDragOver:function(a){var s=this.el,u=a.target,c,g,p,m=this.options,x=m.group,k=ue.active,D=Vi===x,N=m.sort,O=nt||k,T,b=this,A=!1;if(Jo)return;function F(Te,It){yt(Te,b,qt({evt:a,isOwner:D,axis:T?"vertical":"horizontal",revert:p,dragRect:c,targetRect:g,canSort:N,fromSortable:O,target:u,completed:_,onMove:function(y,ee){return na(Ie,s,X,c,y,Je(y),a,ee)},changed:G},It))}function P(){F("dragOverAnimationCapture"),b.captureAnimationState(),b!==O&&O.captureAnimationState()}function _(Te){return F("dragOverCompleted",{insertion:Te}),Te&&(D?k._hideClone():k._showClone(b),b!==O&&(wt(X,nt?nt.options.ghostClass:k.options.ghostClass,!1),wt(X,m.ghostClass,!0)),nt!==b&&b!==ue.active?nt=b:b===ue.active&&nt&&(nt=null),O===b&&(b._ignoreWhileAnimating=u),b.animateAll(function(){F("dragOverAnimationComplete"),b._ignoreWhileAnimating=null}),b!==O&&(O.animateAll(),O._ignoreWhileAnimating=null)),(u===X&&!X.animated||u===s&&!u.animated)&&(pr=null),!m.dragoverBubble&&!a.rootEl&&u!==document&&(X.parentNode[kt]._isOutsideThisEl(a.target),!Te&&Wn(a)),!m.dragoverBubble&&a.stopPropagation&&a.stopPropagation(),A=!0}function G(){St=Lt(X),xn=Lt(X,m.draggable),pt({sortable:b,name:"change",toEl:s,newIndex:St,newDraggableIndex:xn,originalEvent:a})}if(a.preventDefault!==void 0&&a.cancelable&&a.preventDefault(),u=$t(u,m.draggable,s,!0),F("dragOver"),ue.eventCanceled)return A;if(X.contains(a.target)||u.animated&&u.animatingX&&u.animatingY||b._ignoreWhileAnimating===u)return _(!1);if(ua=!1,k&&!m.disabled&&(D?N||(p=Be!==Ie):nt===this||(this.lastPutMode=Vi.checkPull(this,k,X,a))&&x.checkPut(this,k,X,a))){if(T=this._getDirection(a,u)==="vertical",c=Je(X),F("dragOverValid"),ue.eventCanceled)return A;if(p)return Be=Ie,P(),this._hideClone(),F("revert"),ue.eventCanceled||(Rn?Ie.insertBefore(X,Rn):Ie.appendChild(X)),_(!0);var ie=nl(s,m.draggable);if(!ie||zh(a,T,this)&&!ie.animated){if(ie===X)return _(!1);if(ie&&s===a.target&&(u=ie),u&&(g=Je(u)),na(Ie,s,X,c,u,g,a,!!u)!==!1)return P(),ie&&ie.nextSibling?s.insertBefore(X,ie.nextSibling):s.appendChild(X),Be=s,G(),_(!0)}else if(ie&&Rh(a,T,this)){var ve=yr(s,0,m,!0);if(ve===X)return _(!1);if(u=ve,g=Je(u),na(Ie,s,X,c,u,g,a,!1)!==!1)return P(),s.insertBefore(X,ve),Be=s,G(),_(!0)}else if(u.parentNode===s){g=Je(u);var V=0,te,ae=X.parentNode!==s,K=!Fh(X.animated&&X.toRect||c,u.animated&&u.toRect||g,T),we=T?"top":"left",j=ju(u,"top","top")||ju(X,"top","top"),U=j?j.scrollTop:void 0;pr!==u&&(te=g[we],fi=!1,ea=!K&&m.invertSwap||ae),V=_h(a,u,g,T,K?1:m.swapThreshold,m.invertedSwapThreshold==null?m.swapThreshold:m.invertedSwapThreshold,ea,pr===u);var E;if(V!==0){var R=Lt(X);do R-=V,E=Be.children[R];while(E&&(fe(E,"display")==="none"||E===ge))}if(V===0||E===u)return _(!1);pr=u,ui=V;var B=u.nextElementSibling,J=!1;J=V===1;var ye=na(Ie,s,X,c,u,g,a,J);if(ye!==!1)return(ye===1||ye===-1)&&(J=ye===1),Jo=!0,setTimeout(Wh,30),P(),J&&!B?s.appendChild(X):u.parentNode.insertBefore(X,J?B:u),j&&Vu(j,0,U-j.scrollTop),Be=X.parentNode,te!==void 0&&!ea&&(aa=Math.abs(te-Je(u)[we])),G(),_(!0)}if(s.contains(X))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){xe(document,"mousemove",this._onTouchMove),xe(document,"touchmove",this._onTouchMove),xe(document,"pointermove",this._onTouchMove),xe(document,"dragover",Wn),xe(document,"mousemove",Wn),xe(document,"touchmove",Wn)},_offUpEvents:function(){var a=this.el.ownerDocument;xe(a,"mouseup",this._onDrop),xe(a,"touchend",this._onDrop),xe(a,"pointerup",this._onDrop),xe(a,"touchcancel",this._onDrop),xe(document,"selectstart",this)},_onDrop:function(a){var s=this.el,u=this.options;if(St=Lt(X),xn=Lt(X,u.draggable),yt("drop",this,{evt:a}),Be=X&&X.parentNode,St=Lt(X),xn=Lt(X,u.draggable),ue.eventCanceled){this._nulling();return}gr=!1,ea=!1,fi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Vo(this.cloneId),Vo(this._dragStartId),this.nativeDraggable&&(xe(document,"drop",this),xe(s,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),oi&&fe(document.body,"user-select",""),fe(X,"transform",""),a&&(ri&&(a.cancelable&&a.preventDefault(),!u.dropBubble&&a.stopPropagation()),ge&&ge.parentNode&&ge.parentNode.removeChild(ge),(Ie===Be||nt&&nt.lastPutMode!=="clone")&&He&&He.parentNode&&He.parentNode.removeChild(He),X&&(this.nativeDraggable&&xe(X,"dragend",this),Xo(X),X.style["will-change"]="",ri&&!gr&&wt(X,nt?nt.options.ghostClass:this.options.ghostClass,!1),wt(X,this.options.chosenClass,!1),pt({sortable:this,name:"unchoose",toEl:Be,newIndex:null,newDraggableIndex:null,originalEvent:a}),Ie!==Be?(St>=0&&(pt({rootEl:Be,name:"add",toEl:Be,fromEl:Ie,originalEvent:a}),pt({sortable:this,name:"remove",toEl:Be,originalEvent:a}),pt({rootEl:Be,name:"sort",toEl:Be,fromEl:Ie,originalEvent:a}),pt({sortable:this,name:"sort",toEl:Be,originalEvent:a})),nt&&nt.save()):St!==vr&&St>=0&&(pt({sortable:this,name:"update",toEl:Be,originalEvent:a}),pt({sortable:this,name:"sort",toEl:Be,originalEvent:a})),ue.active&&((St==null||St===-1)&&(St=vr,xn=si),pt({sortable:this,name:"end",toEl:Be,originalEvent:a}),this.save()))),this._nulling()},_nulling:function(){yt("nulling",this),Ie=X=Be=ge=Rn=He=ia=bn=Bn=Nt=ri=St=xn=vr=si=pr=ui=nt=Vi=ue.dragged=ue.ghost=ue.clone=ue.active=null,ca.forEach(function(a){a.checked=!0}),ca.length=$o=Yo=0},handleEvent:function(a){switch(a.type){case"drop":case"dragend":this._onDrop(a);break;case"dragenter":case"dragover":X&&(this._onDragOver(a),Bh(a));break;case"selectstart":a.preventDefault();break}},toArray:function(){for(var a=[],s,u=this.el.children,c=0,g=u.length,p=this.options;c<g;c++)s=u[c],$t(s,p.draggable,this.el,!1)&&a.push(s.getAttribute(p.dataIdAttr)||Gh(s));return a},sort:function(a,s){var u={},c=this.el;this.toArray().forEach(function(g,p){var m=c.children[p];$t(m,this.options.draggable,c,!1)&&(u[g]=m)},this),s&&this.captureAnimationState(),a.forEach(function(g){u[g]&&(c.removeChild(u[g]),c.appendChild(u[g]))}),s&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,s){return $t(a,s||this.options.draggable,this.el,!1)},option:function(a,s){var u=this.options;if(s===void 0)return u[a];var c=di.modifyOption(this,a,s);typeof c!="undefined"?u[a]=c:u[a]=s,a==="group"&&rf(u)},destroy:function(){yt("destroy",this);var a=this.el;a[kt]=null,xe(a,"mousedown",this._onTapStart),xe(a,"touchstart",this._onTapStart),xe(a,"pointerdown",this._onTapStart),this.nativeDraggable&&(xe(a,"dragover",this),xe(a,"dragenter",this)),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(s){s.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),fa.splice(fa.indexOf(this.el),1),this.el=a=null},_hideClone:function(){if(!bn){if(yt("hideClone",this),ue.eventCanceled)return;fe(He,"display","none"),this.options.removeCloneOnHide&&He.parentNode&&He.parentNode.removeChild(He),bn=!0}},_showClone:function(a){if(a.lastPutMode!=="clone"){this._hideClone();return}if(bn){if(yt("showClone",this),ue.eventCanceled)return;X.parentNode==Ie&&!this.options.group.revertClone?Ie.insertBefore(He,X):Rn?Ie.insertBefore(He,Rn):Ie.appendChild(He),this.options.group.revertClone&&this.animate(X,He),fe(He,"display",""),bn=!1}}};function Bh(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function na(o,a,s,u,c,g,p,m){var x,k=o[kt],D=k.options.onMove,N;return window.CustomEvent&&!un&&!ci?x=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent("move",!0,!0)),x.to=a,x.from=o,x.dragged=s,x.draggedRect=u,x.related=c||a,x.relatedRect=g||Je(a),x.willInsertAfter=m,x.originalEvent=p,o.dispatchEvent(x),D&&(N=D.call(k,x,p)),N}function Xo(o){o.draggable=!1}function Wh(){Jo=!1}function Rh(o,a,s){var u=Je(yr(s.el,0,s.options,!0)),c=10;return a?o.clientX<u.left-c||o.clientY<u.top&&o.clientX<u.right:o.clientY<u.top-c||o.clientY<u.bottom&&o.clientX<u.left}function zh(o,a,s){var u=Je(nl(s.el,s.options.draggable)),c=10;return a?o.clientX>u.right+c||o.clientX<=u.right&&o.clientY>u.bottom&&o.clientX>=u.left:o.clientX>u.right&&o.clientY>u.top||o.clientX<=u.right&&o.clientY>u.bottom+c}function _h(o,a,s,u,c,g,p,m){var x=u?o.clientY:o.clientX,k=u?s.height:s.width,D=u?s.top:s.left,N=u?s.bottom:s.right,O=!1;if(!p){if(m&&aa<k*c){if(!fi&&(ui===1?x>D+k*g/2:x<N-k*g/2)&&(fi=!0),fi)O=!0;else if(ui===1?x<D+aa:x>N-aa)return-ui}else if(x>D+k*(1-c)/2&&x<N-k*(1-c)/2)return jh(a)}return O=O||p,O&&(x<D+k*g/2||x>N-k*g/2)?x>D+k/2?1:-1:0}function jh(o){return Lt(X)<Lt(o)?1:-1}function Gh(o){for(var a=o.tagName+o.className+o.src+o.href+o.textContent,s=a.length,u=0;s--;)u+=a.charCodeAt(s);return u.toString(36)}function Uh(o){ca.length=0;for(var a=o.getElementsByTagName("input"),s=a.length;s--;){var u=a[s];u.checked&&ca.push(u)}}function oa(o){return setTimeout(o,0)}function Vo(o){return clearTimeout(o)}ha&&ke(document,"touchmove",function(o){(ue.active||gr)&&o.cancelable&&o.preventDefault()});ue.utils={on:ke,off:xe,css:fe,find:Zu,is:function(a,s){return!!$t(a,s,a,!1)},extend:Lh,throttle:Ju,closest:$t,toggleClass:wt,clone:ef,index:Lt,nextTick:oa,cancelNextTick:Vo,detectDirection:nf,getChild:yr};ue.get=function(o){return o[kt]};ue.mount=function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];a[0].constructor===Array&&(a=a[0]),a.forEach(function(u){if(!u.prototype||!u.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(u));u.utils&&(ue.utils=qt(qt({},ue.utils),u.utils)),di.mount(u)})};ue.create=function(o,a){return new ue(o,a)};ue.version=kh;var Ge=[],ii,el,tl=!1,Ko,Qo,da,ai;function $h(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this))}return o.prototype={dragStarted:function(s){var u=s.originalEvent;this.sortable.nativeDraggable?ke(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ke(document,"pointermove",this._handleFallbackAutoScroll):u.touches?ke(document,"touchmove",this._handleFallbackAutoScroll):ke(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(s){var u=s.originalEvent;!this.options.dragOverBubble&&!u.rootEl&&this._handleAutoScroll(u)},drop:function(){this.sortable.nativeDraggable?xe(document,"dragover",this._handleAutoScroll):(xe(document,"pointermove",this._handleFallbackAutoScroll),xe(document,"touchmove",this._handleFallbackAutoScroll),xe(document,"mousemove",this._handleFallbackAutoScroll)),qu(),la(),Dh()},nulling:function(){da=el=ii=tl=ai=Ko=Qo=null,Ge.length=0},_handleFallbackAutoScroll:function(s){this._handleAutoScroll(s,!0)},_handleAutoScroll:function(s,u){var c=this,g=(s.touches?s.touches[0]:s).clientX,p=(s.touches?s.touches[0]:s).clientY,m=document.elementFromPoint(g,p);if(da=s,u||this.options.forceAutoScrollFallback||ci||un||oi){Zo(s,this.options,m,u);var x=wn(m,!0);tl&&(!ai||g!==Ko||p!==Qo)&&(ai&&qu(),ai=setInterval(function(){var k=wn(document.elementFromPoint(g,p),!0);k!==x&&(x=k,la()),Zo(s,c.options,k,u)},10),Ko=g,Qo=p)}else{if(!this.options.bubbleScroll||wn(m,!0)===Yt()){la();return}Zo(s,this.options,wn(m,!1),!1)}}},sn(o,{pluginName:"scroll",initializeByDefault:!0})}function la(){Ge.forEach(function(o){clearInterval(o.pid)}),Ge=[]}function qu(){clearInterval(ai)}var Zo=Ju(function(o,a,s,u){if(a.scroll){var c=(o.touches?o.touches[0]:o).clientX,g=(o.touches?o.touches[0]:o).clientY,p=a.scrollSensitivity,m=a.scrollSpeed,x=Yt(),k=!1,D;el!==s&&(el=s,la(),ii=a.scroll,D=a.scrollFn,ii===!0&&(ii=wn(s,!0)));var N=0,O=ii;do{var T=O,b=Je(T),A=b.top,F=b.bottom,P=b.left,_=b.right,G=b.width,ie=b.height,ve=void 0,V=void 0,te=T.scrollWidth,ae=T.scrollHeight,K=fe(T),we=T.scrollLeft,j=T.scrollTop;T===x?(ve=G<te&&(K.overflowX==="auto"||K.overflowX==="scroll"||K.overflowX==="visible"),V=ie<ae&&(K.overflowY==="auto"||K.overflowY==="scroll"||K.overflowY==="visible")):(ve=G<te&&(K.overflowX==="auto"||K.overflowX==="scroll"),V=ie<ae&&(K.overflowY==="auto"||K.overflowY==="scroll"));var U=ve&&(Math.abs(_-c)<=p&&we+G<te)-(Math.abs(P-c)<=p&&!!we),E=V&&(Math.abs(F-g)<=p&&j+ie<ae)-(Math.abs(A-g)<=p&&!!j);if(!Ge[N])for(var R=0;R<=N;R++)Ge[R]||(Ge[R]={});(Ge[N].vx!=U||Ge[N].vy!=E||Ge[N].el!==T)&&(Ge[N].el=T,Ge[N].vx=U,Ge[N].vy=E,clearInterval(Ge[N].pid),(U!=0||E!=0)&&(k=!0,Ge[N].pid=setInterval(function(){u&&this.layer===0&&ue.active._onTouchMove(da);var B=Ge[this.layer].vy?Ge[this.layer].vy*m:0,J=Ge[this.layer].vx?Ge[this.layer].vx*m:0;typeof D=="function"&&D.call(ue.dragged.parentNode[kt],J,B,o,da,Ge[this.layer].el)!=="continue"||Vu(Ge[this.layer].el,J,B)}.bind({layer:N}),24))),N++}while(a.bubbleScroll&&O!==x&&(O=wn(O,!1)));tl=k}},30),lf=function(a){var s=a.originalEvent,u=a.putSortable,c=a.dragEl,g=a.activeSortable,p=a.dispatchSortableEvent,m=a.hideGhostForTarget,x=a.unhideGhostForTarget;if(s){var k=u||g;m();var D=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:s,N=document.elementFromPoint(D.clientX,D.clientY);x(),k&&!k.el.contains(N)&&(p("spill"),this.onSpill({dragEl:c,putSortable:u}))}};function rl(){}rl.prototype={startIndex:null,dragStart:function(a){var s=a.oldDraggableIndex;this.startIndex=s},onSpill:function(a){var s=a.dragEl,u=a.putSortable;this.sortable.captureAnimationState(),u&&u.captureAnimationState();var c=yr(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(s,c):this.sortable.el.appendChild(s),this.sortable.animateAll(),u&&u.animateAll()},drop:lf};sn(rl,{pluginName:"revertOnSpill"});function il(){}il.prototype={onSpill:function(a){var s=a.dragEl,u=a.putSortable,c=u||this.sortable;c.captureAnimationState(),s.parentNode&&s.parentNode.removeChild(s),c.animateAll()},drop:lf};sn(il,{pluginName:"removeOnSpill"});ue.mount(new $h);ue.mount(il,rl);var sf=ue;function al(o){var a=o.classList.contains("input-array-associative"),s=o.getAttribute("data-name");$$(".input-array-row",o).forEach(function(x){m(x)}),sf.create(o,{handle:".sort-handle",forceFallback:!0});function u(x){var k=x.cloneNode(!0);g(k),m(k),x.nextSibling?x.parentNode.insertBefore(k,x.nextSibling):x.parentNode.appendChild(k)}function c(x){$$(".input-array-row",x.parentNode).length>1?x.parentNode.removeChild(x):g(x)}function g(x){var k,D;a&&(k=$(".input-array-key",x),k.value="",k.removeAttribute("value")),D=$(".input-array-value",x),D.value="",D.removeAttribute("value"),D.name=s+"[]"}function p(x){var k=$(".input-array-key",x),D=$(".input-array-value",x);D.name=s+"["+k.value.trim()+"]"}function m(x){var k=$(".input-array-add",x),D=$(".input-array-remove",x),N,O;k.addEventListener("click",u.bind(k,x)),D.addEventListener("click",c.bind(D,x)),a&&(N=$(".input-array-key",x),O=$(".input-array-value",x),N.addEventListener("keyup",p.bind(N,x)),O.addEventListener("keyup",p.bind(O,x)))}}function ol(o,a){var s={weekStarts:0,format:"YYYY-MM-DD",time:!1,labels:{today:"Today",weekdays:{long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},months:{long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}},u=new Date,c,g,p;a=se.extendObject({},s,a),c={year:u.getFullYear(),month:u.getMonth(),day:u.getDate(),hours:u.getHours(),minutes:u.getMinutes(),seconds:u.getSeconds(),setDate:function(b){this.year=b.getFullYear(),this.month=b.getMonth(),this.day=b.getDate(),this.hours=b.getHours(),this.minutes=b.getMinutes(),this.seconds=b.getSeconds()},lastDay:function(){this.day=g.daysInMonth(this.month,this.year)},prevYear:function(){this.year--},nextYear:function(){this.year++},prevMonth:function(){this.month=g.mod(this.month-1,12),this.month===11&&this.prevYear(),this.day>g.daysInMonth(this.month,this.year)&&this.lastDay()},nextMonth:function(){this.month=g.mod(this.month+1,12),this.month===0&&this.nextYear(),this.day>g.daysInMonth(this.month,this.year)&&this.lastDay()},prevWeek:function(){this.day-=7,this.day<1&&(this.prevMonth(),this.day+=g.daysInMonth(this.month,this.year))},nextWeek:function(){this.day+=7,this.day>g.daysInMonth(this.month,this.year)&&(this.day-=g.daysInMonth(this.month,this.year),this.nextMonth())},prevDay:function(){this.day--,this.day<1&&(this.prevMonth(),this.lastDay())},nextDay:function(){this.day++,this.day>g.daysInMonth(this.month,this.year)&&(this.nextMonth(),this.day=1)},nextHour:function(){this.hours=g.mod(this.hours+1,24),this.hours===0&&this.nextDay()},prevHour:function(){this.hours=g.mod(this.hours-1,24),this.hours===23&&this.prevDay()},nextMinute:function(){this.minutes=g.mod(this.minutes+1,60),this.minutes===0&&this.nextHour()},prevMinute:function(){this.minutes=g.mod(this.minutes-1,60),this.minutes===59&&this.prevHour()},nextSecond:function(){this.seconds=g.mod(this.seconds+1,60),this.seconds===0&&this.nextMinute()},prevSecond:function(){this.seconds=g.mod(this.seconds-1,60),this.minutes===59&&this.prevMinute()}},g={_daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],mod:function(b,A){return b-A*Math.floor(b/A)},pad:function(b,A){for(var F=b.toString();F.length<A;)F="0"+F;return F},isValidDate:function(b){return b&&!isNaN(Date.parse(b))},isLeapYear:function(b){return b%4===0&&b%100!==0||b%400===0},daysInMonth:function(b,A){return b===1&&this.isLeapYear(A)?29:this._daysInMonth[b]},weekStart:function(b,A){var F=b.getDate();return typeof A=="undefined"&&(A=a.weekStarts),F-=this.mod(b.getDay()-A,7),new Date(b.getFullYear(),b.getMonth(),F)},weekNumberingYear:function(b){var A=b.getFullYear(),F=this.weekStart(new Date(A,0,4),1),P=this.weekStart(new Date(A+1,0,4),1);return b.getTime()>=P.getTime()?A+1:b.getTime()>=F.getTime()?A:A-1},weekOfYear:function(b){var A=this.weekNumberingYear(b),F=this.weekStart(new Date(A,0,4),1),P=this.weekStart(b,1);return Math.round((P.getTime()-F.getTime())/6048e5)+1},has12HourFormat:function(b){var A=b.match(/\[([^\]]*)\]|H{1,2}/);return A!==null&&A[0][0]==="H"},formatDateTime:function(b,A){var F=/\[([^\]]*)\]|[YR]{4}|uuu|[YR]{2}|[MD]{1,4}|[WHhms]{1,2}|[AaZz]/g,P=this;typeof A=="undefined"&&(A=a.format);function _(G){var ie=G>0?"-":"+",ve=Math.floor(Math.abs(G)/60),V=Math.abs(G)%60;return[ie+g.pad(ve,2),g.pad(V,2)]}return A.replace(F,function(G,ie){switch(G){case"YY":return b.getFullYear().toString().substr(-2);case"YYYY":return b.getFullYear();case"M":return b.getMonth()+1;case"MM":return P.pad(b.getMonth()+1,2);case"MMM":return a.labels.months.short[b.getMonth()];case"MMMM":return a.labels.months.long[b.getMonth()];case"D":return b.getDate();case"DD":return P.pad(b.getDate(),2);case"DDD":return a.labels.weekdays.short[P.mod(b.getDay()+a.weekStarts,7)];case"DDDD":return a.labels.weekdays.long[P.mod(b.getDay()+a.weekStarts,7)];case"W":return P.weekOfYear(b);case"WW":return P.pad(P.weekOfYear(b),2);case"RR":return P.weekNumberingYear(b).toString().substr(-2);case"RRRR":return P.weekNumberingYear(b);case"H":return P.mod(b.getHours(),12)||12;case"HH":return P.pad(P.mod(b.getHours(),12)||12,2);case"h":return b.getHours();case"hh":return P.pad(b.getHours(),2);case"m":return b.getMinutes();case"mm":return P.pad(b.getMinutes(),2);case"s":return b.getSeconds();case"ss":return P.pad(b.getSeconds(),2);case"uuu":return P.pad(b.getMilliseconds(),3);case"A":return b.getHours()<12?"AM":"PM";case"a":return b.getHours()<12?"am":"pm";case"Z":return _(b.getTimezoneOffset()).join(":");case"z":return _(b.getTimezoneOffset()).join("");default:return ie||G}})}},p=$(".calendar")?$(".calendar"):N(),m();function m(){var b=o.value;o.readOnly=!0,o.size=a.format.length,g.isValidDate(b)&&(b=new Date(b),o.setAttribute("data-date",b),o.value=g.formatDateTime(b)),o.addEventListener("change",function(){this.value===""?this.setAttribute("data-date",""):this.value=g.formatDateTime(this.getAttribute("data-date"))}),o.addEventListener("keydown",function(A){var F=this.getAttribute("data-date");switch(c.setDate(g.isValidDate(F)?new Date(F):new Date),A.which){case 13:$(".calendar-day.selected",p).click(),p.style.display="none";break;case 8:this.value="",this.blur(),p.style.display="none";break;case 27:this.blur(),p.style.display="none";break;case 37:A.ctrlKey||A.metaKey?A.shiftKey?c.prevYear():c.prevMonth():c.prevDay(),x(this);break;case 38:c.prevWeek(),x(this);break;case 39:A.ctrlKey||A.metaKey?A.shiftKey?c.nextYear():c.nextMonth():c.nextDay(),x(this);break;case 40:c.nextWeek(),x(this);break;case 48:(A.ctrlKey||A.metaKey)&&c.setDate(new Date),x(this);break;default:return}A.stopPropagation(),A.preventDefault()}),o.addEventListener("focus",function(){var A=g.isValidDate(this.getAttribute("data-date"))?new Date(this.getAttribute("data-date")):new Date;c.setDate(A),O(c.year,c.month,c.day),D(c.hours,c.minutes),p.style.display="block",T()}),o.addEventListener("blur",function(){p.style.display="none"})}function x(b){var A=new Date(c.year,c.month,c.day,c.hours,c.minutes);O(c.year,c.month,c.day),D(c.hours,c.minutes),b.value=g.formatDateTime(A),b.setAttribute("data-date",A)}function k(){return document.activeElement.classList.contains("input-date")?document.activeElement:null}function D(b,A){var F="",P=g.has12HourFormat(a.format)?12:24;a.time&&(P===12&&(F=b<12?"AM":"PM"),b=P===12?g.mod(b,12)||12:b,$(".calendar-hours",p).innerHTML=g.pad(b,2),$(".calendar-minutes",p).innerHTML=g.pad(A,2),$(".calendar-meridiem",p).innerHTML=F)}function N(){return p=document.createElement("div"),p.className="calendar",p.innerHTML='<div class="calendar-buttons"><button type="button" class="prevMonth"></button><button class="currentMonth">'+a.labels.today+'</button><button type="button" class="nextMonth"></button></div><div class="calendar-separator"></div><table class="calendar-table"></table>',a.time===!0&&(p.innerHTML+='<div class="calendar-separator"></div><table class="calendar-time"><tr><td><button type="button" class="nextHour"></button></td><td></td><td><button type="button" class="nextMinute"></button></td></tr><tr><td class="calendar-hours"></td><td>:</td><td class="calendar-minutes"></td><td class="calendar-meridiem"></td></tr><tr><td><button type="button" class="prevHour"></button></td><td></td><td><button type="button" class="prevMinute"></button></td></tr></table></div>',at.inject("chevron-down",$(".prevHour",p)),at.inject("chevron-up",$(".nextHour",p)),at.inject("chevron-down",$(".prevMinute",p)),at.inject("chevron-up",$(".nextMinute",p)),se.longClick($(".nextHour",p),function(b){c.nextHour(),x(o),b.preventDefault()},750,250),se.longClick($(".prevHour",p),function(b){c.prevHour(),x(o),b.preventDefault()},750,250),se.longClick($(".nextMinute",p),function(b){c.nextMinute(),x(o),b.preventDefault()},750,250),se.longClick($(".prevMinute",p),function(b){c.prevMinute(),x(o),b.preventDefault()},750,250)),document.body.appendChild(p),at.inject("calendar-clock",$(".currentMonth",p)),at.inject("chevron-left",$(".prevMonth",p)),at.inject("chevron-right",$(".nextMonth",p)),$(".currentMonth",p).addEventListener("mousedown",function(b){var A=k(),F=new Date;c.setDate(F),x(A),A.blur(),b.preventDefault()}),se.longClick($(".prevMonth",p),function(b){c.prevMonth(),x(o),b.preventDefault()},750,500),se.longClick($(".nextMonth",p),function(b){c.nextMonth(),x(o),b.preventDefault()},750,500),window.addEventListener("mousedown",function(b){p.style.display!=="none"&&b.target.closest(".calendar")&&b.preventDefault()}),window.addEventListener("resize",se.throttle(T,100)),p}function O(b,A,F){var P,_,G=1,ie=new Date(b,A,1).getDay(),ve=g.daysInMonth(A,b),V=a.labels.months.long[A],te=g.mod(ie-a.weekStarts,7),ae="";for(ae+='<tr><th class="calendar-header" colspan="7">',ae+=V+"&nbsp;"+b,ae+="</th></tr>",ae+="<tr>",P=0;P<7;P++)ae+='<td class="calendar-header-day">',ae+=a.labels.weekdays.short[g.mod(P+a.weekStarts,7)],ae+="</td>";for(ae+="</tr><tr>",P=0;P<6;P++){for(_=0;_<7;_++)G<=ve&&(P>0||_>=te)?(G===F?ae+='<td class="calendar-day selected">':ae+='<td class="calendar-day">',ae+=G++):G===1?(ae+='<td class="calendar-prev-month-day">',ae+=g.daysInMonth(g.mod(A-1,12),b)-te+_+1):(ae+='<td class="calendar-next-month-day">',ae+=G++-ve),ae+="</td>";ae+="</tr><tr>"}ae+="</tr>",$(".calendar-table",p).innerHTML=ae,$$(".calendar-day",p).forEach(function(K){K.addEventListener("mousedown",function(we){we.stopPropagation(),we.preventDefault()}),K.addEventListener("click",function(){var we=k(),j=new Date(c.year,c.month,parseInt(this.textContent));we.setAttribute("data-date",j),we.value=g.formatDateTime(j),we.blur()})})}function T(){var b,A,F,P,_,G,ie,ve,V,te;o=k(),!(!o||p.style.display!=="block")&&(b=o.getBoundingClientRect(),A=b.top+window.pageYOffset,F=b.left+window.pageXOffset,p.style.top=A+o.offsetHeight+"px",p.style.left=F+o.offsetLeft+"px",P=p.getBoundingClientRect(),_=P.top+window.pageYOffset,G=P.left+window.pageXOffset,ie=se.outerWidth(p),ve=se.outerHeight(p),V=document.documentElement.clientWidth,te=document.documentElement.clientHeight,G+ie>V&&(p.style.left=V-ie+"px"),(_<window.pageYOffset||window.pageYOffset<_+ve-te)&&window.scrollTo(window.pageXOffset,_+ve-te))}}function ll(o,a){var s={unit:"seconds",intervals:["years","months","weeks","days","hours","minutes","seconds"],labels:{years:["year","years"],months:["month","months"],weeks:["week","weeks"],days:["day","days"],hours:["hour","hours"],minutes:["minute","minutes"],seconds:["second","seconds"]}},u={years:60*60*24*365,months:60*60*24*30,weeks:60*60*24*7,days:60*60*24,hours:60*60,minutes:60,seconds:1},c,g,p={},m={};a=se.extendObject({},s,a),A();function x(F,P){var _={},G;F=se.toSafeInteger(F),typeof P=="undefined"&&(P=a.intervals);for(G in u)Object.prototype.hasOwnProperty.call(u,G)&&P.indexOf(G)!==-1&&(_[G]=Math.floor(F/u[G]),F-=_[G]*u[G]);return _}function k(F){var P=0,_;for(_ in F)Object.prototype.hasOwnProperty.call(F,_)&&Object.prototype.hasOwnProperty.call(u,_)&&(P+=F[_]*u[_]);return se.toSafeInteger(P)}function D(){var F={},P=0,_=0,G=0;for(G in p)Object.prototype.hasOwnProperty.call(p,G)&&(F[G]=p[G].value);P=k(F),g.step&&(_=g.step*u[a.unit],P=Math.floor(P/_)*_),g.min&&(P=Math.max(P,g.min)),g.max&&(P=Math.min(P,g.max)),g.value=Math.round(P/u[a.unit])}function N(){var F=x(g.value*u[a.unit]),P;for(P in p)Object.prototype.hasOwnProperty.call(p,P)&&(p[P].value=F[P])}function O(){var F;for(F in p)Object.prototype.hasOwnProperty.call(p,F)&&(p[F].style.width=Math.max(3,p[F].value.length+2)+"ch")}function T(){var F;for(F in p)Object.prototype.hasOwnProperty.call(p,F)&&(m[F].innerHTML=a.labels[F][parseInt(p[F].value)===1?0:1])}function b(F,P){var _,G,ie,ve,V;for(c=document.createElement("div"),c.className="input-duration",V=0;V<a.intervals.length;V++)G=a.intervals[V],_=document.createElement("span"),_.className="duration-"+G,ie=document.createElement("input"),ie.type="number",ie.value=F[G]||0,ie.style.width=Math.max(3,ie.value.length+2)+"ch",P[G]>1&&(ie.step=P[G]),o.disabled&&(ie.disabled=!0),p[G]=ie,ie.addEventListener("input",function(){for(;this.value.charAt(0)==="0"&&this.value.length>1&&!this.value.charAt(1).match(/[.,]/);)this.value=this.value.slice(1);for(;this.value>se.getMaxSafeInteger();)this.value=this.value.slice(0,-1);O(),D(),T()}),ie.addEventListener("blur",function(){D(),N(),O(),T()}),ie.addEventListener("focus",function(){c.classList.add("focused")}),ie.addEventListener("blur",function(){c.classList.remove("focused")}),_.addEventListener("mousedown",function(te){var ae=$("input",this);ae&&te.target!==ae&&(ae.focus(),te.preventDefault())}),ve=document.createElement("label"),ve.innerHTML=a.labels[G][parseInt(ie.value)===1?0:1],m[G]=ve,_.appendChild(ie),_.appendChild(ve),c.appendChild(_);return c.addEventListener("mousedown",function(te){te.target===this&&(ie.focus(),te.preventDefault())}),c}function A(){var F,P,_;g=document.createElement("input"),g.className="input-duration-hidden",g.name=o.name,g.id=o.id,g.type="text",g.value=o.value,g.readOnly=!0,g.hidden=!0,o.min&&(g.min=o.min),o.max&&(g.max=o.max),o.step&&(g.step=o.step),o.required&&(g.required=!0),o.disabled&&(g.disabled=!0),o.hasAttribute("data-intervals")&&(a.intervals=o.getAttribute("data-intervals").split(", ")),o.hasAttribute("data-unit")&&(a.unit=o.getAttribute("data-unit")),P=o.value*u[a.unit],_=o.step*u[a.unit],F=b(x(P||0),x(_||1)),o.parentNode.replaceChild(F,o),F.appendChild(g)}}var Cf=Xi(zn());var _n,Ot=_n={init:function(){$$("[data-modal]").forEach(function(o){o.addEventListener("click",function(){var a=this.getAttribute("data-modal"),s=this.getAttribute("data-modal-action");s?_n.show(a,s):_n.show(a)})}),$$(".modal [data-dismiss]").forEach(function(o){o.addEventListener("click",function(){var a;this.hasAttribute("data-validate")&&(a=_n.validate(this.getAttribute("data-dismiss")),!a)||_n.hide(this.getAttribute("data-dismiss"))})}),$$(".modal").forEach(function(o){o.addEventListener("click",function(a){a.target===this&&_n.hide()})}),document.addEventListener("keyup",function(o){o.which===27&&_n.hide()}),window.addEventListener("focus",function(){var o=$(".modal.show");o&&se.firstFocusableElement(o).focus()})},show:function(o,a,s){var u=document.getElementById(o);u&&(u.classList.add("show"),a&&$("form",u).setAttribute("action",a),document.activeElement.blur(),$("[autofocus]",u)?$("[autofocus]",u).focus():se.firstFocusableElement(u).focus(),typeof s=="function"&&s(u),$$(".tooltip").forEach(function(c){c.parentNode.removeChild(c)}),this.createBackdrop())},hide:function(o){typeof o!="undefined"?document.getElementById(o).classList.remove("show"):$$(".modal").forEach(function(a){a.classList.remove("show")}),this.removeBackdrop()},createBackdrop:function(){var o;$(".modal-backdrop")||(o=document.createElement("div"),o.className="modal-backdrop",document.body.appendChild(o))},removeBackdrop:function(){var o=$(".modal-backdrop");o&&o.parentNode.removeChild(o)},validate:function(o){var a=!1,s=document.getElementById(o);return $$("[required]",o).forEach(function(u){if(u.value==="")return u.classList("input-invalid"),u.focus(),$(".modal-error",s).style.display="block",a=!1,!1;a=!0}),a}};var Lp=Xi(mf()),Dp=Xi(bf()),Tp=Xi(kf());function fl(o){var a=o.offsetHeight,s=Cf.default.fromTextArea(o,{mode:{name:"markdown",highlightFormatting:!0},theme:"formwork",indentUnit:4,lineWrapping:!0,addModeClass:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList"},configureMouse:function(){return{extend:!1,addNew:!1}}}),u=$(".editor-toolbar[data-for="+o.id+"]"),c=o.parentNode.classList.contains("editor-wrap")?o.parentNode:null,g=[];s.getWrapperElement().style.height=a+"px",$("[data-command=bold]",u).addEventListener("click",function(){k("**")}),$("[data-command=italic]",u).addEventListener("click",function(){k("_")}),$("[data-command=ul]",u).addEventListener("click",function(){k(x()+"- ","")}),$("[data-command=ol]",u).addEventListener("click",function(){var T=/^\d+\./.exec(p(s.getValue()));k(T?`
`+(parseInt(T)+1)+". ":x()+"1. ","")}),$("[data-command=quote]",u).addEventListener("click",function(){k(x()+"> ","")}),$("[data-command=link]",u).addEventListener("click",function(){var T=s.getSelection();/^(https?:\/\/|mailto:)/i.test(T)?k("[","]("+T+")",!0):T!==""?k("["+T+"](http://",")",!0):k("[","](http://)")}),$("[data-command=image]",u).addEventListener("click",function(){Ot.show("imagesModal",null,function(T){var b=$(".image-picker-thumbnail.selected",T);b&&b.classList.remove("selected");function A(){var F=$(".image-picker-thumbnail.selected",$("#imagesModal")).getAttribute("data-filename");F!==void 0?k(x()+"![","]("+F+")"):k(x()+"![](",")"),this.removeEventListener("click",A)}$(".image-picker-confirm",T).addEventListener("click",A)})}),$("[data-command=undo]",u).addEventListener("click",function(){s.undo(),s.focus()}),$("[data-command=redo]",u).addEventListener("click",function(){s.redo(),s.focus()}),s.on("changes",se.debounce(function(){o.value=s.getValue(),s.historySize().undo<1?$("[data-command=undo]").setAttribute("disabled",""):$("[data-command=undo]").removeAttribute("disabled"),s.historySize().redo<1?$("[data-command=redo]").setAttribute("disabled",""):$("[data-command=redo]").removeAttribute("disabled")},500)),s.on("beforeSelectionChange",function(T,b){var A=D(b.ranges);T.operation(function(){se.sameArray(A,g)||(N(T,g),O(T,A),g=A)}),T.refresh()}),s.on("focus",function(){c!==null&&c.classList.add("focused")}),s.on("blur",function(T){c!==null&&c.classList.remove("focused"),N(T,g),g=[]}),document.addEventListener("keydown",function(T){if(!T.altKey&&(T.ctrlKey||T.metaKey))switch(T.which){case 66:$("[data-command=bold]",u).click(),T.preventDefault();break;case 73:$("[data-command=italic]",u).click(),T.preventDefault();break;case 75:$("[data-command=link]",u).click(),T.preventDefault();break}});function p(T){var b=T.lastIndexOf(`
`);return b===-1?T:T.substring(b+1)}function m(){var T=s.getLine(s.getCursor().line);return T.length===0?void 0:T.slice(-1)}function x(){switch(m()){case void 0:return"";case`
`:return`
`;default:return`

`}}function k(T,b,A){var F,P,_;b===void 0&&(b=T),F=A===!0?"":s.getSelection(),P=s.getCursor(),_=T.split(`
`).length-1,s.replaceSelection(T+F+b),s.setCursor(P.line+_,P.ch+T.length-_),s.focus()}function D(T){var b,A=[];for(b=0;b<T.length;b++)A.push(T[b].head.line);return A}function N(T,b){var A;for(A=0;A<b.length;A++)T.removeLineClass(b[A],"wrap","CodeMirror-activeline")}function O(T,b){var A;for(A=0;A<b.length;A++)T.addLineClass(b[A],"wrap","CodeMirror-activeline")}}function cl(o){var a=$('label[for="'+o.id+'"]'),s=$("span",a),u=!1;o.setAttribute("data-label",$('label[for="'+o.id+'"] span').innerHTML),o.addEventListener("change",c),o.addEventListener("input",c),o.form.addEventListener("submit",function(){o.files.length>0&&(s.innerHTML+=' <span class="spinner"></span>'),u=!0}),a.addEventListener("drag",g),a.addEventListener("dragstart",g),a.addEventListener("dragend",g),a.addEventListener("dragover",p),a.addEventListener("dragenter",p),a.addEventListener("dragleave",m),a.addEventListener("drop",function(x){x.preventDefault(),!u&&(o.files=x.dataTransfer.files,se.triggerEvent(o,"change"))}),a.addEventListener("click",function(x){u&&x.preventDefault()});function c(){this.files.length>0?s.innerHTML=this.files[0].name:s.innerHTML=this.getAttribute("data-label")}function g(x){x.preventDefault()}function p(x){this.classList.add("drag"),x.preventDefault()}function m(x){this.classList.remove("drag"),x.preventDefault()}}function dl(o){var a=se.serializeForm(o);window.addEventListener("beforeunload",s),o.addEventListener("submit",u),$$('a[href]:not([href^="#"]):not([target="_blank"]):not([target^="formwork-"])').forEach(function(p){p.addEventListener("click",function(m){g()&&(m.preventDefault(),Ot.show("changesModal",null,function(x){$("[data-command=continue]",x).setAttribute("data-href",p.href)}))})}),$$("input[type=file][data-auto-upload]",o).forEach(function(p){p.addEventListener("change",function(){g(!1)||o.requestSubmit($("[type=submit]",o))})}),c();function s(p){g()&&(p.preventDefault(),p.returnValue="")}function u(){window.removeEventListener("beforeunload",s)}function c(){var p=document.getElementById("changesModal"),m=document.getElementById("deletePageModal"),x=document.getElementById("deleteUserModal");p&&$("[data-command=continue]",p).addEventListener("click",function(){u(),window.location.href=this.getAttribute("data-href")}),m&&$("[data-command=delete]",m).addEventListener("click",u),x&&$("[data-command=delete]",x).addEventListener("click",u)}function g(p){var m,x;if(typeof p=="undefined"&&(p=!0),m=$$("input[type=file]",o),p===!0&&m.length>0){for(x=0;x<m.length;x++)if(m[x].files.length>0)return!0}return se.serializeForm(o)!==a}}function hl(o){var a=$$("option",o),s=$(".image-picker-confirm",o.parentNode),u=$("[data-command=upload]",o.parentNode),c,g,p;if(o.style.display="none",a.length>0){for(c=document.createElement("div"),c.className="image-picker-thumbnails",p=0;p<a.length;p++)g=document.createElement("div"),g.className="image-picker-thumbnail",g.style.backgroundImage="url("+a[p].value+")",g.setAttribute("data-uri",a[p].value),g.setAttribute("data-filename",a[p].text),g.addEventListener("click",m),g.addEventListener("dblclick",x),c.appendChild(g);o.parentNode.insertBefore(c,o),$(".image-picker-empty-state").style.display="none"}s.addEventListener("click",function(){var k=$(".image-picker-thumbnail.selected"),D=document.getElementById(this.getAttribute("data-target"));k&&D&&(D.value=k.getAttribute("data-filename"))}),u.addEventListener("click",function(){document.getElementById(this.getAttribute("data-upload-target")).click()});function m(){var k=document.getElementById($(".image-picker-confirm").getAttribute("data-target"));k&&(k.value=this.getAttribute("data-filename")),$$(".image-picker-thumbnail").forEach(function(D){D.classList.remove("selected")}),this.classList.add("selected")}function x(){this.click(),$(".image-picker-confirm").click()}}function pl(o){if(o.addEventListener("change",a),o.addEventListener("input",a),a.call(o),o.hasAttribute("data-ticks")){let u=o.getAttribute("data-ticks");switch(u){case 0:break;case"true":case"":s((o.max-o.min)/(o.step||1)+1);break;default:s(parseInt(u)+1);break}}function a(){this.style.setProperty("--progress",Math.round(this.value/(this.max-this.min)*100)+"%"),$('output[for="'+this.id+'"]').innerHTML=this.value}function s(u){let c=document.createElement("div");c.className="input-range-ticks",c.setAttribute("data-for",o.id),o.parentElement.insertBefore(c,o.nextSibling);for(let g=0;g<u;g++){let p=document.createElement("div");p.className="tick",c.appendChild(p)}}}function gl(o){var a={addKeyCodes:[32]},s=[],u,c,g,p,m;x(),k(),D();function x(){var j=o.hasAttribute("required"),U=o.hasAttribute("disabled");u=document.createElement("div"),u.className="input-tag",c=document.createElement("input"),c.className="tag-inner-input",c.type="text",c.placeholder=o.placeholder,c.setAttribute("size",""),g=document.createElement("input"),g.className="input-tag-hidden",g.name=o.name,g.id=o.id,g.type="text",g.value=o.value,g.readOnly=!0,g.hidden=!0,j&&(g.required=!0),U&&(u.disabled=!0,c.disabled=!0,g.disabled=!0),o.parentNode.replaceChild(u,o),u.appendChild(c),u.appendChild(g),g.value&&(s=g.value.split(", "),s.forEach(function(E,R){E=E.trim(),s[R]=E,b(E)})),c.placeholder?(p=c.placeholder,O()):p="",u.addEventListener("mousedown",function(E){c.focus(),E.preventDefault()})}function k(){var j,U,E;if(o.hasAttribute("data-options")){j=JSON.parse(o.getAttribute("data-options")),m=document.createElement("div"),m.className="dropdown-list";for(U in j)Object.prototype.hasOwnProperty.call(j,U)&&(E=document.createElement("div"),E.className="dropdown-item",E.innerHTML=j[U],E.setAttribute("data-value",U),E.addEventListener("click",function(){A(this.getAttribute("data-value"))}),m.appendChild(E));u.appendChild(m),c.addEventListener("focus",function(){getComputedStyle(m).display==="none"&&(_(),m.scrollTop=0,m.style.display="block")}),c.addEventListener("blur",function(){getComputedStyle(m).display!=="none"&&(_(),m.style.display="none")}),c.addEventListener("keydown",function(R){switch(R.which){case 8:_();break;case 13:getComputedStyle(m).display!=="none"&&(ve(),R.preventDefault());break;case 38:getComputedStyle(m).display!=="none"&&(K(),R.preventDefault());break;case 40:getComputedStyle(m).display!=="none"&&(we(),R.preventDefault());break;default:a.addKeyCodes.indexOf(R.which)>-1&&(ve(),R.preventDefault())}}),c.addEventListener("keyup",se.debounce(function(R){var B=c.value.trim();switch(R.which){case 27:m.style.display="none";break;case 38:case 40:return!0;default:m.style.display="block",G(B),B.length>0&&te()}},100))}}function D(){c.addEventListener("focus",function(){u.classList.add("focused")}),c.addEventListener("blur",function(){var j=c.value.trim();j!==""&&A(j),u.classList.remove("focused")}),c.addEventListener("keydown",function(){var j=c.value.trim();switch(event.which){case 8:j===""?(F(s[s.length-1]),c.previousSibling&&c.parentNode.removeChild(c.previousSibling),event.preventDefault()):c.size=Math.max(c.value.length,c.placeholder.length,1);break;case 13:case 188:j!==""&&A(j),event.preventDefault();break;case 27:P(),c.blur(),event.preventDefault();break;default:if(j!==""&&a.addKeyCodes.indexOf(event.which)>-1){A(j),event.preventDefault();break}j.length>0&&(c.size=c.value.length+2);break}})}function N(){g.value=s.join(", "),O()}function O(){p.length>0&&(s.length===0?(c.placeholder=p,c.size=p.length):(c.placeholder="",c.size=1))}function T(j){return s.indexOf(j)===-1?m?$('[data-value="'+j+'"]',m)!==null:!0:!1}function b(j){var U=document.createElement("span"),E=document.createElement("i");U.className="tag",U.innerHTML=j,U.style.marginRight=".25rem",c.parentNode.insertBefore(U,c),E.className="tag-remove",E.setAttribute("role","button"),E.addEventListener("mousedown",function(R){F(j),U.parentNode.removeChild(U),R.preventDefault()}),U.appendChild(E)}function A(j){T(j)?(s.push(j),b(j),N()):O(),c.value="",m&&_()}function F(j){var U=s.indexOf(j);U>-1&&(s.splice(U,1),N()),m&&_()}function P(){c.value="",O()}function _(){var j=0;$$(".dropdown-item",m).forEach(function(U){getComputedStyle(U).display!=="none"&&j++,s.indexOf(U.getAttribute("data-value"))===-1?U.style.display="block":U.style.display="none",U.classList.remove("selected")}),j>0?m.style.display="block":m.style.display="none"}function G(j){var U=0;m.style.display="block",$$(".dropdown-item",m).forEach(function(E){var R=E.textContent,B=new RegExp(se.makeDiacriticsRegExp(se.escapeRegExp(j)),"i");R.match(B)!==null&&E.style.display!=="none"?(E.style.display="block",U++):E.style.display="none"}),U>0?m.style.display="block":m.style.display="none"}function ie(j){var U=m.scrollTop,E=m.clientHeight,R=U+E,B=getComputedStyle(m),J=parseInt(B.paddingTop),ye=parseInt(B.paddingBottom),Te=j.offsetTop,It=j.clientHeight,C=Te+It;Te<U?m.scrollTop=Te-J:C>R&&(m.scrollTop=C-E+ye)}function ve(){var j=$(".dropdown-item.selected",m);getComputedStyle(j).display!=="none"&&(c.value=j.getAttribute("data-value"))}function V(j){var U=$(".dropdown-item.selected",m);U&&U.classList.remove("selected"),j&&(j.classList.add("selected"),ie(j))}function te(){var j=$$(".dropdown-item",m),U;for(U=0;U<j.length;U++)if(getComputedStyle(j[U]).display!=="none"){V(j[U]);return}}function ae(){var j=$$(".dropdown-item",m),U;for(U=j.length-1;U>=0;U--)if(getComputedStyle(j[U]).display!=="none"){V(j[U]);return}}function K(){var j=$(".dropdown-item.selected",m),U;if(j){for(U=j.previousSibling;U&&U.style.display==="none";)U=U.previousSibling;if(U)return V(U);V(j.previousSibling)}ae()}function we(){var j=$(".dropdown-item.selected",m),U;if(j){for(U=j.nextSibling;U&&U.style.display==="none";)U=U.nextSibling;if(U)return V(U)}te()}}var Ef={init:function(){$$("input[data-enable]").forEach(function(o){o.addEventListener("change",function(){var a,s,u=this.getAttribute("data-enable").split(",");for(a=0;a<u.length;a++)s=$('input[name="'+u[a]+'"]'),this.checked?s.removeAttribute("disabled"):s.setAttribute("disabled","")})}),$$(".input-reset").forEach(function(o){o.addEventListener("click",function(){var a=document.getElementById(this.getAttribute("data-reset"));a.value="",se.triggerEvent(a,"change")})}),$$(".input-date").forEach(function(o){ol(o,Formwork.config.DateInput)}),$$(".input-image").forEach(function(o){o.addEventListener("click",function(){Ot.show("imagesModal",null,function(a){var s=$(".image-picker-thumbnail.selected",a),u;s&&s.classList.remove("selected"),o.value&&(u=$('.image-picker-thumbnail[data-filename="'+o.value+'"]',a),u&&u.classList.add("selected")),$(".image-picker-confirm",a).setAttribute("data-target",o.id)})})}),$$(".image-picker").forEach(function(o){hl(o)}),$$(".editor-textarea").forEach(function(o){fl(o)}),$$("input[type=file]").forEach(function(o){cl(o)}),$$("input[data-field=tags]").forEach(function(o){gl(o)}),$$("input[data-field=duration]").forEach(function(o){ll(o,Formwork.config.DurationInput)}),$$("input[type=range]").forEach(function(o){pl(o)}),$$(".input-array").forEach(function(o){al(o)}),$$("[data-form]").forEach(function(o){dl(o)})}};var Lf={init:function(){var o=$("[data-command=expand-all-pages]"),a=$("[data-command=collapse-all-pages]"),s=$("[data-command=reorder-pages]"),u=$("[data-command=change-slug]"),c=$(".page-search"),g=document.getElementById("newPageModal"),p=document.getElementById("slugModal");$$(".pages-list").forEach(function(T){T.getAttribute("data-orderable-children")==="true"&&D(T)}),$$(".page-details").forEach(function(T){$(".page-children-toggle",T)&&T.addEventListener("click",function(b){k(this),b.stopPropagation()})}),$$(".page-details a").forEach(function(T){T.addEventListener("click",function(b){b.stopPropagation()})}),$$(".pages-list .sort-handle").forEach(function(T){T.addEventListener("click",function(b){b.stopPropagation()})}),o&&o.addEventListener("click",function(){m(),this.blur()}),a&&a.addEventListener("click",function(){x(),this.blur()}),s&&s.addEventListener("click",function(){this.classList.toggle("active"),$(".pages-list").classList.toggle("is-reordering"),this.blur()}),c&&(c.addEventListener("focus",function(){$$(".pages-item").forEach(function(T){T.setAttribute("data-expanded",T.classList.contains("expanded")?"true":"false")})}),c.addEventListener("keyup",se.debounce(N,100)),c.addEventListener("search",N),document.addEventListener("keydown",function(T){(T.ctrlKey||T.metaKey)&&T.which===70&&document.activeElement!==c&&(c.focus(),T.preventDefault())})),g&&($("#page-title",g).addEventListener("keyup",function(){$("#page-slug",g).value=se.slug(this.value)}),$("#page-slug",g).addEventListener("keyup",O),$("#page-slug",g).addEventListener("blur",O),$("#page-parent",g).addEventListener("change",function(){var T=this.options[this.selectedIndex],b=$("#page-template",g),A=T.getAttribute("data-allowed-templates"),F=0;if(A!==null)for(A=A.split(", "),b.setAttribute("data-previous-value",b.value),b.value=A[0],F=0;F<b.options.length;F++)A.indexOf(b.options[F].value)===-1&&b.options[F].setAttribute("disabled","");else for(b.hasAttribute("data-previous-value")&&(b.value=b.getAttribute("data-previous-value"),b.removeAttribute("data-previous-value")),F=0;F<b.options.length;F++)b.options[F].disabled=!1})),p&&u&&(u.addEventListener("click",function(){Ot.show("slugModal",null,function(T){var b=document.getElementById("slug").value,A=$("#page-slug",T);A.value=b,A.setAttribute("placeholder",b)})}),$("#page-slug",p).addEventListener("keydown",function(T){T.which===13&&$("[data-command=continue]",p).click()}),$("#page-slug",p).addEventListener("keyup",O),$("#page-slug",p).addEventListener("blur",O),$("[data-command=generate-slug]",p).addEventListener("click",function(){var T=se.slug(document.getElementById("title").value);$("#page-slug",p).value=T,$("#page-slug",p).focus()}),$("[data-command=continue]",p).addEventListener("click",function(){var T=$("#page-slug",p).value.replace(/^-+|-+$/,""),b;T.length>0&&(b=$(".page-slug-change").innerHTML,$$("#page-slug, #slug").forEach(function(A){A.value=T}),$("#page-slug",p).value=T,document.getElementById("slug").value=T,$(".page-slug-change").innerHTML=b.replace(/\/[a-z0-9-]+\/$/,"/"+T+"/")),Ot.hide("slugModal")}));function m(){$$(".pages-item").forEach(function(T){T.classList.add("is-expanded")})}function x(){$$(".pages-item").forEach(function(T){T.classList.remove("is-expanded")})}function k(T){var b=T.closest(".pages-item");b.classList.toggle("is-expanded")}function D(T){var b=[],A=ue.create(T,{handle:".sort-handle",filter:".is-not-orderable",forceFallback:!0,swapThreshold:.75,invertSwap:!0,animation:150,onChoose:function(){var F=document.body.offsetHeight;document.body.style.height=F+"px";var P=window.addEventListener("scroll",function(){this.document.body.style.height="",this.removeEventListener("scroll",P)})},onStart:function(){T.classList.add("is-dragging")},onMove:function(F){if(F.related.classList.contains("is-not-orderable"))return!1},onEnd:function(F){T.classList.remove("is-dragging"),document.body.style.height="";var P,_;F.newIndex!==F.oldIndex&&(A.option("disabled",!0),P={"csrf-token":$("meta[name=csrf-token]").getAttribute("content"),page:T.children[F.newIndex].getAttribute("data-route"),before:T.children[F.oldIndex].getAttribute("data-route"),parent:T.getAttribute("data-parent")},on({method:"POST",url:Formwork.config.baseUri+"pages/reorder/",data:P},function(G){G.status&&(_=new Ut(G.message,G.status,{icon:"check-circle"}),_.show()),(!G.status||G.status==="error")&&A.sort(b),A.option("disabled",!1),b=A.toArray()}))}});b=A.toArray()}function N(){var T=this.value,b;T.length===0?($(".pages-list-root").classList.remove("is-filtered"),$$(".pages-item").forEach(function(A){var F=$(".page-title a",A);F.innerHTML=F.textContent,$(".pages-item-row",A).style.display="",A.classList.toggle("is-expanded",A.getAttribute("data-expanded")===!0)})):($(".pages-list-root").classList.add("is-filtered"),b=new RegExp(se.makeDiacriticsRegExp(se.escapeRegExp(T)),"gi"),$$(".pages-item").forEach(function(A){var F=$(".page-title a",A),P=F.textContent,_=$(".pages-item-row",A);P.match(b)!==null?(F.innerHTML=P.replace(b,"<mark>$&</mark>"),_.style.display=""):_.style.display="none",A.classList.add("is-expanded")}))}function O(){this.value=se.validateSlug(this.value)}}};var Df={init:function(){$$("[title]",document.body).forEach(function(o){o.setAttribute("data-tooltip",o.getAttribute("title")),o.removeAttribute("title")}),$$("[data-tooltip]").forEach(function(o){o.addEventListener("mouseover",function(){var a=new Pn(this.getAttribute("data-tooltip"),{referenceElement:this,position:"bottom",offset:{x:0,y:4}});a.show()}),(o.tagName.toLowerCase()==="button"||o.classList.contains("button"))&&o.addEventListener("focus",function(){var a=new Pn(this.getAttribute("data-tooltip"),{referenceElement:this,position:"bottom",offset:{x:0,y:4},delay:0});a.show()})}),$$('[data-overflow-tooltip="true"]').forEach(function(o){o.addEventListener("mouseover",function(){var a;this.offsetWidth<this.scrollWidth&&(a=new Pn(this.textContent.trim(),{referenceElement:this,position:"bottom",offset:{x:0,y:4}}),a.show())})})}};var Tf={init:function(){var o=document.getElementById("updater-component"),a,s,u,c,g,p;o&&(a=$(".update-status"),s=$(".spinner"),u=$(".current-version"),c=$(".current-version-name"),g=$(".new-version"),p=$(".new-version-name"),setTimeout(function(){var D={"csrf-token":$("meta[name=csrf-token]").getAttribute("content")};on({method:"POST",url:Formwork.config.baseUri+"updates/check/",data:D},function(N){a.innerHTML=N.message,N.status==="success"?N.data.uptodate===!1?m(N.data.release.name):x():(s.classList.add("spinner-error"),at.inject("exclamation",s))})},1e3),$("[data-command=install-updates]").addEventListener("click",function(){g.style.display="none",s.classList.remove("spinner-info"),a.innerHTML=a.getAttribute("data-installing-text"),on({method:"POST",url:Formwork.config.baseUri+"updates/update/",data:{"csrf-token":$("meta[name=csrf-token]").getAttribute("content")}},function(D){var N=new Ut(D.message,D.status,{icon:"check-circle"});N.show(),a.innerHTML=D.data.status,D.status==="success"?k():(s.classList.add("spinner-error"),at.inject("exclamation",s))})}));function m(D){s.classList.add("spinner-info"),at.inject("info",s),p.innerHTML=D,g.style.display="block"}function x(){s.classList.add("spinner-success"),at.inject("check",s),u.style.display="block"}function k(){s.classList.add("spinner-success"),at.inject("check",s),c.innerHTML=p.innerHTML,u.style.display="block"}}};var pa,Yh=pa={config:{},init:function(){Ot.init(),Ef.init(),Wu.init(),Df.init(),Bu.init(),Lf.init(),Tf.init(),$(".toggle-navigation")&&$(".toggle-navigation").addEventListener("click",function(){$(".sidebar").classList.toggle("show")}),$$("[data-chart-data]").forEach(function(a){var s=JSON.parse(a.getAttribute("data-chart-data"));_o(a,s)}),$$("meta[name=notification]").forEach(function(a){var s=JSON.parse(a.getAttribute("content"))[0],u=new Ut(s.text,s.type,{interval:s.interval,icon:s.icon});u.show(),a.parentNode.removeChild(a)}),$$(".collapsible .section-header").forEach(function(a){a.addEventListener("click",function(){var s=a.parentNode;s.classList.toggle("collapsed")})}),$("[data-command=save]")&&document.addEventListener("keydown",function(a){!a.altKey&&(a.ctrlKey||a.metaKey)&&a.which===83&&($("[data-command=save]").click(),a.preventDefault())}),window.addEventListener("beforeunload",o),window.addEventListener("pagehide",o);function o(){var a=se.getCookies(),s="formwork_preferred_color_scheme",u=s in a?a[s]:null,c=null;window.matchMedia("(prefers-color-scheme: light)").matches?c="light":window.matchMedia("(prefers-color-scheme: dark)").matches&&(c="dark"),c!==u&&se.setCookie(s,c,{"max-age":2592e3,path:pa.config.baseUri,samesite:"strict"})}},initGlobals:function(o){o.$=function(a,s){return typeof s=="undefined"&&(s=document),s.querySelector(a)},o.$$=function(a,s){return typeof s=="undefined"&&(s=document),s.querySelectorAll(a)},"forEach"in o.NodeList.prototype||(o.NodeList.prototype.forEach=o.Array.prototype.forEach),"matches"in o.Element.prototype||(o.Element.prototype.matches=o.Element.prototype.msMatchesSelector||o.Element.prototype.webkitMatchesSelector),"closest"in o.Element.prototype||(o.Element.prototype.closest=function(a){var s=this;do{if(s.matches(a))return s;s=s.parentElement||s.parentNode}while(s!==null&&s.nodeType===1);return null}),"requestSubmit"in o.HTMLFormElement.prototype||(o.HTMLFormElement.prototype.requestSubmit=function(a){a?(a instanceof HTMLElement||s(TypeError,"parameter 1 is not of type 'HTMLElement'"),a.type!=="submit"&&s(TypeError,"The specified element is not a submit button"),a.form!==this&&s(DOMException,"The specified element is not owned by this form element","NotFoundError"),a.click()):(a=document.createElement("input"),a.type="submit",a.hidden=!0,this.appendChild(a),a.click(),this.removeChild(a));function s(u,c,g){throw new u("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+c+".",g)}})}};document.addEventListener("DOMContentLoaded",function(){pa.init()});pa.initGlobals(window);return qd(qh);})();
/*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.0
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*/
